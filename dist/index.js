function e(e,t,i,s){Object.defineProperty(e,t,{get:i,set:s,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}function i(e){return e.location.position}function s(e){return e.location.file}function n(e){return atom.project.relativizePath(s(e)||"")[1]}function o(){let e=atom.workspace.getCenter().getActivePaneItem();const t=null!==e&&atom.workspace.isTextEditor(e);return!t&&e&&Ye&&e.getURI&&"atom://linter-ui-default"===e.getURI()&&(!Ye.isAlive||Ye.isAlive())?e=Ye:Ye=e,t?e:null}function r(e,t,i=null){const n=[];return e.forEach((e=>{e&&e.location&&(null!==t&&s(e)!==t||i&&e.severity!==i||n.push(e))})),n}function l(e,t,n){const o=[],r="Point"===n.constructor.name?new $e(n,n):$e.fromObject(n);return e.forEach((e=>{const n=s(e),l=i(e);n&&l&&n===t&&"function"==typeof l.intersectsWith&&l.intersectsWith(r)&&o.push(e)})),o}function a(e,t){const i={searchAllPanes:!0};t&&(i.initialLine=t.row,i.initialColumn=t.column),atom.workspace.open(e,i)}function c(e,t=!1){let n,o;if(t){if(!e.reference||!e.reference.file)return void console.warn("[Linter-UI-Default] Message does not have a valid reference. Ignoring");n=e.reference.file,o=e.reference.position}else{const t=i(e);n=s(e),t&&(o=t.start)}n&&a(n,o)}function u(e){2===e.version&&e.url&&He.openExternal(e.url)}function d(e,t){const s=t[0],o="asc"===t[1]?1:-1;return e.sort(((e,t)=>{if("severity"===s){const i=Je[e.severity],s=Je[t.severity];if(i!==s)return o*(i>s?1:-1)}if("linterName"===s){const i=e.severity.localeCompare(t.severity);if(0!==i)return o*i}if("file"===s){const i=n(e),s=i.length,r=n(t),l=r.length;if(s!==l)return o*(s>l?1:-1);if(i!==r)return o*i.localeCompare(r)}if("line"===s){const s=i(e),n=i(t);if(s&&!n)return 1;if(n&&!s)return-1;if(s&&n){if(s.start.row!==n.start.row)return o*(s.start.row>n.start.row?1:-1);if(s.start.column!==n.start.column)return o*(s.start.column>n.start.column?1:-1)}}return 0}))}function h(e){return e.sort(((e,t)=>void 0===e.priority||void 0===t.priority?0:t.priority-e.priority))}function f(e,t){if("apply"in t)return t.apply(),!0;const i=t.position,s=t.replaceWith;if("currentText"in t){const s=t.currentText,n=e.getTextInBufferRange(i);if(s!==n)return console.warn("[linter-ui-default] Not applying fix because text did not match the expected one","expected",s,"but got",n),!1}return e.setTextInBufferRange(i,s),!0}function p(e,t,i){const s=e.get(t);if(void 0!==s)return s;{const s=i();return null!==s&&e.set(t,s),s}}function m(e){et.context=e}function g(e,t){t&&(at=t);const i=ct,s=at,n=0===e.length?ot:{owned:null,cleanups:null,context:null,owner:s,attached:!!t};let o;at=n,ct=null;try{M((()=>o=e((()=>B(n)))),!0)}finally{ct=i,at=s}return o}function v(e,t=!0,i){const s={value:e,observers:null,observerSlots:null,pending:nt,comparator:t?"function"==typeof t?t:tt:void 0};return[x.bind(s),C.bind(s)]}function w(e,t){E(L(e,t,!1))}function y(e,t,i=!0){const s=L(e,t,!0);return s.pending=nt,s.observers=null,s.observerSlots=null,s.state=0,s.comparator=i?"function"==typeof i?i:tt:void 0,E(s),x.bind(s)}function b(e){if(ut)return e();const t=ut=[],i=e();return ut=null,M((()=>{for(let e=0;t.length>e;e+=1){const i=t[e];if(i.pending!==nt){const e=i.pending;i.pending=nt,C.call(i,e)}}}),!1),i}function k(e){let t,i=ct;return ct=null,t=e(),ct=i,t}function P(e){((e,t)=>{st=N;const i=L(e,void 0,!1);i.user=!0,ht&&ht.push(i)})((()=>k(e)))}function x(){if(this.state&&this.sources){const e=dt;dt=null,1===this.state?E(this):D(this),dt=e}if(ct){const e=this.observers?this.observers.length:0;ct.sources?(ct.sources.push(this),ct.sourceSlots.push(e)):(ct.sources=[this],ct.sourceSlots=[e]),this.observers?(this.observers.push(ct),this.observerSlots.push(ct.sources.length-1)):(this.observers=[ct],this.observerSlots=[ct.sources.length-1])}return ft&&ft.running&&ft.sources.has(this)?this.tValue:this.value}function C(e,t){if(this.comparator)if(ft&&ft.running&&ft.sources.has(this)){if(this.comparator(this.tValue,e))return e}else if(this.comparator(this.value,e))return e;return ut?(this.pending===nt&&ut.push(this),this.pending=e,e):(ft?((ft.running||!t&&ft.sources.has(this))&&(ft.sources.add(this),this.tValue=e),ft.running||(this.value=e)):this.value=e,!this.observers||dt&&!this.observers.length||M((()=>{for(let e=0;this.observers.length>e;e+=1){const t=this.observers[e];ft&&ft.running&&ft.disposed.has(t)||(t.observers&&2!==t.state&&I(t),t.state=1,t.pure?dt.push(t):ht.push(t))}if(dt.length>1e6)throw dt=[],Error("Potential Infinite Loop Detected.")}),!1),e)}function E(e){if(!e.fn)return;B(e);const t=at,i=ct,s=pt;ct=at=e,S(e,e.value,s),ft&&!ft.running&&ft.sources.has(e)&&(ft.running=!0,S(e,e.tValue,s),ft.running=!1),ct=i,at=t}function S(e,t,i){let s;try{s=e.fn(t)}catch(e){R(e)}e.updatedAt&&e.updatedAt>i||(e.observers&&e.observers.length?C.call(e,s,!0):ft&&ft.running&&e.pure?(ft.sources.add(e),e.tValue=s):e.value=s,e.updatedAt=i)}function L(e,t,i){const s={fn:e,state:1,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:at,context:null,pure:i};return null===at||at!==ot&&(ft&&ft.running&&at.pure?at.tOwned?at.tOwned.push(s):at.tOwned=[s]:at.owned?at.owned.push(s):at.owned=[s]),s}function T(e){let t,i=1===e.state&&e;if(e.suspense&&k(e.suspense.inFallback))return e.suspense.effects.push(e);const s=ft&&ft.running;for(;(e.fn||s&&e.attached)&&(e=e.owner);){if(s&&ft.disposed.has(e))return;2===e.state?t=e:1===e.state&&(i=e,t=void 0)}if(t){const n=dt;if(dt=null,D(t),dt=n,!i||1!==i.state)return;if(s)for(e=i;(e.fn||e.attached)&&(e=e.owner);)if(ft.disposed.has(e))return}i&&E(i)}function M(e,t){if(dt)return e();let i=!1;t||(dt=[]),ht?i=!0:ht=[],pt++;try{e()}catch(e){R(e)}finally{(e=>{if(dt&&(A(dt),dt=null),e)return;let t;if(ft&&ft.running){if(ft.promises.size)return ft.running=!1,ft.effects.push.apply(ft.effects,ht),ht=null,void lt(!0);const e=ft.sources;t=ft.cb,ft=null,b((()=>{e.forEach((e=>{if(e.value=e.tValue,e.owned)for(let t=0,i=e.owned.length;i>t;t++)B(e.owned[t]);e.tOwned&&(e.owned=e.tOwned),delete e.tValue,delete e.tOwned})),lt(!1)}))}ht.length?b((()=>{st(ht),ht=null})):ht=null,t&&t.forEach((e=>e()))})(i)}}function A(e){for(let t=0;e.length>t;t++)T(e[t])}function N(e){let t,i=0;for(t=0;e.length>t;t++){const s=e[t];s.user?e[i++]=s:T(s)}const s=e.length;for(t=0;i>t;t++)T(e[t]);for(t=s;e.length>t;t++)T(e[t])}function D(e){e.state=0;for(let t=0;e.sources.length>t;t+=1){const i=e.sources[t];i.sources&&(1===i.state?T(i):2===i.state&&D(i))}}function I(e){for(let t=0;e.observers.length>t;t+=1){const i=e.observers[t];i.state||(i.state=2,i.observers&&I(i))}}function B(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),i=e.sourceSlots.pop(),s=t.observers;if(s&&s.length){const e=s.pop(),n=t.observerSlots.pop();s.length>i&&(e.sourceSlots[n]=i,s[i]=e,t.observerSlots[i]=n)}}if(ft&&ft.running&&e.pure){if(e.tOwned){for(t=0;e.tOwned.length>t;t++)B(e.tOwned[t]);delete e.tOwned}O(e,!0)}else if(e.owned){for(t=0;e.owned.length>t;t++)B(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;e.cleanups.length>t;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function O(e,t){if(t||(e.state=0,ft.disposed.add(e)),e.owned)for(let t=0;e.owned.length>t;t++)O(e.owned[t])}function R(e){const t=it&&F(at,it);if(!t)throw e;t.forEach((t=>t(e)))}function F(e,t){return e&&(e.context&&e.context[t]||e.owner&&F(e.owner,t))}function j(e,t){let i=e[vt];if(!i){Object.defineProperty(e,vt,{value:i=new Proxy(e,yt)});let t=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let n=0,o=t.length;o>n;n++){const o=t[n];if(s[o].get){const t=s[o].get.bind(i);Object.defineProperty(e,o,{get:t})}}}return i}function $(e){return null!=e&&"object"==typeof e&&(!e.__proto__||e.__proto__===Object.prototype||Array.isArray(e))}function H(e,t=new Set){let i,s,n,o;if(i=null!=e&&e[mt])return i;if(!$(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,o=e.length;o>i;i++)n=e[i],(s=H(n,t))!==n&&(e[i]=s)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);let i=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let l=0,a=i.length;a>l;l++)o=i[l],r[o].get||(n=e[o],(s=H(n,t))!==n&&(e[o]=s))}return e}function _(e){let t=e[gt];return t||Object.defineProperty(e,gt,{value:t={}}),t}function q(){const[e,t]=v(void 0,!1);return e.set=t,e}function V(e,t,i){if(e[t]===i)return;const s=Array.isArray(e),n=e.length,o=s||!(t in e);void 0===i?delete e[t]:e[t]=i;let r,l=_(e);(r=l[t])&&r.set(),s&&e.length!==n&&(r=l.length)&&r.set(),o&&(r=l._)&&r.set()}function W(e,t,i=[]){let s,n=e;if(t.length>1){s=t.shift();const o=typeof s,r=Array.isArray(e);if(Array.isArray(s)){for(let n=0;s.length>n;n++)W(e,[s[n]].concat(t),[s[n]].concat(i));return}if(r&&"function"===o){for(let n=0;e.length>n;n++)s(e[n],n)&&W(e,[n].concat(t),[n].concat(i));return}if(r&&"object"===o){const{from:n=0,to:o=e.length-1,by:r=1}=s;for(let s=n;o>=s;s+=r)W(e,[s].concat(t),[s].concat(i));return}if(t.length>1)return void W(e[s],t,[s].concat(i));n=e[s],i=[s].concat(i)}let o=t[0];"function"==typeof o&&(o=o(n,i),o===n)||void 0===s&&null==o||(o=H(o),void 0===s||$(n)&&$(o)&&!Array.isArray(o)?((e,t)=>{const i=Object.keys(t);for(let s=0;i.length>s;s+=1){const n=i[s];V(e,n,t[n])}})(n,o):V(e,s,o))}function G(e,t){if(et.context){const i=et.context;m({...et.context,id:`${et.context.id}${et.context.count++}.`,count:0});const s=k((()=>e(t)));return m(i),s}return k((()=>e(t)))}function z(e){return y(((e,t,i={})=>{let s=[],n=[],o=[],r=0,l=t.length>1?[]:null,a=at;return c=()=>{for(let e=0,t=o.length;t>e;e++)o[e]()},null===at||(null===at.cleanups?at.cleanups=[c]:at.cleanups.push(c)),()=>{function c(e){if(o[d]=e,l){const[e,i]=v(d);return l[d]=i,t(h[d],e)}return t(h[d])}let u,d,h=e()||[];return k((()=>{let e,t,f,p,m,v,w,y,b,k=h.length;if(0===k){if(0!==r){for(u=0;r>u;u++)o[u]();o=[],s=[],n=[],r=0,l&&(l=[])}i.fallback&&(s=[bt],n[0]=g((e=>(o[0]=e,i.fallback())),a),r=1)}else if(0===r){for(d=0;k>d;d++)s[d]=h[d],n[d]=g(c,a);r=k}else{for(f=Array(k),p=Array(k),l&&(m=Array(k)),v=0,w=Math.min(r,k);w>v&&s[v]===h[v];v++);for(w=r-1,y=k-1;w>=v&&y>=v&&s[w]===h[y];w--,y--)f[y]=n[w],p[y]=o[w],l&&(m[y]=l[w]);for(e=new Map,t=Array(y+1),d=y;d>=v;d--)b=h[d],u=e.get(b),t[d]=void 0===u?-1:u,e.set(b,d);for(u=v;w>=u;u++)b=s[u],d=e.get(b),void 0!==d&&-1!==d?(f[d]=n[u],p[d]=o[u],l&&(m[d]=l[u]),d=t[d],e.set(b,d)):o[u]();for(d=v;k>d;d++)d in f?(n[d]=f[d],o[d]=p[d],l&&(l[d]=m[d],l[d](d))):n[d]=g(c,a);r=n.length=k,s=h.slice(0)}return n}))};var c})((()=>e.each),e.children,"fallback"in e&&{fallback(){return e.fallback}}||void 0),void 0,!1)}function U(e,t){return y(e,void 0,t)}function K(e,t,i){let s=i.length,n=t.length,o=s,r=0,l=0,a=t[n-1].nextSibling,c=null;for(;n>r||o>l;)if(n===r){const t=s>o?l?i[l-1].nextSibling:i[o-l]:a;for(;o>l;)e.insertBefore(i[l++],t)}else if(o===l)for(;n>r;)c&&c.has(t[r])||e.removeChild(t[r]),r++;else if(t[r]===i[l])r++,l++;else if(t[n-1]===i[o-1])n--,o--;else if(t[r]===i[o-1]&&i[l]===t[n-1]){const s=t[--n].nextSibling;e.insertBefore(i[l++],t[r++].nextSibling),e.insertBefore(i[--o],s),t[n]=i[o]}else{if(!c){c=new Map;let e=l;for(;o>e;)c.set(i[e],e++)}const s=c.get(t[r]);if(null!=s)if(s>l&&o>s){let a,u=r,d=1;for(;++u<n&&o>u&&null!=(a=c.get(t[u]))&&a===s+d;)d++;if(d>s-l){const n=t[r];for(;s>l;)e.insertBefore(i[l++],n)}else e.replaceChild(i[l++],t[r++])}else r++;else e.removeChild(t[r++])}}function Y(e,t,i){let s;return g((n=>{s=n,ee(t,e(),t.firstChild?null:void 0,i)})),()=>{s(),t.textContent=""}}function J(e,t,i){const s=document.createElement("template");if(s.innerHTML=e,t&&s.innerHTML.split("<").length-1!==t)throw`Template html does not match input:\n${s.innerHTML}\n\n${e}`;let n=s.content.firstChild;return i&&(n=n.firstChild),n}function Q(e){const t=document[kt]||(document[kt]=new Set);for(let i=0,s=e.length;s>i;i++){const s=e[i];t.has(s)||(t.add(s),document.addEventListener(s,te))}}function X(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function Z(e,t,i,s){s?Array.isArray(i)?(e["$$"+t]=i[0],e[`$$${t}Data`]=i[1]):e["$$"+t]=i:e.addEventListener(t,Array.isArray(i)?e=>i[0](i[1],e):i)}function ee(e,t,i,s){if(void 0===i||s||(s=[]),"function"!=typeof t)return ie(e,t,s,i);w((s=>ie(e,t(),s,i)),s)}function te(e){const t="$$"+e.type;let i=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==i&&Object.defineProperty(e,"target",{configurable:!0,value:i}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>i});null!==i;){const s=i[t];if(s){const n=i[t+"Data"];if(void 0!==n?s(n,e):s(e),e.cancelBubble)return}i=i.host&&i.host!==i&&i.host instanceof Node?i.host:i.parentNode}}function ie(e,t,i,s,n){for(;"function"==typeof i;)i=i();if(t===i)return i;const o=typeof t,r=void 0!==s;if(e=r&&i[0]&&i[0].parentNode||e,"string"===o||"number"===o)if("number"===o&&(t=""+t),r){let n=i[0];n&&3===n.nodeType?n.data=t:n=document.createTextNode(t),i=oe(e,i,s,n)}else i=""!==i&&"string"==typeof i?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===o){if(et.context)return i;i=oe(e,i,s)}else{if("function"===o)return w((()=>{let n=t();for(;"function"==typeof n;)n=n();i=ie(e,n,i,s)})),()=>i;if(Array.isArray(t)){const o=[];if(se(o,t,n))return w((()=>i=ie(e,o,i,s,!0))),()=>i;if(et.context&&i.length)return i;if(0===o.length){if(i=oe(e,i,s),r)return i}else Array.isArray(i)?0===i.length?ne(e,o,s):K(e,i,o):null==i||""===i?ne(e,o):K(e,r&&i||[e.firstChild],o);i=o}else if(t instanceof Node){if(Array.isArray(i)){if(r)return i=oe(e,i,s,t);oe(e,i,null,t)}else null!=i&&""!==i&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);i=t}else console.warn("Skipped inserting",t)}return i}function se(e,t,i){let s=!1;for(let n=0,o=t.length;o>n;n++){let o,r=t[n];if(r instanceof Node)e.push(r);else if(null==r||!0===r||!1===r);else if(Array.isArray(r))s=se(e,r)||s;else if("string"==(o=typeof r))e.push(document.createTextNode(r));else if("function"===o)if(i){for(;"function"==typeof r;)r=r();s=se(e,Array.isArray(r)?r:[r])||s}else e.push(r),s=!0;else e.push(document.createTextNode(""+r))}return s}function ne(e,t,i){for(let s=0,n=t.length;n>s;s++)e.insertBefore(t[s],i)}function oe(e,t,i,s){if(void 0===i)return e.textContent="";const n=s||document.createTextNode("");if(t.length){let s=!1;for(let o=t.length-1;o>=0;o--){const r=t[o];if(n!==r){const t=r.parentNode===e;s||o?t&&e.removeChild(r):t?e.replaceChild(n,r):e.insertBefore(n,i)}else s=!0}}else e.insertBefore(n,i);return[n]}function re(e){function t(){const t=n();return void 0!==t?t:void 0!==e.defaultSortDirection?e.defaultSortDirection:[null,null]}function i(){const i=t();null===i[0]&&void 0!==e.defaultSortDirection?l(a(r(),e.defaultSortDirection)):null!==i[0]&&l(a(r(),i))}var s;const[n,o]=v(),[r,l]=v(e.rows,!1);E(L((()=>{l(e.rows)}),undefined,!0));const a=null!==(s=e.rowSorter)&&void 0!==s?s:de,{headerRenderer:c=ae,bodyRenderer:u=ce,getRowID:d=ue,accessors:h}=e;return void 0===e.columns&&(e.columns=((e,t=0)=>{const i=Object.keys(e[t]),s=i.length,n=Array(s);for(let e=0;s>e;e++)n[e]={id:i[e]};return n})(e.rows,e.representitiveRowNumber)),i(),(()=>{const s=Pt.cloneNode(!0),n=s.firstChild,l=n.nextSibling;return ee(n.firstChild,G(z,{get each(){return e.columns},children(e){const s=!1!==e.sortable;return(()=>{const n=xt.cloneNode(!0);var r;return Z(n,"click",s?(r=e.id,e=>{o(((e,t,i)=>{let s;return s=i?[null,null]:e[0]===t?[e[0],"asc"===e[1]?"desc":"asc"]:[t,"asc"],s})(t(),r,e.shiftKey)),i()}):void 0,!0),n.className=s?"sortable":void 0,ee(n,(()=>c(e)),null),ee(n,(()=>s?((e,t)=>{let i;return i=null===e[0]||e[0]!==t?Mt:"asc"===e[1]?Tt:Lt,(()=>{const e=St.cloneNode(!0);return ee(e,i),e})()})(t(),e.id):void 0),null),w((()=>X(n,"id",h?e.id+"":void 0))),n})()}})),ee(l,G(z,{get each(){return r()},children(t){const i=h?d(t):void 0;return(()=>{const s=Ct.cloneNode(!0);return X(s,"id",i),ee(s,G(z,{get each(){return e.columns},children(e){return(()=>{const s=Et.cloneNode(!0);return Z(s,"click",void 0!==e.onClick?i=>e.onClick(i,t):void 0,!0),ee(s,(()=>u(t,e.id))),w((()=>X(s,"id",i?`${i}.${e.id}`:void 0))),s})()}})),s})()}})),w((t=>{var i;const n="solid-simple-table "+(null!==(i=e.className)&&void 0!==i?i:""),o=e.style;return n!==t._v$&&(s.className=t._v$=n),t._v$2=((e,t,i={})=>{const s=e.style;if("string"==typeof t)return s.cssText=t;let n,o;for(o in"string"==typeof i&&(i={}),i)null==t[o]&&s.removeProperty(o),delete i[o];for(o in t)n=t[o],n!==i[o]&&(s.setProperty(o,n),i[o]=n);return i})(s,o,t._v$2),t}),{_v$:void 0,_v$2:void 0}),s})()}function le(e){return"string"==typeof e?e:JSON.stringify(e)}function ae(e){var t;return null!==(t=e.label)&&void 0!==t?t:e.id}function ce(e,t){return le("object"==typeof e?e[t]:e)}function ue(e){return le(e)}function de(e,t){if(!e.length)return e;let i;const s=t[0];return i="object"==typeof e[0]?e.sort(((e,t)=>{const i=e[s],n=t[s];return i===n?0:n>i?-1:1})):e.sort(),"desc"===t[1]?i.reverse():i}function he(e){const[t,i]=v(e.delegate.filteredMessages,!1);P((()=>{e.delegate.onDidChangeMessages((e=>{i(e)}))}));const s=[{id:"severity",label:"Severity"},{id:"linterName",label:"Provider"},{id:"excerpt",label:"Description",onClick:pe,sortable:!1},{id:"line",label:"Line",onClick:pe}];return"Entire Project"===e.delegate.panelRepresents&&s.push({id:"file",label:"File",onClick:pe}),(()=>{const e=At.cloneNode(!0);return X(e,"tabindex",-1),e.style.setProperty("overflowY","scroll"),e.style.setProperty("height","100%"),ee(e,G(re,{get rows(){return t()},columns:s,defaultSortDirection:["severity","asc"],rowSorter:d,accessors:!0,getRowID(e){return e.key},bodyRenderer:fe,style:{width:"100%"},className:"linter dark"})),e})()}function fe(e,t){const s=i(e);switch(t){case"file":return n(e);case"line":return s?`${s.start.row+1}:${s.start.column+1}`:"";case"excerpt":return e.excerpt;case"severity":return(()=>{const t=Nt.cloneNode(!0);return ee(t,(()=>Qe[e.severity])),w((()=>t.className="solid-simple-table linter "+e.severity)),t})();default:return e[t]}}function pe(e,t){"A"!==e.target.tagName&&(("darwin"===process.platform?e.metaKey:e.ctrlKey)?e.shiftKey?u(t):c(t,!0):c(t))}function me(e){const t=atom.workspace.paneContainerForItem(e);return t&&"object"==typeof t.state&&"number"==typeof t.state.size&&"function"==typeof t.render?t:null}function ge(e){const t=document.createElement("a");return t.classList.add("icon-"+e),t.appendChild(document.createTextNode("")),t}function ve(e){return(()=>{const t=pi.cloneNode(!0);return Z(t,"click",e.onClick,!0),t})()}function we(e){async function t(o=null){const l=i.description||e.message.description;if(!i.descriptionShow||o)if("string"==typeof l||o){void 0===bi&&(bi=(await Ke("hRY2p")).default);const e=bi(o||l);s({description:e,descriptionShow:!0})}else if("function"==typeof l){if(s({...i,descriptionShow:!0}),n())return;r(!0);const e=await l();if("string"!=typeof e)throw Error("Expected result to be string, got: "+typeof e);try{await t(e)}catch(e){console.log("[Linter] Error getting descriptions",e),r(!1),i.descriptionShow&&await t()}}else console.error("[Linter] Invalid description detected, expected string or function but got:",typeof l);else s({...i,descriptionShow:!1})}const[i,s]=((e,t)=>{const i=H({description:"",descriptionShow:!1}||{});return[j(i),(...e)=>{b((()=>W(i,e)))}]})(),[n,r]=v(!1,!1);P((()=>{e.delegate.onShouldUpdate((()=>{s({description:"",descriptionShow:!1})})),e.delegate.onShouldExpand((async()=>{i.descriptionShow||await t()})),e.delegate.onShouldCollapse((async()=>{i.descriptionShow&&await t()}))}));const{message:l,delegate:a}=e;return(()=>{const e=mi.cloneNode(!0),s=e.firstChild,n=s.firstChild,r=n.firstChild,d=n.nextSibling;return e.$$click=ye,ee(s,(()=>{const e=U((()=>!!l.description),!0);return()=>e()&&(()=>{const e=gi.cloneNode(!0),s=e.firstChild;return e.$$click=()=>t(),w((()=>s.className="icon linter-icon icon-"+(i.descriptionShow?"chevron-down":"chevron-right"))),e})()})(),n),ee(s,(()=>{const e=U((()=>!!(e=>!(2!==e.version||!e.solutions||!e.solutions.length))(l)),!0);return()=>e()&&G(ve,{onClick(){return(e=>{const t=e.solutions,i=o();null!==i&&2===e.version&&Array.isArray(t)&&t.length>0&&f(i,h(t)[0])})(l)}})})(),n),ee(r,(()=>a.showProviderName?l.linterName+": ":"")),ee(n,(()=>l.excerpt),null),ee(d,(()=>{const e=U((()=>!(!l.reference||!l.reference.file)),!0);return()=>e()&&(()=>{const e=vi.cloneNode(!0);return e.$$click=()=>c(l,!0),e})()})(),null),ee(d,(()=>{const e=U((()=>!!l.url),!0);return()=>e()&&(()=>{const e=wi.cloneNode(!0);return e.$$click=()=>u(l),e})()})(),null),ee(e,(()=>{const e=U((()=>!!i.descriptionShow),!0);return()=>e()&&(()=>{const e=yi.cloneNode(!0);return w((()=>e.innerHTML=i.description||"Loading...")),e})()})(),null),w((()=>s.className="linter-excerpt "+l.severity)),e})()}function ye(e){if(!(e.target instanceof HTMLElement))return;const t=(e=>{for(;e&&!e.classList.contains("linter-line");){if(e instanceof HTMLAnchorElement)return e.href;e=e.parentElement}return null})(e.target);if(!t)return;const{protocol:i,hostname:s,query:n}=Ve(t,!0);if("atom:"===i&&"linter"===s&&n&&n.file){const{file:e,row:t,column:i}=n;a(Array.isArray(e)?e[0]:e,{row:t?parseInt(Array.isArray(t)?t[0]:t,10):0,column:i?parseInt(Array.isArray(i)?i[0]:i,10):0})}}function be(e,t){const i=atom.views.getView(e).getComponent();t.addEventListener("mousedown",(()=>{Pe(i),t.addEventListener("mouseleave",(()=>{ke(i)}))}))}function ke(e){null==e||e.didFocus()}function Pe(e){null==e||e.didBlurHiddenInput({relatedTarget:null})}async function xe(e){if(e.preventDefault(),e.ctrlKey&&"c"===e.key){var t,i;const e=null!==(t=null===(i=document.getSelection())||void 0===i?void 0:""+i)&&void 0!==t?t:"";await navigator.clipboard.writeText(e)}}function Ce(e,t){if(e.largeFileMode)return 1e5;const i=e.getLineCount();return t>i?0:i}function Ee(e,t,i=e.getLineCount()){const s=e.getBuffer();for(let e=0,n=i;n>e;e++){const i=s.lineLengthForRow(e);if(i>t)return i}return 0}function Se(e,t,i=!1){let s=null;i&&(s=e.querySelector("linter-decoration")),null!==s?s.className="":(s=document.createElement("linter-decoration"),e.appendChild(s)),t.error?s.classList.add("linter-error"):t.warning?s.classList.add("linter-warning"):t.info&&s.classList.add("linter-info")}function Le(e){var t;null===(t=e.querySelector("linter-decoration"))||void 0===t||t.remove()}function Te(){atom.config.get("linter-ui-default.useBusySignal")&&atom.packages.getLoadedPackage("linter-ui-default").metadata["package-deps"].push("busy-signal");const e=window.requestIdleCallback((()=>{Mi.delete(e);{const{install:e}=Be;e("linter-ui-default")}}));Mi.add(e)}function Me(){Mi.forEach((e=>window.cancelIdleCallback(e))),Mi.clear();for(const e of Ai)e.dispose();Ai.clear()}function Ae(){const e=new Ti;return Ai.add(e),Ni&&e.signal.attach(Ni),e}function Ne(){return Array.from(Ai).map((e=>e.intentions))}function De(e){Ni=e,Ai.forEach((e=>{e.signal.attach(Ni)}))}function Ie(e){Di=e,Ai.forEach((e=>{e.statusBar.attach(Di)}))}var Be=require("atom-package-deps"),Oe=require("atom"),Re=Oe.CompositeDisposable,Fe=Oe.Emitter,je=Oe.Disposable,$e=Oe.Range,He=require("electron").shell,_e=t(require("assert")),qe=t(require("disposable-event")),Ve=require("url").parse,We=t(require("path")),Ge="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},ze={},Ue={},Ke=Ge.parcelRequiree95c;null==Ke&&((Ke=e=>{if(e in ze)return ze[e].exports;if(e in Ue){let t=Ue[e];delete Ue[e];let i={id:e,exports:{}};return ze[e]=i,t.call(i.exports,i,i.exports),i.exports}var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}).register=(e,t)=>{Ue[e]=t},Ge.parcelRequiree95c=Ke),e(module.exports,"provideIntentions",(()=>Ne)),e(module.exports,"consumeStatusBar",(()=>Ie)),e(module.exports,"consumeSignal",(()=>De)),e(module.exports,"activate",(()=>Te)),e(module.exports,"provideUI",(()=>Ae)),e(module.exports,"deactivate",(()=>Me));let Ye=null;const Je={error:3,warning:2,info:1},Qe={error:"Error",warning:"Warning",info:"Info"},Xe=["center","bottom"];class Ze{constructor(){this.emitter=new Fe,this.messages=[],this.filteredMessages=[],this.subscriptions=new Re;let e=null;this.subscriptions.add(atom.config.observe("linter-ui-default.panelRepresents",(e=>{const t=void 0!==this.panelRepresents;this.panelRepresents=e,t&&this.update()})),atom.workspace.getCenter().observeActivePaneItem((()=>{e&&(e.dispose(),e=null);const t=o();if(t){"Entire Project"!==this.panelRepresents&&this.update();let i=-1;e=t.onDidChangeCursorPosition((({newBufferPosition:e})=>{i!==e.row&&"Current Line"===this.panelRepresents&&(i=e.row,this.update())}))}("Entire Project"!==this.panelRepresents||t)&&this.update()})),new je((()=>{e&&e.dispose()})))}getFilteredMessages(){let e=[];if("Entire Project"===this.panelRepresents)e=this.messages;else if("Current File"===this.panelRepresents){const t=o();if(!t)return[];e=r(this.messages,t.getPath())}else if("Current Line"===this.panelRepresents){const t=o();if(!t)return[];const i=t.getCursors()[0].getBufferRow();e=l(this.messages,t.getPath(),$e.fromObject([[i,0],[i,1/0]]))}return e}update(e=null){Array.isArray(e)&&(this.messages=e),this.filteredMessages=this.getFilteredMessages(),this.emitter.emit("observe-messages",this.filteredMessages)}onDidChangeMessages(e){return this.emitter.on("observe-messages",e)}dispose(){this.subscriptions.dispose()}}const et={},tt=(e,t)=>e===t;let it=null,st=A;const nt={},ot={owned:null,cleanups:null,context:null,owner:null},[rt,lt]=v(!1);var at=null,ct=null;let ut=null,dt=null,ht=null,ft=null,pt=0;const mt=Symbol(),gt=Symbol(),vt=Symbol(),wt=Symbol(),yt={get(e,t,i){if(t===mt)return e;if(t===vt)return i;const s=e[t];if(t===gt||"__proto__"===t)return s;const n=$(s);if(ct&&("function"!=typeof s||e.hasOwnProperty(t))){let i,o;n&&(i=_(s))&&(o=i._||(i._=q()),o()),i=_(e),o=i[t]||(i[t]=q()),o()}return n?j(s):s},set:()=>!0,deleteProperty:()=>!0,getOwnPropertyDescriptor(e,t){const i=Reflect.getOwnPropertyDescriptor(e,t);return!i||i.get||t===vt||t===gt||t===wt||(delete i.value,delete i.writable,i.get=()=>e[vt][t]),i}},bt=Symbol();(e=>{Symbol()})(),new Set(["className","indeterminate","value","allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","truespeed"]),new Set(["innerHTML","textContent","innerText","children"]),new Set(["beforeinput","click","dblclick","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]);const kt=Symbol(),Pt=J("<table><thead><tr></tr></thead><tbody></tbody></table>",8),xt=J("<th></th>",2),Ct=J("<tr></tr>",2),Et=J("<td></td>",2),St=J('<span class="sort-icon"></span>',2),Lt="↑",Tt="↓",Mt="⇅";Q(["click"]);const At=J('<div id="linter-panel"></div>',2),Nt=J("<div></div>",2);class Dt{constructor(e){this.element=document.createElement("div"),this.subscriptions=new Re,this.panelHeight=100,this.alwaysTakeMinimumSpace=!0,this.subscriptions.add(atom.config.observe("linter-ui-default.panelHeight",(e=>{const t="number"==typeof this.panelHeight;this.panelHeight=e,t&&this.doPanelResize(!0)})),atom.config.observe("linter-ui-default.alwaysTakeMinimumSpace",(e=>{this.alwaysTakeMinimumSpace=e}))),this.doPanelResize(),Y((()=>G(he,{delegate:e})),this.element)}doPanelResize(e=!1){const t=me(this);if(null===t)return;let i=null;const s=atom.views.getView(t);if(s&&this.alwaysTakeMinimumSpace){const e=s.querySelector(".list-inline.tab-bar.inset-panel"),t=e?e.getClientRects()[0]:null,n=this.element.querySelector("table"),o=n?n.getClientRects()[0]:null;t&&o&&(i=t.height+o.height+1)}let n=null;const o=null===i||e?this.panelHeight:Math.min(i,this.panelHeight);null===this.lastSetPaneHeight||t.state.size===this.lastSetPaneHeight||e||(n=t.state.size),this.lastSetPaneHeight=o,t.state.size=o,t.render(t.state),null!==n&&atom.config.set("linter-ui-default.panelHeight",n)}getURI(){return"atom://linter-ui-default"}getTitle(){return"Linter"}getDefaultLocation(){return"bottom"}getAllowedLocations(){return Xe}getPreferredHeight(){return atom.config.get("linter-ui-default.panelHeight")}dispose(){this.subscriptions.dispose();const e=me(this);var t;null===e||this.alwaysTakeMinimumSpace||e.state.size===this.panelHeight||(atom.config.set("linter-ui-default.panelHeight",e.state.size),null===(t=e.paneForItem(this))||void 0===t||t.destroyItem(this,!0))}}class It{constructor(){this.panel=null,this.element=document.createElement("div"),this.delegate=new Ze,this.messages=[],this.deactivating=!1,this.subscriptions=new Re,this.showPanelConfig=!0,this.hidePanelWhenEmpty=!0,this.showPanelStateMessages=!1,this.subscriptions.add(this.delegate,atom.config.observe("linter-ui-default.hidePanelWhenEmpty",(e=>{this.hidePanelWhenEmpty=e,this.refresh()})),atom.workspace.onDidDestroyPane((({pane:e})=>{(null===this.panel||e.getItems().includes(this.panel))&&!this.deactivating&&(this.panel=null,atom.config.set("linter-ui-default.showPanel",!1))})),atom.workspace.onDidDestroyPaneItem((({item:e})=>{e instanceof Dt&&!this.deactivating&&(this.panel=null,atom.config.set("linter-ui-default.showPanel",!1))})),atom.config.observe("linter-ui-default.showPanel",(e=>{this.showPanelConfig=e,this.refresh()})),atom.workspace.getCenter().observeActivePaneItem((()=>{this.showPanelStateMessages=!!this.delegate.filteredMessages.length,this.refresh()}))),this.activationTimer=window.requestIdleCallback((()=>{let e=!0;const t=atom.workspace.getBottomDock();this.subscriptions.add(t.onDidChangeActivePaneItem((t=>{this.panel&&"bottom"===this.getPanelLocation()&&(e?e=!1:t===this.panel!==this.showPanelConfig&&atom.config.set("linter-ui-default.showPanel",!this.showPanelConfig))})),t.onDidChangeVisible((e=>{this.panel&&"bottom"===this.getPanelLocation()&&(!e&&this.showPanelConfig&&this.hidePanelWhenEmpty&&!this.showPanelStateMessages||t.getActivePaneItem()===this.panel&&e!==this.showPanelConfig&&atom.config.set("linter-ui-default.showPanel",!this.showPanelConfig))}))),this.activate()}))}getPanelLocation(){if(!this.panel)return null;const e=atom.workspace.paneContainerForItem(this.panel);return e&&e.location||null}async activate(){this.panel||(this.panel=new Dt(this.delegate),await atom.workspace.open(this.panel,{activatePane:!1,activateItem:!1,searchAllPanes:!0}),this.update(),this.refresh())}update(e=null){e&&(this.messages=e),this.delegate.update(this.messages),this.showPanelStateMessages=!!this.delegate.filteredMessages.length,this.refresh()}async refresh(){const e=this.panel;if(null===e)return void(this.showPanelConfig&&await this.activate());const t=atom.workspace.paneContainerForItem(e);if(!t||"bottom"!==t.location)return;const i=t.getActivePaneItem()===e;var s;!this.showPanelConfig||this.hidePanelWhenEmpty&&!this.showPanelStateMessages?i&&t.hide():(i||null===(s=t.paneForItem(e))||void 0===s||s.activateItem(e),t.show(),e.doPanelResize())}dispose(){this.deactivating=!0,this.panel&&this.panel.dispose(),this.subscriptions.dispose(),window.cancelIdleCallback(this.activationTimer)}}class Bt{constructor(){this.messages=[],this.subscriptions=new Re,this.subscriptions.add(atom.commands.add("atom-workspace",{"linter-ui-default:next":()=>this.move(!0,!0),"linter-ui-default:previous":()=>this.move(!1,!0),"linter-ui-default:next-error":()=>this.move(!0,!0,"error"),"linter-ui-default:previous-error":()=>this.move(!1,!0,"error"),"linter-ui-default:next-warning":()=>this.move(!0,!0,"warning"),"linter-ui-default:previous-warning":()=>this.move(!1,!0,"warning"),"linter-ui-default:next-info":()=>this.move(!0,!0,"info"),"linter-ui-default:previous-info":()=>this.move(!1,!0,"info"),"linter-ui-default:next-in-current-file":()=>this.move(!0,!1),"linter-ui-default:previous-in-current-file":()=>this.move(!1,!1),"linter-ui-default:next-error-in-current-file":()=>this.move(!0,!1,"error"),"linter-ui-default:previous-error-in-current-file":()=>this.move(!1,!1,"error"),"linter-ui-default:next-warning-in-current-file":()=>this.move(!0,!1,"warning"),"linter-ui-default:previous-warning-in-current-file":()=>this.move(!1,!1,"warning"),"linter-ui-default:next-info-in-current-file":()=>this.move(!0,!1,"info"),"linter-ui-default:previous-info-in-current-file":()=>this.move(!1,!1,"info"),"linter-ui-default:toggle-panel"(){atom.config.set("linter-ui-default.showPanel",!atom.config.get("linter-ui-default.showPanel"))},"linter-ui-default:expand-tooltip"(){},"linter-ui-default:collapse-tooltip"(){}}),atom.commands.add("atom-text-editor:not([mini])",{"linter-ui-default:apply-all-solutions":()=>this.applyAllSolutions()}),atom.commands.add("#linter-panel",{"core:copy"(){const e=document.getSelection();e&&atom.clipboard.write(""+e)}}))}applyAllSolutions(){const e=o();_e(e,"textEditor was null on a command supposed to run on text-editors only"),d(r(this.messages,e.getPath()),["line","desc"]).forEach((t=>{2===t.version&&Array.isArray(t.solutions)&&t.solutions.length>0&&f(e,h(t.solutions)[0])}))}move(e,t,n=null){const l=o(),a=l&&l.getPath()||NaN,u=d(r(this.messages,t?null:a,n),["file","asc"]),h=e?-1:1;if(!l){const t=e?u[0]:u[u.length-1];return void(t&&c(t))}const f=l.getCursorBufferPosition();e||u.reverse();let p=null,m=!1;for(let e=0,t=u.length;t>e;e++){const t=u[e],n=s(t),o=i(t);if(m||n!==a||(m=!0),n&&o){if(m&&n!==a){p=t;break}if(n===a&&f.compare(o.start)===h){p=t;break}}}!p&&u.length&&(p=u[0]),p&&c(p)}update(e){this.messages=e}dispose(){this.subscriptions.dispose()}}class Ot{constructor(){this.item=document.createElement("div"),this.itemErrors=ge("stop"),this.itemWarnings=ge("alert"),this.itemInfos=ge("info"),this.emitter=new Fe,this.subscriptions=new Re,this.item.appendChild(this.itemErrors),this.item.appendChild(this.itemWarnings),this.item.appendChild(this.itemInfos),this.item.classList.add("inline-block"),this.item.classList.add("linter-status-count"),this.subscriptions.add(this.emitter,atom.tooltips.add(this.itemErrors,{title:"Linter Errors"}),atom.tooltips.add(this.itemWarnings,{title:"Linter Warnings"}),atom.tooltips.add(this.itemInfos,{title:"Linter Infos"})),this.itemErrors.onclick=()=>this.emitter.emit("click","error"),this.itemWarnings.onclick=()=>this.emitter.emit("click","warning"),this.itemInfos.onclick=()=>this.emitter.emit("click","info"),this.update(0,0,0)}setVisibility(e,t){t?this.item.classList.remove("hide-"+e):this.item.classList.add("hide-"+e)}update(e,t,i){this.itemErrors.childNodes[0].textContent=e+"",this.itemWarnings.childNodes[0].textContent=t+"",this.itemInfos.childNodes[0].textContent=i+"",e?this.itemErrors.classList.add("text-error"):this.itemErrors.classList.remove("text-error"),t?this.itemWarnings.classList.add("text-warning"):this.itemWarnings.classList.remove("text-warning"),i?this.itemInfos.classList.add("text-info"):this.itemInfos.classList.remove("text-info")}onDidClick(e){return this.emitter.on("click",e)}dispose(){this.subscriptions.dispose()}}class Rt{constructor(){this.element=new Ot,this.messages=[],this.subscriptions=new Re,this.subscriptions.add(this.element,atom.config.observe("linter-ui-default.statusBarRepresents",(e=>{const t=void 0!==this.statusBarRepresents;this.statusBarRepresents=e,t&&this.update()})),atom.config.observe("linter-ui-default.statusBarClickBehavior",(e=>{const t=void 0!==this.statusBarClickBehavior;this.statusBarClickBehavior=e,t&&this.update()})),atom.config.observe("linter-ui-default.showStatusBar",(e=>{this.element.setVisibility("config",e)})),atom.workspace.getCenter().observeActivePaneItem((e=>{const t=atom.workspace.isTextEditor(e);this.element.setVisibility("pane",t),t&&"Current File"===this.statusBarRepresents&&this.update()}))),this.element.onDidClick((e=>{const t=atom.views.getView(atom.workspace);"Toggle Panel"===this.statusBarClickBehavior?atom.commands.dispatch(t,"linter-ui-default:toggle-panel"):"Toggle Status Bar Scope"===this.statusBarClickBehavior?atom.config.set("linter-ui-default.statusBarRepresents","Entire Project"===this.statusBarRepresents?"Current File":"Entire Project"):atom.commands.dispatch(t,`linter-ui-default:next-${e}${"Current File"===this.statusBarRepresents?"-in-current-file":""}`)}))}update(e=null){e?this.messages=e:e=this.messages;const t={error:0,warning:0,info:0},i=o(),n=i&&i.getPath()||NaN;e.forEach((e=>{"Entire Project"!==this.statusBarRepresents&&s(e)!==n||("error"===e.severity?t.error++:"warning"===e.severity?t.warning++:t.info++)})),this.element.update(t.error,t.warning,t.info)}attach(e){let t=null;this.subscriptions.add(atom.config.observe("linter-ui-default.statusBarPosition",(i=>{t&&t.destroy(),t=e[`add${i}Tile`]({item:this.element.item,priority:"Left"===i?0:1e3})}))),this.subscriptions.add(new je((()=>{t&&t.destroy()})))}dispose(){this.subscriptions.dispose()}}class Ft{constructor(){this.executing=new Set,this.providerTitles=new Set,this.useBusySignal=!0,this.subscriptions=new Re,this.subscriptions.add(atom.config.observe("linter-ui-default.useBusySignal",(e=>{this.useBusySignal=e})))}attach(e){this.provider=e.create(),this.update()}update(){const e=this.provider;if(!e)return;if(!this.useBusySignal)return;const t=new Map,i=new Set;for(const{filePath:e,linter:i}of this.executing){let s=t.get(e);s||t.set(e,s=[]),s.push(i.name)}for(const[s,n]of t){const t=s?" on "+atom.project.relativizePath(s)[1]:"";n.forEach((s=>{const n=`${s}${t}`;i.add(n),this.providerTitles.has(n)||(this.providerTitles.add(n),e.add(n))}))}this.providerTitles.forEach((t=>{i.has(t)||(e.remove(t),this.providerTitles.delete(t))})),t.clear()}getExecuting(e,t){for(const i of this.executing)if(i.linter===e&&i.filePath===t)return i;return null}didBeginLinting(e,t){this.getExecuting(e,t)||(this.executing.add({linter:e,filePath:t}),this.update())}didFinishLinting(e,t){const i=this.getExecuting(e,t);i&&(this.executing.delete(i),this.update())}dispose(){this.provider&&this.provider.clear(),this.providerTitles.clear(),this.executing.clear(),this.subscriptions.dispose()}}class jt{getIntentions({textEditor:e,bufferPosition:t}){let s=[];const n=r(this.messages,e.getPath());for(const r of n){const n=r.solutions,l=Array.isArray(n)&&n.length>0;if(!l&&"function"!=typeof n)continue;const a=i(r);if(!0!==(null==a?void 0:a.containsPoint(t)))continue;const c=r.linterName||"Linter";var o;2===r.version&&l&&(s=s.concat(n.map((t=>({priority:"number"==typeof t.priority?t.priority+200:200,icon:"tools",title:null!==(o=t.title)&&void 0!==o?o:`Fix ${c} issue`,selected(){f(e,t)}})))))}return s}update(e){this.messages=e}constructor(){this.messages=[],this.grammarScopes=["*"]}}var $t,Ht;Ht=e=>{var t=typeof e;return null!=e&&("object"==t||"function"==t)};var _t,qt={},Vt="object"==typeof self&&self&&self.Object===Object&&self,Wt="object"==typeof Ge&&Ge&&Ge.Object===Object&&Ge||Vt||Function("","return this")();_t=()=>qt.Date.now();var Gt,zt,Ut,Kt=/\s/;Ut=e=>{for(var t=e.length;t--&&Kt.test(e.charAt(t)););return t},zt=e=>e?e.slice(0,Ut(e)+1).replace(/^\s+/,""):e;var Yt,Jt,Qt,Xt,Zt=Object.prototype,ei=Zt.hasOwnProperty,ti=Zt.toString,ii=(Yt=(qt=Wt).Symbol)?Yt.toStringTag:void 0;Xt=e=>{var t=ei.call(e,ii),i=e[ii];try{e[ii]=void 0;var s=!0}catch(e){}var n=ti.call(e);return s&&(t?e[ii]=i:delete e[ii]),n};var si,ni={}.toString;si=e=>ni.call(e);var oi,ri=Yt?Yt.toStringTag:void 0;Qt=e=>null==e?void 0===e?"[object Undefined]":"[object Null]":ri&&ri in Object(e)?Xt(e):si(e),oi=e=>null!=e&&"object"==typeof e,Jt=e=>"symbol"==typeof e||oi(e)&&"[object Symbol]"==Qt(e);var li=/^[-+]0x[0-9a-f]+$/i,ai=/^0b[01]+$/i,ci=/^0o[0-7]+$/i,ui=parseInt;Gt=e=>{if("number"==typeof e)return e;if(Jt(e))return NaN;if(Ht(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ht(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=zt(e);var i=ai.test(e);return i||ci.test(e)?ui(e.slice(2),i?2:8):li.test(e)?NaN:+e};var di=Math.max,hi=Math.min;$t=function(e,t,i){function s(t){var i=c,s=u;return c=u=void 0,m=t,h=e.apply(s,i)}function n(e){return m=e,f=setTimeout(r,t),g?s(e):h}function o(e){var i=e-p;return void 0===p||i>=t||0>i||v&&e-m>=d}function r(){var e=_t();if(o(e))return l(e);f=setTimeout(r,(e=>{var i=t-(e-p);return v?hi(i,d-(e-m)):i})(e))}function l(e){return f=void 0,w&&c?s(e):(c=u=void 0,h)}function a(){var e=_t(),i=o(e);if(c=arguments,u=this,p=e,i){if(void 0===f)return n(p);if(v)return clearTimeout(f),f=setTimeout(r,t),s(p)}return void 0===f&&(f=setTimeout(r,t)),h}var c,u,d,h,f,p,m=0,g=!1,v=!1,w=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return t=Gt(t)||0,Ht(i)&&(g=!!i.leading,d=(v="maxWait"in i)?di(Gt(i.maxWait)||0,t):d,w="trailing"in i?!!i.trailing:w),a.cancel=()=>{void 0!==f&&clearTimeout(f),m=0,c=p=u=f=void 0},a.flush=()=>void 0===f?h:l(_t()),a};class fi{constructor(){this.emitter=new Fe,this.expanded=!1,this.subscriptions=new Re,this.subscriptions.add(this.emitter,atom.config.observe("linter-ui-default.showProviderName",(e=>{const t=void 0!==this.showProviderName;this.showProviderName=e,t&&this.emitter.emit("should-update")})),atom.commands.add("atom-workspace",{"linter-ui-default:expand-tooltip":e=>{var t;this.expanded||(this.expanded=!0,this.emitter.emit("should-expand"),!0===(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)&&document.body.addEventListener("keyup",(function e(){document.body.removeEventListener("keyup",e),atom.commands.dispatch(atom.views.getView(atom.workspace),"linter-ui-default:collapse-tooltip")}),{passive:!0}))},"linter-ui-default:collapse-tooltip":()=>{this.expanded=!1,this.emitter.emit("should-collapse")}}))}onShouldUpdate(e){return this.emitter.on("should-update",e)}onShouldExpand(e){return this.emitter.on("should-expand",e)}onShouldCollapse(e){return this.emitter.on("should-collapse",e)}dispose(){this.emitter.dispose()}}const pi=J('<button class="btn fix-btn">Fix</button>',2);Q(["click"]);const mi=J('<div class="linter-message"><div><div class="linter-text"><div class="provider-name"></div></div><div class="linter-buttons-right"></div></div></div>',10),gi=J('<a href="#"><span></span></a>',4),vi=J('<a href="#"><span class="icon linter-icon icon-alignment-aligned-to"></span></a>',4),wi=J('<a href="#"><span class="icon linter-icon icon-link"></span></a>',4),yi=J('<div class="linter-line"></div>',2);let bi;Ke.register("hRY2p",((e,t)=>{e.exports=Promise.resolve(require("./marked.esm.171c7c5e.js")).then((()=>Ke("kt143")))})),Q(["click"]);var ki={};Object.defineProperty(ki,"__esModule",{value:!0}),ki.makeOverlaySelectable=(e,t,i=!0)=>{t.setAttribute("tabindex","-1"),t.style.userSelect&&"none"!==t.style.userSelect||(t.style.userSelect="text"),i&&be(e,t),t.classList.add("native-key-bindings")},ki.overlayFocusFix=be,ki.focusEditor=ke,ki.blurEditor=Pe,ki.makeOverLayCopyable=e=>{e.addEventListener("mouseenter",(()=>{e.addEventListener("keydown",xe)})),e.addEventListener("mouseleave",(()=>{e.removeEventListener("keydown",xe)}))},ki.copyListener=xe;const Pi=J('<div class="linter-messages"></div>',2);class xi{constructor(e,t,i){this.element=document.createElement("div"),this.emitter=new Fe,this.subscriptions=new Re,this.messages=e,this.marker=i.markBufferRange([t,t]),this.marker.onDidDestroy((()=>this.emitter.emit("did-destroy")));const s=new fi;ki.makeOverlaySelectable(i,this.element),this.element.id="linter-tooltip",i.decorateMarker(this.marker,{type:"overlay",item:this.element}),this.subscriptions.add(this.emitter,s),Y((()=>{return t=e,i=s,(()=>{const e=Pi.cloneNode(!0);return ee(e,G(z,{each:t,children(e){if(2===e.version)return G(we,{get key(){return e.key},delegate:i,message:e})}})),e})();var t,i}),this.element),setTimeout((()=>{const e=this.element.getBoundingClientRect().height,s=i.getLineHeightInPixels();if((t.row-i.getFirstVisibleScreenRow())*s>e){const t=this.element.parentElement;t&&(t.style.transform=`translateY(-${2+s+e}px)`)}else{const e=i.getElement().querySelector(".datatip-overlay");if(e){const t=this.element.parentElement;t&&(t.style.transform=`translateY(${e.clientHeight}px)`)}}this.element.style.visibility="visible"}),50)}isValid(e,t){if(1!==this.messages.length||!t.has(this.messages[0].key))return!1;const s=i(this.messages[0]);return!(!s||!s.containsPoint(e))}onDidDestroy(e){return this.emitter.on("did-destroy",e)}dispose(){this.emitter.emit("did-destroy"),this.subscriptions.dispose()}}class Ci{constructor(e){this.gutter=null,this.tooltip=null,this.emitter=new Fe,this.markers=new Map,this.messages=new Map,this.showTooltip=!0,this.subscriptions=new Re,this.cursorPosition=null,this.tooltipFollows="Both",this.showProviderName=!0,this.ignoreTooltipInvocation=!1,this.currentLineMarker=null,this.lastCursorPositions=new WeakMap,this.textEditor=e;let t=null;this.subscriptions.add(this.emitter,e.onDidDestroy((()=>{this.dispose()})),new je((()=>{null==t||t.dispose()})),atom.config.observe("linter-ui-default.showProviderName",(e=>{this.showProviderName=e})),atom.config.observe("linter-ui-default.showDecorations",(e=>{const t=void 0!==this.showDecorations;this.showDecorations=e,t&&this.updateGutter()})),atom.config.observe("linter-ui-default.gutterPosition",(e=>{const t=void 0!==this.gutterPosition;this.gutterPosition=e,t&&this.updateGutter()})),atom.config.observe("linter-ui-default.showTooltip",(e=>{this.showTooltip=e,!this.showTooltip&&this.tooltip&&this.removeTooltip()})),atom.config.observe("linter-ui-default.tooltipFollows",(e=>{this.tooltipFollows=e,t&&t.dispose(),t=new Re,"Mouse"!==e&&"Both"!==e||t.add(this.listenForMouseMovement()),"Keyboard"!==e&&"Both"!==e||t.add(this.listenForKeyboardMovement()),this.removeTooltip()})),e.onDidChangeCursorPosition((({cursor:e,newBufferPosition:t})=>{const i=this.lastCursorPositions.get(e);i&&i.isEqual(t)||(this.lastCursorPositions.set(e,t),this.ignoreTooltipInvocation=!1),"Mouse"===this.tooltipFollows&&this.removeTooltip()})),e.getBuffer().onDidChangeText((()=>{e.getCursors().forEach((e=>{this.lastCursorPositions.set(e,e.getBufferPosition())})),"Mouse"!==this.tooltipFollows&&(this.ignoreTooltipInvocation=!0,this.removeTooltip())}))),this.updateGutter(),this.listenForCurrentLine()}listenForCurrentLine(){this.subscriptions.add(this.textEditor.observeCursors((e=>{const t=({start:e,end:t})=>{const i=this.gutter;if(!i||this.subscriptions.disposed)return;const s=$e.fromObject([e,t]),n=$e.fromObject([[e.row,0],[t.row,1/0]]),o=s.isEmpty();if(e.row!==t.row&&0===s.end.column&&n.end.row--,this.lastRange&&this.lastRange.isEqual(n)&&o===this.lastIsEmpty)return;this.currentLineMarker&&(this.currentLineMarker.destroy(),this.currentLineMarker=null),this.lastRange=n,this.lastIsEmpty=o,this.currentLineMarker=this.textEditor.markScreenRange(n,{invalidate:"never"});const r=document.createElement("span");r.className="line-number cursor-line linter-cursor-line "+(o?"cursor-line-no-selection":""),i.decorateMarker(this.currentLineMarker,{item:r,class:"linter-row"})},i=e.getMarker(),s=new Re;s.add(i.onDidChange((({newHeadScreenPosition:e,newTailScreenPosition:i})=>{t({start:e,end:i})}))),s.add(e.onDidDestroy((()=>{this.subscriptions.remove(s),s.dispose()}))),s.add(new je((()=>{this.currentLineMarker&&(this.currentLineMarker.destroy(),this.currentLineMarker=null)}))),this.subscriptions.add(s),t(i.getScreenRange())})))}listenForMouseMovement(){const e=atom.views.getView(this.textEditor);return qe(e,"mousemove",t($t)((t=>{if(!e.getComponent()||this.subscriptions.disposed||!((e,t)=>{let i=e;do{if(i.matches("div.scroll-view"))return!0;i=i.parentElement}while(i&&"HTML"!==i.nodeName);return!1})(t.target))return;const i=this.tooltip;i&&(({event:e,editor:t,editorElement:i,tooltipElement:s,screenPosition:n})=>{const o=i.getComponent().pixelPositionForMouseEvent(e),r=i.pixelPositionForScreenPosition(n),l=o.top-r.top,a=o.left-r.left,c=t.getLineHeightInPixels();if(l>0){if(l>s.offsetHeight+c+1.5*c)return!1}else if(0>l&&-1.5*c>l)return!1;if(a>0){if(a>s.offsetWidth+30)return!1}else if(0>a&&-30>a)return!1;return!0})({event:t,editor:this.textEditor,editorElement:e,tooltipElement:i.element,screenPosition:i.marker.getStartScreenPosition()})||(this.cursorPosition=((e,t,i)=>{const s=i.getComponent().pixelPositionForMouseEvent(e),n=i.getComponent().screenPositionForPixelPosition(s);if(Number.isNaN(n.row)||Number.isNaN(n.column))return null;const o=i.pixelPositionForScreenPosition(n),r=s.top-o.top,l=s.left-o.left;return(0===r||r>0&&20>r||0>r&&r>-20)&&(0===l||l>0&&20>l||0>l&&l>-20)?t.bufferPositionForScreenPosition(n):null})(t,this.textEditor,e),this.ignoreTooltipInvocation=!1,this.cursorPosition?this.updateTooltip(this.cursorPosition):this.removeTooltip())}),100),{passive:!0})}listenForKeyboardMovement(){return this.textEditor.onDidChangeCursorPosition(t($t)((({newBufferPosition:e})=>{this.cursorPosition=e,this.updateTooltip(e)}),16))}updateGutter(){this.removeGutter(),this.showDecorations?(this.gutter=this.textEditor.addGutter({name:"linter-ui-default",priority:"Left"===this.gutterPosition?-100:100}),this.markers.forEach(((e,t)=>{const i=this.messages.get(t);if(i)for(const t of e)this.decorateMarker(i,t,"gutter")}))):this.gutter=null}removeGutter(){if(this.gutter)try{this.gutter.destroy()}catch(e){}}updateTooltip(e){if(!e||this.tooltip&&this.tooltip.isValid(e,this.messages))return;if(this.removeTooltip(),!this.showTooltip)return;if(this.ignoreTooltipInvocation)return;const t=l(this.messages,this.textEditor.getPath(),e);if(!t.length)return;this.tooltip=new xi(t,e,this.textEditor);const i=this.tooltip.marker;t.forEach((e=>{this.saveMarker(e.key,i)})),this.tooltip.onDidDestroy((()=>{this.tooltip=null}))}removeTooltip(){this.tooltip&&this.tooltip.marker.destroy()}applyChanges(e,t){const s=this.textEditor.getBuffer();for(let e=0,i=t.length;i>e;e++)this.destroyMarker(t[e].key);for(let t=0,n=e.length;n>t;t++){const n=e[t],o=i(n);if(!o)continue;const r=s.markRange(o,{invalidate:"never"});this.decorateMarker(n,r),r.onDidChange((({oldHeadPosition:e,newHeadPosition:t,isValid:i})=>{!i||0===t.row&&0!==e.row||2===n.version&&(n.location.position=r.previousEventState.range)}))}this.updateTooltip(this.cursorPosition)}decorateMarker(e,t,i="both"){this.saveMarker(e.key,t),this.messages.set(e.key,e),"both"!==i&&"editor"!==i||this.textEditor.decorateMarker(t,{type:"text",class:"linter-highlight linter-"+e.severity});const s=this.gutter;if(s&&("both"===i||"gutter"===i)){const i=document.createElement("span");i.className=`linter-gutter linter-gutter-${e.severity} icon icon-${e.icon||"primitive-dot"}`,s.decorateMarker(t,{class:"linter-row",item:i})}}saveMarker(e,t){const i=this.markers.get(e)||[];i.push(t),this.markers.set(e,i)}destroyMarker(e){const t=this.markers.get(e);t&&t.forEach((e=>{e&&e.destroy()})),this.markers.delete(e),this.messages.delete(e)}onDidDestroy(e){return this.emitter.on("did-destroy",e)}dispose(){this.emitter.emit("did-destroy"),this.subscriptions.dispose(),this.removeGutter(),this.removeTooltip()}}var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.lineLengthIfLong=Ei.lineCountIfLarge=Ei.largeness=void 0,Ei.largeness=(e,t=atom.config.get("atom-ide-base.largeLineCount")||4e3,i=atom.config.get("atom-ide-base.longLineLength")||4e3)=>{const s=Ce(e,t);if(0!==s)return s;const n=Ee(e,i);return 0!==n?n:0},Ei.lineCountIfLarge=Ce,Ei.lineLengthIfLong=Ee;class Si{constructor(){this.editors=new Set,this.messages=[],this.firstRender=!0,this.subscriptions=new Re;const e=atom.config.get("linter-ui-default.largeFileLineCount"),t=atom.config.get("linter-ui-default.longLineLength");this.subscriptions.add(atom.workspace.observeTextEditors((i=>{if(Ei.largeness(i,e,t)){const e=atom.notifications.addWarning("Linter: Large/Minified file detected",{detail:"Adding inline linter markers are skipped for this file for performance reasons (linter pane is still active)",dismissable:!0,buttons:[{text:"Force enable",onDidClick:()=>{this.getEditor(i),e.dismiss()}},{text:"Change threshold",async onDidClick(){await atom.workspace.open("atom://config/packages/linter-ui-default"),document.querySelectorAll(".control-group")[16].scrollIntoView(),e.dismiss()}}]});setTimeout((()=>{e.dismiss()}),5e3)}else this.getEditor(i)})),atom.workspace.getCenter().observeActivePaneItem((e=>{this.editors.forEach((t=>{t.textEditor!==e&&t.removeTooltip()}))})))}isFirstRender(){return this.firstRender}update({messages:e,added:t,removed:i}){this.messages=e,this.firstRender=!1;const{editorsMap:n,filePaths:o}=(e=>{const t=new Map,i=[];for(const n of e.editors){var s;const e=null!==(s=n.textEditor.getPath())&&void 0!==s?s:"";t.has(e)?t.get(e).editors.push(n):(t.set(e,{added:[],removed:[],editors:[n]}),i.push(e))}return{editorsMap:t,filePaths:i}})(this);t.forEach((e=>{if(!e||!e.location)return;const t=s(e);t&&n.has(t)&&n.get(t).added.push(e)})),i.forEach((e=>{if(!e||!e.location)return;const t=s(e);t&&n.has(t)&&n.get(t).removed.push(e)})),o.forEach((e=>{if(n.has(e)){const{added:t,removed:i,editors:s}=n.get(e);(t.length||i.length)&&s.forEach((e=>e.applyChanges(t,i)))}}))}getEditor(e){for(const t of this.editors)if(t.textEditor===e)return t;const t=new Ci(e);return this.editors.add(t),t.onDidDestroy((()=>{this.editors.delete(t)})),t.subscriptions.add(e.onDidChangePath((()=>{t.dispose(),this.getEditor(e)}))),t.subscriptions.add(e.onDidChangeGrammar((()=>{t.dispose(),this.getEditor(e)}))),t.applyChanges(r(this.messages,e.getPath()),[]),t}dispose(){for(const e of this.editors)e.dispose();this.subscriptions.dispose()}}class Li{constructor(){this.messages=[],this.decorations={},this.subscriptions=new Re,this.subscriptions.add(atom.config.observe("linter-ui-default.decorateOnTreeView",(e=>{if(void 0===this.decorateOnTreeView)this.decorateOnTreeView=e;else if("None"===e)this.update([]),this.decorateOnTreeView=e;else{const t=this.messages;this.decorateOnTreeView=e,this.update(t)}}))),setTimeout((()=>{const e=Li.getElement();e&&this.subscriptions.add(qe(e,"click",t($t)((()=>{this.update()})),{passive:!0}))}),100)}update(e=null){Array.isArray(e)&&(this.messages=e);const t=this.messages,i=Li.getElement(),n=this.decorateOnTreeView;i&&"None"!==n&&this.applyDecorations(((e,t)=>{const i={},n=atom.project.getPaths();return t.forEach((t=>{const o=s(t);o&&("Files"===e?[o]:((e,t)=>{const i=t.find((t=>e.startsWith(t)));return i?((e,t)=>{const i=[],s=e.split(We.sep);for(;s.length;){const e=s.join(We.sep);if(e&&(i.push(e),e===t))break;s.pop()}return i})(e,i):[e]})(o,n)).forEach((e=>((e,t,i)=>{e[t]||(e[t]={info:!1,error:!1,warning:!1}),e[t][i]=!0})(i,e,t.severity)))})),i})(n,t))}applyDecorations(e){const t=Li.getElement();if(!t)return;const i=new Map,s={},n=Object.keys(this.decorations);for(const s of n)if(!(s in e)){const e=p(i,s,(()=>Li.getElementByPath(t,s)));null!==e&&Le(e)}const o=Object.keys(e);for(const n of o){const o=p(i,n,(()=>Li.getElementByPath(t,n)));null!==o&&(Se(o,e[n],!!this.decorations[n]),s[n]=e[n])}this.decorations=s}dispose(){this.subscriptions.dispose()}static getElement(){return document.querySelector(".tree-view")}static getElementByPath(e,t){return e.querySelector(`[data-path=${CSS.escape(t)}]`)}}class Ti{constructor(){this.name="Linter",this.signal=new Ft,this.commands=new Bt,this.messages=[],this.statusBar=new Rt,this.intentions=new jt,this.subscriptions=new Re,this.idleCallbacks=new Set,this.subscriptions.add(this.signal,this.commands,this.statusBar);const e=window.requestIdleCallback((()=>{this.idleCallbacks.delete(e),this.panel=new It,this.panel.update(this.messages)}));this.idleCallbacks.add(e);const t=window.requestIdleCallback((()=>{this.idleCallbacks.delete(t),this.subscriptions.add(atom.config.observe("linter-ui-default.showDecorations",(e=>{e&&!this.editors?(this.editors=new Si,this.editors.update({added:this.messages,removed:[],messages:this.messages})):!e&&this.editors&&(this.editors.dispose(),this.editors=null)})))}));this.idleCallbacks.add(t)}render(e){const t=this.editors;this.messages=e.messages,t&&(t.isFirstRender()?t.update({added:e.messages,removed:[],messages:e.messages}):t.update(e)),this.treeview||(this.treeview=new Li,this.subscriptions.add(this.treeview)),this.treeview.update(e.messages),this.panel&&this.panel.update(e.messages),this.commands.update(e.messages),this.intentions.update(e.messages),this.statusBar.update(e.messages)}didBeginLinting(e,t){this.signal.didBeginLinting(e,t)}didFinishLinting(e,t){this.signal.didFinishLinting(e,t)}dispose(){this.idleCallbacks.forEach((e=>window.cancelIdleCallback(e))),this.idleCallbacks.clear(),this.subscriptions.dispose(),this.panel&&this.panel.dispose(),this.editors&&this.editors.dispose()}}const Mi=new Set,Ai=new Set;let Ni,Di;
//# sourceMappingURL=index.js.map
