"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _globalThis = function (Object) {function get() {var _global = this || self;delete Object.prototype.__magic__;return _global;}if (typeof globalThis === "object") {return globalThis;}if (this) {return get();} else {Object.defineProperty(Object.prototype, "__magic__", { configurable: true, get: get });var _global = __magic__;return _global;}}(Object);function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);if (enumerableOnly) symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;});keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i] != null ? arguments[i] : {};if (i % 2) {ownKeys(Object(source), true).forEach(function (key) {(0, _defineProperty2["default"])(target, key, source[key]);});} else if (Object.getOwnPropertyDescriptors) {Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));} else {ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}}return target;}function _createForOfIteratorHelper(o, allowArrayLike) {var it;if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) {if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {if (it) o = it;var i = 0;var F = function F() {};return { s: F, n: function n() {if (i >= o.length) return { done: true };return { done: false, value: o[i++] };}, e: function e(_e29) {throw _e29;}, f: F };}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion = true,didErr = false,err;return { s: function s() {it = o[Symbol.iterator]();}, n: function n() {var step = it.next();normalCompletion = step.done;return step;}, e: function e(_e30) {didErr = true;err = _e30;}, f: function f() {try {if (!normalCompletion && it["return"] != null) it["return"]();} finally {if (didErr) throw err;}} };}function _unsupportedIterableToArray(o, minLen) {if (!o) return;if (typeof o === "string") return _arrayLikeToArray(o, minLen);var n = Object.prototype.toString.call(o).slice(8, -1);if (n === "Object" && o.constructor) n = o.constructor.name;if (n === "Map" || n === "Set") return Array.from(o);if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);}function _arrayLikeToArray(arr, len) {if (len == null || len > arr.length) len = arr.length;for (var i = 0, arr2 = new Array(len); i < len; i++) {arr2[i] = arr[i];}return arr2;}var e,t = "undefined" != typeof _globalThis ? _globalThis : "undefined" != typeof self ? self : "undefined" != typeof window ? window : "undefined" != typeof global ? global : {},i = require("atom-package-deps").install,n = require("path"),s = require("url"),r = require("disposable-event"),o = require("assert"),a = require("electron").shell,l = require("atom"),u = l.CompositeDisposable,c = l.Emitter,d = l.Disposable,f = l.Range;var h = e = function e(_e2) {return _e2 && _e2.__esModule ? _e2 : { "default": _e2 };};Object.defineProperty(exports, "__esModule", { value: !0 });var p = function p() {atom.config.get("linter-ui-default.useBusySignal") && atom.packages.getLoadedPackage("linter-ui-default").metadata["package-deps"].push("busy-signal");var e = window.requestIdleCallback(function () {Ls["delete"](e), atom.inSpecMode() || i("linter-ui-default");});Ls.add(e);};exports.activate = p;var g = function g() {Ls.forEach(function (e) {return window.cancelIdleCallback(e);}), Ls.clear();var _iterator = _createForOfIteratorHelper(As),_step;try {for (_iterator.s(); !(_step = _iterator.n()).done;) {var _e3 = _step.value;_e3.dispose();}} catch (err) {_iterator.e(err);} finally {_iterator.f();}As.clear();};exports.deactivate = g;var m = function m() {var e = new Ts["default"]();As.add(e), _s && e.signal.attach(_s);return e;};exports.provideUI = m;var v = function v() {return Array.from(As).map(function (e) {return e.intentions;});};exports.provideIntentions = v;var y = function y(e) {_s = e, As.forEach(function (e) {e.signal.attach(_s);});};exports.consumeSignal = y;var w = function w(e) {Ns = e, As.forEach(function (e) {e.statusBar.attach(Ns);});};exports.consumeStatusBar = w;var b = {},P = e;Object.defineProperty(b, "__esModule", { value: !0 });var k = void 0;b["default"] = k;var E = {},x = e;Object.defineProperty(E, "__esModule", { value: !0 });var S = void 0;E["default"] = S;var C = {};Object.defineProperty(C, "__esModule", { value: !0 });var M = void 0;C["default"] = M;var O = {};Object.defineProperty(O, "__esModule", { value: !0 });var T = Q;O.$range = T;var L = X;O.$file = L;var A = function A() {var e = getSelection();e && atom.clipboard.write(e.toString());};O.copySelection = A;var _ = Z;O.getPathOfMessage = _;var N = function N() {var e = atom.workspace.getCenter().getActivePaneItem();var t = null !== e && atom.workspace.isTextEditor(e);!t && e && K && e.getURI && "atom://linter-ui-default" === e.getURI() && (!K.isAlive || K.isAlive()) ? e = K : K = e;return t ? e : null;};O.getActiveTextEditor = N;var D = function D(e) {var t = new Map(),i = [];var _iterator2 = _createForOfIteratorHelper(e.editors),_step2;try {for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {var _s2 = _step2.value;var n;var _e4 = null !== (n = _s2.textEditor.getPath()) && void 0 !== n ? n : "";t.has(_e4) ? t.get(_e4).editors.push(_s2) : (t.set(_e4, { added: [], removed: [], editors: [_s2] }), i.push(_e4));}} catch (err) {_iterator2.e(err);} finally {_iterator2.f();}return { editorsMap: t, filePaths: i };};O.getEditorsMap = D;var j = function j(e, t) {var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;var n = [];return e.forEach(function (e) {e && e.location && (null !== t && X(e) !== t || i && e.severity !== i || n.push(e));}), n;};O.filterMessages = j;var B = function B(e, t, i) {var n = [],s = "Point" === i.constructor.name ? new f(i, i) : f.fromObject(i);return e.forEach(function (e) {var i = X(e),r = Q(e);i && r && i === t && "function" == typeof r.intersectsWith && r.intersectsWith(s) && n.push(e);}), n;};O.filterMessagesByRangeOrPoint = B;var I = ee;O.openFile = I;var $ = function $(e) {var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;var i, n;if (t) {if (!e.reference || !e.reference.file) return void console.warn("[Linter-UI-Default] Message does not have a valid reference. Ignoring");i = e.reference.file, n = e.reference.position;} else {var _t2 = Q(e);i = X(e), _t2 && (n = _t2.start);}i && ee(i, n);};O.visitMessage = $;var F = function F(e) {2 === e.version && e.url && a.openExternal(e.url);};O.openExternally = F;var R = function R(e, t) {var i = t[0],n = "asc" === t[1] ? 1 : -1;return e.sort(function (e, t) {if ("severity" === i) {var _i2 = G[e.severity],_s3 = G[t.severity];if (_i2 !== _s3) return n * (_i2 > _s3 ? 1 : -1);}if ("linterName" === i) {var _i3 = e.severity.localeCompare(t.severity);if (0 !== _i3) return n * _i3;}if ("file" === i) {var _i4 = Z(e),_s4 = _i4.length,_r = Z(t),_o = _r.length;if (_s4 !== _o) return n * (_s4 > _o ? 1 : -1);if (_i4 !== _r) return n * _i4.localeCompare(_r);}if ("line" === i) {var _i5 = Q(e),_s5 = Q(t);if (_i5 && !_s5) return 1;if (_s5 && !_i5) return -1;if (_i5 && _s5) {if (_i5.start.row !== _s5.start.row) return n * (_i5.start.row > _s5.start.row ? 1 : -1);if (_i5.start.column !== _s5.start.column) return n * (_i5.start.column > _s5.start.column ? 1 : -1);}}return 0;});};O.sortMessages = R;var H = function H(e) {return e.sort(function (e, t) {return void 0 === e.priority || void 0 === t.priority ? 0 : t.priority - e.priority;});};O.sortSolutions = H;var W = function W(e, t) {if ("apply" in t) return t.apply(), !0;var i = t.position,n = t.replaceWith;if ("currentText" in t) {var _n2 = t.currentText,_s6 = e.getTextInBufferRange(i);if (_n2 !== _s6) return console.warn("[linter-ui-default] Not applying fix because text did not match the expected one", "expected", _n2, "but got", _s6), !1;}return e.setTextInBufferRange(i, n), !0;};O.applySolution = W;var V = function V(e) {var t = e.getLineCount();if (e.largeFileMode || t >= te) return !0;var i = e.getBuffer();for (var _e5 = 0, _n3 = t; _e5 < _n3; _e5++) {if (i.lineLengthForRow(_e5) > ie) return !0;}return !1;};O.isLargeFile = V;var q = (z = void 0, U = O.severityScore = z, Y = O.severityNames = U, J = O.WORKSPACE_URI = Y, O.DOCK_ALLOWED_LOCATIONS = J);O.DOCK_DEFAULT_LOCATION = q;var K = null;var G = { error: 3, warning: 2, info: 1 };var z = G;O.severityScore = z;var U = { error: "Error", warning: "Warning", info: "Info" };O.severityNames = U;var Y = "atom://linter-ui-default";O.WORKSPACE_URI = Y;var J = ["center", "bottom"];O.DOCK_ALLOWED_LOCATIONS = J;function Q(e) {return e.location.position;}function X(e) {return e.location.file;}function Z(e) {return atom.project.relativizePath(X(e) || "")[1];}function ee(e, t) {var i = { searchAllPanes: !0 };t && (i.initialLine = t.row, i.initialColumn = t.column), atom.workspace.open(e, i);}q = "bottom", O.DOCK_DEFAULT_LOCATION = q;var te = atom.config.get("linter-ui-default.largeFileLineCount"),ie = atom.config.get("linter-ui-default.longLineLength");M = /*#__PURE__*/function () {function M() {var _this = this;(0, _classCallCheck2["default"])(this, M);this.emitter = new c(), this.messages = [], this.filteredMessages = [], this.subscriptions = new u(), this.panelRepresents = void 0;var e = null;this.subscriptions.add(atom.config.observe("linter-ui-default.panelRepresents", function (e) {var t = void 0 !== _this.panelRepresents;_this.panelRepresents = e, t && _this.update();}), atom.workspace.getCenter().observeActivePaneItem(function () {e && (e.dispose(), e = null);var t = (0, O.getActiveTextEditor)();if (t) {"Entire Project" !== _this.panelRepresents && _this.update();var _i6 = -1;e = t.onDidChangeCursorPosition(function (_ref) {var e = _ref.newBufferPosition;_i6 !== e.row && "Current Line" === _this.panelRepresents && (_i6 = e.row, _this.update());});}("Entire Project" !== _this.panelRepresents || t) && _this.update();}), new d(function () {e && e.dispose();}));}(0, _createClass2["default"])(M, [{ key: "getFilteredMessages", value: function getFilteredMessages() {var e = [];if ("Entire Project" === this.panelRepresents) e = this.messages;else if ("Current File" === this.panelRepresents) {var _t3 = (0, O.getActiveTextEditor)();if (!_t3) return [];e = (0, O.filterMessages)(this.messages, _t3.getPath());} else if ("Current Line" === this.panelRepresents) {var _t4 = (0, O.getActiveTextEditor)();if (!_t4) return [];var _i7 = _t4.getCursors()[0].getBufferRow();e = (0, O.filterMessagesByRangeOrPoint)(this.messages, _t4.getPath(), f.fromObject([[_i7, 0], [_i7, 1 / 0]]));}return e;} }, { key: "update", value: function update() {var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;Array.isArray(e) && (this.messages = e), this.filteredMessages = this.getFilteredMessages(), this.emitter.emit("observe-messages", this.filteredMessages);} }, { key: "onDidChangeMessages", value: function onDidChangeMessages(e) {return this.emitter.on("observe-messages", e);} }, { key: "dispose", value: function dispose() {this.subscriptions.dispose();} }]);return M;}(), C["default"] = M;var ne = x(C = C["default"]),se = {};Object.defineProperty(se, "__esModule", { value: !0 });var re = void 0;se["default"] = re;var oe = {};function ae(e) {oe.context = e;}var le = function le(e, t) {return e === t;};var ue = null,ce = He;var de = {},fe = { owned: null, cleanups: null, context: null, owner: null },_xe = xe(!1),_xe2 = (0, _slicedToArray2["default"])(_xe, 2),he = _xe2[0],pe = _xe2[1];var ge = null,me = null;var ve,ye = null,we = null,be = null,Pe = null,ke = 0;function Ee(e, t) {t && (ge = t);var i = me,n = ge,s = 0 === e.length ? fe : { owned: null, cleanups: null, context: null, owner: n, attached: !!t };var r;ge = s, me = null;try {Re(function () {return r = e(function () {return Ke(s);});}, !0);} finally {me = i, ge = n;}return r;}function xe(e) {var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;var i = arguments.length > 2 ? arguments[2] : undefined;var n = { value: e, observers: null, observerSlots: null, pending: de, comparator: t ? "function" == typeof t ? t : le : void 0 };return [De.bind(n), je.bind(n)];}function Se(e, t) {Be($e(e, t, !0));}function Ce(e, t) {Be($e(e, t, !1));}function Me(e, t) {var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;var n = $e(e, t, !0);return n.pending = de, n.observers = null, n.observerSlots = null, n.state = 0, n.comparator = i ? "function" == typeof i ? i : le : void 0, Be(n), De.bind(n);}function Oe(e) {if (ye) return e();var t = ye = [],i = e();return ye = null, Re(function () {for (var _e6 = 0; _e6 < t.length; _e6 += 1) {var _i8 = t[_e6];if (_i8.pending !== de) {var _e7 = _i8.pending;_i8.pending = de, je.call(_i8, _e7);}}}, !1), i;}function Te(e) {var t,i = me;return me = null, t = e(), me = i, t;}function Le(e) {!function (e, t) {ce = We;var i = $e(e, t, !1),n = ve && Ue(ge, ve.id);n && (i.suspense = n), i.user = !0, be && be.push(i);}(function () {return Te(e);});}function Ae(e) {return null === ge || (null === ge.cleanups ? ge.cleanups = [e] : ge.cleanups.push(e)), e;}function _e(e) {var t = Symbol("context");return { id: t, Provider: Je(t), defaultValue: e };}function Ne(e) {var t = Me(e);return Me(function () {return Ye(t());});}function De() {if (this.state && this.sources) {var _e8 = we;we = null, 1 === this.state ? Be(this) : Ve(this), we = _e8;}if (me) {var _e9 = this.observers ? this.observers.length : 0;me.sources ? (me.sources.push(this), me.sourceSlots.push(_e9)) : (me.sources = [this], me.sourceSlots = [_e9]), this.observers ? (this.observers.push(me), this.observerSlots.push(me.sources.length - 1)) : (this.observers = [me], this.observerSlots = [me.sources.length - 1]);}return Pe && Pe.running && Pe.sources.has(this) ? this.tValue : this.value;}function je(e, t) {var _this2 = this;if (this.comparator) if (Pe && Pe.running && Pe.sources.has(this)) {if (this.comparator(this.tValue, e)) return e;} else if (this.comparator(this.value, e)) return e;return ye ? (this.pending === de && ye.push(this), this.pending = e, e) : (Pe ? ((Pe.running || !t && Pe.sources.has(this)) && (Pe.sources.add(this), this.tValue = e), Pe.running || (this.value = e)) : this.value = e, !this.observers || we && !this.observers.length || Re(function () {for (var _e10 = 0; _e10 < _this2.observers.length; _e10 += 1) {var _t5 = _this2.observers[_e10];Pe && Pe.running && Pe.disposed.has(_t5) || (_t5.observers && 2 !== _t5.state && qe(_t5), _t5.state = 1, _t5.pure ? we.push(_t5) : be.push(_t5));}if (we.length > 1e6) throw we = [], new Error("Potential Infinite Loop Detected.");}, !1), e);}function Be(e) {if (!e.fn) return;Ke(e);var t = ge,i = me,n = ke;me = ge = e, Ie(e, e.value, n), Pe && !Pe.running && Pe.sources.has(e) && (Pe.running = !0, Ie(e, e.tValue, n), Pe.running = !1), me = i, ge = t;}function Ie(e, t, i) {var n;try {n = e.fn(t);} catch (e) {ze(e);}(!e.updatedAt || e.updatedAt <= i) && (e.observers && e.observers.length ? je.call(e, n, !0) : Pe && Pe.running && e.pure ? (Pe.sources.add(e), e.tValue = n) : e.value = n, e.updatedAt = i);}function $e(e, t, i) {var n = { fn: e, state: 1, updatedAt: null, owned: null, sources: null, sourceSlots: null, cleanups: null, value: t, owner: ge, context: null, pure: i };return null === ge || ge !== fe && (Pe && Pe.running && ge.pure ? ge.tOwned ? ge.tOwned.push(n) : ge.tOwned = [n] : ge.owned ? ge.owned.push(n) : ge.owned = [n]), n;}function Fe(e) {var t,i = 1 === e.state && e;if (e.suspense && Te(e.suspense.inFallback)) return e.suspense.effects.push(e);var n = Pe && Pe.running;for (; (e.fn || n && e.attached) && (e = e.owner);) {if (n && Pe.disposed.has(e)) return;2 === e.state ? t = e : 1 === e.state && (i = e, t = void 0);}if (t) {var _s7 = we;if (we = null, Ve(t), we = _s7, !i || 1 !== i.state) return;if (n) for (e = i; (e.fn || e.attached) && (e = e.owner);) {if (Pe.disposed.has(e)) return;}}i && Be(i);}function Re(e, t) {if (we) return e();var i = !1;t || (we = []), be ? i = !0 : be = [], ke++;try {e();} catch (e) {ze(e);} finally {!function (e) {we && (He(we), we = null);if (e) return;var t;if (Pe && Pe.running) {if (Pe.promises.size) return Pe.running = !1, Pe.effects.push.apply(Pe.effects, be), be = null, void pe(!0);var _e11 = Pe.sources;t = Pe.cb, Pe = null, Oe(function () {_e11.forEach(function (e) {if (e.value = e.tValue, e.owned) for (var _t6 = 0, _i9 = e.owned.length; _t6 < _i9; _t6++) {Ke(e.owned[_t6]);}e.tOwned && (e.owned = e.tOwned), delete e.tValue, delete e.tOwned;}), pe(!1);});}be.length ? Oe(function () {ce(be), be = null;}) : be = null;t && t.forEach(function (e) {return e();});}(i);}}function He(e) {for (var _t7 = 0; _t7 < e.length; _t7++) {Fe(e[_t7]);}}function We(e) {var t,i = 0;for (t = 0; t < e.length; t++) {var _n4 = e[t];_n4.user ? e[i++] = _n4 : Fe(_n4);}var n = e.length;for (t = 0; t < i; t++) {Fe(e[t]);}for (t = n; t < e.length; t++) {Fe(e[t]);}}function Ve(e) {e.state = 0;for (var _t8 = 0; _t8 < e.sources.length; _t8 += 1) {var _i10 = e.sources[_t8];_i10.sources && (1 === _i10.state ? Fe(_i10) : 2 === _i10.state && Ve(_i10));}}function qe(e) {for (var _t9 = 0; _t9 < e.observers.length; _t9 += 1) {var _i11 = e.observers[_t9];_i11.state || (_i11.state = 2, _i11.observers && qe(_i11));}}function Ke(e) {var t;if (e.sources) for (; e.sources.length;) {var _t10 = e.sources.pop(),_i12 = e.sourceSlots.pop(),_n5 = _t10.observers;if (_n5 && _n5.length) {var _e12 = _n5.pop(),_s8 = _t10.observerSlots.pop();_i12 < _n5.length && (_e12.sourceSlots[_s8] = _i12, _n5[_i12] = _e12, _t10.observerSlots[_i12] = _s8);}}if (Pe && Pe.running && e.pure) {if (e.tOwned) {for (t = 0; t < e.tOwned.length; t++) {Ke(e.tOwned[t]);}delete e.tOwned;}Ge(e, !0);} else if (e.owned) {for (t = 0; t < e.owned.length; t++) {Ke(e.owned[t]);}e.owned = null;}if (e.cleanups) {for (t = 0; t < e.cleanups.length; t++) {e.cleanups[t]();}e.cleanups = null;}e.state = 0, e.context = null;}function Ge(e, t) {if (t || (e.state = 0, Pe.disposed.add(e)), e.owned) for (var _t11 = 0; _t11 < e.owned.length; _t11++) {Ge(e.owned[_t11]);}}function ze(e) {var t = ue && Ue(ge, ue);if (!t) throw e;t.forEach(function (t) {return t(e);});}function Ue(e, t) {return e && (e.context && e.context[t] || e.owner && Ue(e.owner, t));}function Ye(e) {if ("function" == typeof e && !e.length) return Ye(e());if (Array.isArray(e)) {var _t12 = [];for (var _i13 = 0; _i13 < e.length; _i13++) {var _n6 = Ye(e[_i13]);Array.isArray(_n6) ? _t12.push.apply(_t12, _n6) : _t12.push(_n6);}return _t12;}return e;}function Je(e) {return function (t) {return Me(function () {return ge.context = (0, _defineProperty2["default"])({}, e, t.value), Ne(function () {return t.children;});});};}var Qe = Symbol("state-raw"),Xe = Symbol("state-node"),Ze = Symbol("state-proxy"),et = Symbol("state-name");function tt(e, t) {var i = e[Ze];if (!i) {Object.defineProperty(e, Ze, { value: i = new Proxy(e, at) });var _t13 = Object.keys(e),_n7 = Object.getOwnPropertyDescriptors(e);for (var _s9 = 0, _r2 = _t13.length; _s9 < _r2; _s9++) {var _r3 = _t13[_s9];if (_n7[_r3].get) {var _t14 = _n7[_r3].get.bind(i);Object.defineProperty(e, _r3, { get: _t14 });}}}return i;}function it(e) {return null != e && "object" == (0, _typeof2["default"])(e) && (!e.__proto__ || e.__proto__ === Object.prototype || Array.isArray(e));}function nt(e) {var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();var i, n, s, r;if (i = null != e && e[Qe]) return i;if (!it(e) || t.has(e)) return e;if (Array.isArray(e)) {Object.isFrozen(e) ? e = e.slice(0) : t.add(e);for (var _i14 = 0, _r4 = e.length; _i14 < _r4; _i14++) {s = e[_i14], (n = nt(s, t)) !== s && (e[_i14] = n);}} else {Object.isFrozen(e) ? e = Object.assign({}, e) : t.add(e);var _i15 = Object.keys(e),_o2 = Object.getOwnPropertyDescriptors(e);for (var _a = 0, _l = _i15.length; _a < _l; _a++) {r = _i15[_a], _o2[r].get || (s = e[r], (n = nt(s, t)) !== s && (e[r] = n));}}return e;}function st(e) {var t = e[Xe];return t || Object.defineProperty(e, Xe, { value: t = {} }), t;}function rt(e, t) {var i = Reflect.getOwnPropertyDescriptor(e, t);return !i || i.get || t === Ze || t === Xe || t === et || (delete i.value, delete i.writable, i.get = function () {return e[Ze][t];}), i;}function ot() {var _xe3 = xe(void 0, !1),_xe4 = (0, _slicedToArray2["default"])(_xe3, 2),e = _xe4[0],t = _xe4[1];return e.set = t, e;}var at = { get: function get(e, t, i) {if (t === Qe) return e;if (t === Ze) return i;var n = e[t];if (t === Xe || "__proto__" === t) return n;var s = it(n);if (me && ("function" != typeof n || e.hasOwnProperty(t))) {var _i16, _r5;s && (_i16 = st(n)) && (_r5 = _i16._ || (_i16._ = ot()), _r5()), _i16 = st(e), _r5 = _i16[t] || (_i16[t] = ot()), _r5();}return s ? tt(n) : n;}, set: function set() {return !0;}, deleteProperty: function deleteProperty() {return !0;}, getOwnPropertyDescriptor: rt };function lt(e, t, i) {if (e[t] === i) return;var n = Array.isArray(e),s = e.length,r = n || !(t in e);void 0 === i ? delete e[t] : e[t] = i;var o,a = st(e);(o = a[t]) && o.set(), n && e.length !== s && (o = a.length) && o.set(), r && (o = a._) && o.set();}function ut(e, t) {var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];var n,s = e;if (t.length > 1) {n = t.shift();var _r6 = (0, _typeof2["default"])(n),_o3 = Array.isArray(e);if (Array.isArray(n)) {for (var _s10 = 0; _s10 < n.length; _s10++) {ut(e, [n[_s10]].concat(t), [n[_s10]].concat(i));}return;}if (_o3 && "function" === _r6) {for (var _s11 = 0; _s11 < e.length; _s11++) {n(e[_s11], _s11) && ut(e, [_s11].concat(t), [_s11].concat(i));}return;}if (_o3 && "object" === _r6) {var _n8 = n,_n8$from = _n8.from,_s12 = _n8$from === void 0 ? 0 : _n8$from,_n8$to = _n8.to,_r7 = _n8$to === void 0 ? e.length - 1 : _n8$to,_n8$by = _n8.by,_o4 = _n8$by === void 0 ? 1 : _n8$by;for (var _n9 = _s12; _n9 <= _r7; _n9 += _o4) {ut(e, [_n9].concat(t), [_n9].concat(i));}return;}if (t.length > 1) return void ut(e[n], t, [n].concat(i));s = e[n], i = [n].concat(i);}var r = t[0];"function" == typeof r && (r = r(s, i), r === s) || void 0 === n && null == r || (r = nt(r), void 0 === n || it(s) && it(r) && !Array.isArray(r) ? function (e, t) {var i = Object.keys(t);for (var _n10 = 0; _n10 < i.length; _n10 += 1) {var _s13 = i[_n10];lt(e, _s13, t[_s13]);}}(s, r) : lt(e, n, r));}function ct(e, t) {var i = nt(e || {});return [tt(i), function () {for (var _len = arguments.length, e = new Array(_len), _key = 0; _key < _len; _key++) {e[_key] = arguments[_key];}Oe(function () {return ut(i, e);});}];}var dt = Symbol("fallback");function ft(e, t) {if (oe.context) {var _i17 = oe.context;ae(_objectSpread(_objectSpread({}, oe.context), {}, { id: "".concat(oe.context.id).concat(oe.context.count++, "."), count: 0 }));var _n11 = Te(function () {return e(t);});return ae(_i17), _n11;}return Te(function () {return e(t);});}function ht(e) {var t = "fallback" in e && { fallback: function fallback() {return e.fallback;} };return Me(function (e, t) {var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};var n = [],s = [],r = [],o = 0,a = t.length > 1 ? [] : null,l = ge;return Ae(function () {for (var _e13 = 0, _t15 = r.length; _e13 < _t15; _e13++) {r[_e13]();}}), function () {var u,c,d = e() || [];return Te(function () {var e,t,h,p,g,m,v,y,w,b = d.length;if (0 === b) {if (0 !== o) {for (u = 0; u < o; u++) {r[u]();}r = [], n = [], s = [], o = 0, a && (a = []);}i.fallback && (n = [dt], s[0] = Ee(function (e) {return r[0] = e, i.fallback();}, l), o = 1);} else if (0 === o) {for (c = 0; c < b; c++) {n[c] = d[c], s[c] = Ee(f, l);}o = b;} else {for (h = new Array(b), p = new Array(b), a && (g = new Array(b)), m = 0, v = Math.min(o, b); m < v && n[m] === d[m]; m++) {;}for (v = o - 1, y = b - 1; v >= m && y >= m && n[v] === d[y]; v--, y--) {h[y] = s[v], p[y] = r[v], a && (g[y] = a[v]);}for (e = new Map(), t = new Array(y + 1), c = y; c >= m; c--) {w = d[c], u = e.get(w), t[c] = void 0 === u ? -1 : u, e.set(w, c);}for (u = m; u <= v; u++) {w = n[u], c = e.get(w), void 0 !== c && -1 !== c ? (h[c] = s[u], p[c] = r[u], a && (g[c] = a[u]), c = t[c], e.set(w, c)) : r[u]();}for (c = m; c < b; c++) {c in h ? (s[c] = h[c], r[c] = p[c], a && (a[c] = g[c], a[c](c))) : s[c] = Ee(f, l);}o = s.length = b, n = d.slice(0);}return s;});function f(e) {if (r[c] = e, a) {var _xe5 = xe(c),_xe6 = (0, _slicedToArray2["default"])(_xe5, 2),_e14 = _xe6[0],_i18 = _xe6[1];return a[c] = _i18, t(d[c], _e14);}return t(d[c]);}};}(function () {return e.each;}, e.children, t || void 0), void 0, !1);}_e();new Set(["className", "indeterminate", "value", "allowfullscreen", "allowpaymentrequest", "async", "autofocus", "autoplay", "checked", "controls", "default", "disabled", "formnovalidate", "hidden", "ismap", "itemscope", "loop", "multiple", "muted", "nomodule", "novalidate", "open", "playsinline", "readonly", "required", "reversed", "seamless", "selected", "truespeed"]), new Set(["innerHTML", "textContent", "innerText", "children"]), new Set(["beforeinput", "click", "dblclick", "focusin", "focusout", "input", "keydown", "keyup", "mousedown", "mousemove", "mouseout", "mouseover", "mouseup", "pointerdown", "pointermove", "pointerout", "pointerover", "pointerup", "touchend", "touchmove", "touchstart"]), new Set(["altGlyph", "altGlyphDef", "altGlyphItem", "animate", "animateColor", "animateMotion", "animateTransform", "circle", "clipPath", "color-profile", "cursor", "defs", "desc", "ellipse", "feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence", "filter", "font", "font-face", "font-face-format", "font-face-name", "font-face-src", "font-face-uri", "foreignObject", "g", "glyph", "glyphRef", "hkern", "image", "line", "linearGradient", "marker", "mask", "metadata", "missing-glyph", "mpath", "path", "pattern", "polygon", "polyline", "radialGradient", "rect", "set", "stop", "svg", "switch", "symbol", "text", "textPath", "tref", "tspan", "use", "view", "vkern"]);function pt(e, t) {return Me(e, void 0, t);}function gt(e, t, i) {var n = i.length,s = t.length,r = n,o = 0,a = 0,l = t[s - 1].nextSibling,u = null;for (; o < s || a < r;) {if (s === o) {var _t16 = r < n ? a ? i[a - 1].nextSibling : i[r - a] : l;for (; a < r;) {e.insertBefore(i[a++], _t16);}} else if (r === a) for (; o < s;) {u && u.has(t[o]) || e.removeChild(t[o]), o++;} else if (t[o] === i[a]) o++, a++;else if (t[s - 1] === i[r - 1]) s--, r--;else if (t[o] === i[r - 1] && i[a] === t[s - 1]) {var _n12 = t[--s].nextSibling;e.insertBefore(i[a++], t[o++].nextSibling), e.insertBefore(i[--r], _n12), t[s] = i[r];} else {if (!u) {u = new Map();var _e15 = a;for (; _e15 < r;) {u.set(i[_e15], _e15++);}}var _n13 = u.get(t[o]);if (null != _n13) {if (a < _n13 && _n13 < r) {var _l2 = void 0,_c = o,_d = 1;for (; ++_c < s && _c < r && null != (_l2 = u.get(t[_c])) && _l2 === _n13 + _d;) {_d++;}if (_d > _n13 - a) {var _s14 = t[o];for (; a < _n13;) {e.insertBefore(i[a++], _s14);}} else e.replaceChild(i[a++], t[o++]);} else o++;} else e.removeChild(t[o++]);}}}var mt = Symbol("delegated-events");function vt(e, t, i) {var n;return Ee(function (s) {n = s, Et(t, e(), t.firstChild ? null : void 0, i);}), function () {n(), t.textContent = "";};}function yt(e, t, i) {var n = document.createElement("template");if (n.innerHTML = e, t && n.innerHTML.split("<").length - 1 !== t) throw "Template html does not match input:\n".concat(n.innerHTML, "\n\n").concat(e);var s = n.content.firstChild;return i && (s = s.firstChild), s;}function wt(e) {var t = document[mt] || (document[mt] = new Set());for (var _i19 = 0, _n14 = e.length; _i19 < _n14; _i19++) {var _n15 = e[_i19];t.has(_n15) || (t.add(_n15), document.addEventListener(_n15, xt));}}function bt(e, t, i) {null == i ? e.removeAttribute(t) : e.setAttribute(t, i);}function Pt(e, t, i, n) {n ? Array.isArray(i) ? (e["$$".concat(t)] = i[0], e["$$".concat(t, "Data")] = i[1]) : e["$$".concat(t)] = i : Array.isArray(i) ? e.addEventListener(t, function (e) {return i[0](i[1], e);}) : e.addEventListener(t, i);}function kt(e, t) {var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};var n = e.style;if ("string" == typeof t) return n.cssText = t;var s, r;for (r in "string" == typeof i && (i = {}), i) {null == t[r] && n.removeProperty(r), delete i[r];}for (r in t) {s = t[r], s !== i[r] && (n.setProperty(r, s), i[r] = s);}return i;}function Et(e, t, i, n) {if (void 0 === i || n || (n = []), "function" != typeof t) return St(e, t, n, i);Ce(function (n) {return St(e, t(), n, i);}, n);}function xt(e) {var t = "$$".concat(e.type);var i = e.composedPath && e.composedPath()[0] || e.target;for (e.target !== i && Object.defineProperty(e, "target", { configurable: !0, value: i }), Object.defineProperty(e, "currentTarget", { configurable: !0, get: function get() {return i;} }); null !== i;) {var _n16 = i[t];if (_n16) {var _s15 = i["".concat(t, "Data")];if (void 0 !== _s15 ? _n16(_s15, e) : _n16(e), e.cancelBubble) return;}i = i.host && i.host !== i && i.host instanceof Node ? i.host : i.parentNode;}}function St(e, t, i, n, s) {for (; "function" == typeof i;) {i = i();}if (t === i) return i;var r = (0, _typeof2["default"])(t),o = void 0 !== n;if (e = o && i[0] && i[0].parentNode || e, "string" === r || "number" === r) {if ("number" === r && (t = t.toString()), o) {var _s16 = i[0];_s16 && 3 === _s16.nodeType ? _s16.data = t : _s16 = document.createTextNode(t), i = Ot(e, i, n, _s16);} else i = "" !== i && "string" == typeof i ? e.firstChild.data = t : e.textContent = t;} else if (null == t || "boolean" === r) {if (oe.context) return i;i = Ot(e, i, n);} else {if ("function" === r) return Ce(function () {var s = t();for (; "function" == typeof s;) {s = s();}i = St(e, s, i, n);}), function () {return i;};if (Array.isArray(t)) {var _r8 = [];if (Ct(_r8, t, s)) return Ce(function () {return i = St(e, _r8, i, n, !0);}), function () {return i;};if (oe.context && i.length) return i;if (0 === _r8.length) {if (i = Ot(e, i, n), o) return i;} else Array.isArray(i) ? 0 === i.length ? Mt(e, _r8, n) : gt(e, i, _r8) : null == i || "" === i ? Mt(e, _r8) : gt(e, o && i || [e.firstChild], _r8);i = _r8;} else if (t instanceof Node) {if (Array.isArray(i)) {if (o) return i = Ot(e, i, n, t);Ot(e, i, null, t);} else null != i && "" !== i && e.firstChild ? e.replaceChild(t, e.firstChild) : e.appendChild(t);i = t;} else console.warn("Skipped inserting", t);}return i;}function Ct(e, t, i) {var n = !1;for (var _s17 = 0, _r9 = t.length; _s17 < _r9; _s17++) {var _r10 = void 0,_o5 = t[_s17];if (_o5 instanceof Node) e.push(_o5);else if (null == _o5 || !0 === _o5 || !1 === _o5) ;else if (Array.isArray(_o5)) n = Ct(e, _o5) || n;else if ("string" == (_r10 = (0, _typeof2["default"])(_o5))) e.push(document.createTextNode(_o5));else if ("function" === _r10) {if (i) {for (; "function" == typeof _o5;) {_o5 = _o5();}n = Ct(e, Array.isArray(_o5) ? _o5 : [_o5]) || n;} else e.push(_o5), n = !0;} else e.push(document.createTextNode(_o5.toString()));}return n;}function Mt(e, t, i) {for (var _n17 = 0, _s18 = t.length; _n17 < _s18; _n17++) {e.insertBefore(t[_n17], i);}}function Ot(e, t, i, n) {if (void 0 === i) return e.textContent = "";var s = n || document.createTextNode("");if (t.length) {var _n18 = !1;for (var _r11 = t.length - 1; _r11 >= 0; _r11--) {var _o6 = t[_r11];if (s !== _o6) {var _t17 = _o6.parentNode === e;_n18 || _r11 ? _t17 && e.removeChild(_o6) : _t17 ? e.replaceChild(s, _o6) : e.insertBefore(s, i);} else _n18 = !0;}} else e.insertBefore(s, i);return [s];}var Tt = {},Lt = yt;Object.defineProperty(Tt, "__esModule", { value: !0 });var At = function At(e) {var _xe7 = xe(e.delegate.filteredMessages, !1),_xe8 = (0, _slicedToArray2["default"])(_xe7, 2),t = _xe8[0],i = _xe8[1];Le(function () {e.delegate.onDidChangeMessages(function (e) {i(e);});});var n = [{ id: "severity", label: "Severity" }, { id: "linterName", label: "Provider" }, { id: "excerpt", label: "Description", onClick: Yt, sortable: !1 }, { id: "line", label: "Line", onClick: Yt }];"Entire Project" === e.delegate.panelRepresents && n.push({ id: "file", label: "File", onClick: Yt });return function () {var e = Gt.cloneNode(!0);return bt(e, "tabindex", -1), e.style.setProperty("overflowY", "scroll"), e.style.setProperty("height", "100%"), Et(e, ft(It, { get rows() {return t();}, columns: n, defaultSortDirection: ["severity", "asc"], rowSorter: O.sortMessages, accessors: !0, getRowID: function getRowID(e) {return e.key;}, bodyRenderer: Ut, style: { width: "100%" }, className: "linter dark" })), e;}();};Tt.PanelComponent = At;var _t = yt("<table><thead><tr></tr></thead><tbody></tbody></table>", 8),Nt = yt("<th></th>", 2),Dt = yt("<tr></tr>", 2),jt = yt("<td></td>", 2),Bt = yt('<span class="sort-icon"></span>', 2);function It(e) {var t;var _xe9 = xe(),_xe10 = (0, _slicedToArray2["default"])(_xe9, 2),i = _xe10[0],n = _xe10[1],_xe11 = xe(e.rows, !1),_xe12 = (0, _slicedToArray2["default"])(_xe11, 2),s = _xe12[0],r = _xe12[1];function o() {var t = i();return void 0 !== t ? t : void 0 !== e.defaultSortDirection ? e.defaultSortDirection : [null, null];}Se(function () {r(e.rows);});var a = null !== (t = e.rowSorter) && void 0 !== t ? t : Kt;function l() {var t = o();null === t[0] && void 0 !== e.defaultSortDirection ? r(a(s(), e.defaultSortDirection)) : null !== t[0] && r(a(s(), t));}var _e$headerRenderer = e.headerRenderer,u = _e$headerRenderer === void 0 ? Wt : _e$headerRenderer,_e$bodyRenderer = e.bodyRenderer,c = _e$bodyRenderer === void 0 ? Vt : _e$bodyRenderer,_e$getRowID = e.getRowID,d = _e$getRowID === void 0 ? qt : _e$getRowID,f = e.accessors;return void 0 === e.columns && (e.columns = function (e) {var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;var i = e[t],n = Object.keys(i),s = n.length,r = new Array(s);for (var _e16 = 0; _e16 < s; _e16++) {r[_e16] = { id: n[_e16] };}return r;}(e.rows, e.representitiveRowNumber)), l(), function () {var t = _t.cloneNode(!0),i = t.firstChild,r = i.firstChild,a = i.nextSibling;return Et(r, ft(ht, { get each() {return e.columns;}, children: function children(e) {var t = !1 !== e.sortable;return function () {var i = Nt.cloneNode(!0);var s;return Pt(i, "click", t ? (s = e.id, function (e) {n(function (e, t, i) {var n;return n = i ? [null, null] : e[0] === t ? [e[0], "asc" === e[1] ? "desc" : "asc"] : [t, "asc"], n;}(o(), s, e.shiftKey)), l();}) : void 0, !0), i.className = t ? "sortable" : void 0, Et(i, function () {return u(e);}, null), Et(i, function () {return t ? function (e, t) {var i;return i = null === e[0] || e[0] !== t ? Rt : "asc" === e[1] ? Ft : $t, function () {var e = Bt.cloneNode(!0);return Et(e, i), e;}();}(o(), e.id) : void 0;}, null), Ce(function () {return bt(i, "id", f ? String(e.id) : void 0);}), i;}();} })), Et(a, ft(ht, { get each() {return s();}, children: function children(t) {var i = function (e) {return f ? d(e) : void 0;}(t);return function () {var n = Dt.cloneNode(!0);return bt(n, "id", i), Et(n, ft(ht, { get each() {return e.columns;}, children: function children(e) {return function () {var n = jt.cloneNode(!0);return Pt(n, "click", void 0 !== e.onClick ? function (i) {return e.onClick(i, t);} : void 0, !0), Et(n, function () {return c(t, e.id);}), Ce(function () {return bt(n, "id", i ? "".concat(i, ".").concat(e.id) : void 0);}), n;}();} })), n;}();} })), Ce(function (i) {var n;var s = "solid-simple-table ".concat(null !== (n = e.className) && void 0 !== n ? n : ""),r = e.style;return s !== i._v$ && (t.className = i._v$ = s), i._v$2 = kt(t, r, i._v$2), i;}, { _v$: void 0, _v$2: void 0 }), t;}();}var $t = "↑",Ft = "↓",Rt = "⇅";function Ht(e) {return "string" == typeof e ? e : JSON.stringify(e);}function Wt(e) {var t;return null !== (t = e.label) && void 0 !== t ? t : e.id;}function Vt(e, t) {return Ht("object" == (0, _typeof2["default"])(e) ? e[t] : e);}function qt(e) {return Ht(e);}function Kt(e, t) {if (!e.length) return e;var i;var n = t[0];return i = "object" == (0, _typeof2["default"])(e[0]) ? e.sort(function (e, t) {var i = e[n],s = t[n];return i === s ? 0 : i < s ? -1 : 1;}) : e.sort(), "desc" === t[1] ? i.reverse() : i;}wt(["click"]);var Gt = Lt('<div id="linter-panel"></div>', 2),zt = Lt("<div></div>", 2);function Ut(e, t) {var i = (0, O.$range)(e);switch (t) {case "file":return (0, O.getPathOfMessage)(e);case "line":return i ? "".concat(i.start.row + 1, ":").concat(i.start.column + 1) : "";case "excerpt":return e.excerpt;case "severity":return function () {var t = zt.cloneNode(!0);return Et(t, function () {return O.severityNames[e.severity];}), Ce(function () {return t.className = "solid-simple-table linter ".concat(e.severity);}), t;}();default:return e[t];}}function Yt(e, t) {"A" !== e.target.tagName && (("darwin" === process.platform ? e.metaKey : e.ctrlKey) ? e.shiftKey ? (0, O.openExternally)(t) : (0, O.visitMessage)(t, !0) : (0, O.visitMessage)(t));}function Jt(e) {var t = atom.workspace.paneContainerForItem(e);return t && "object" == (0, _typeof2["default"])(t.state) && "number" == typeof t.state.size && "function" == typeof t.render ? t : null;}re = /*#__PURE__*/function () {function re(e) {var _this3 = this;(0, _classCallCheck2["default"])(this, re);this.element = document.createElement("div"), this.subscriptions = new u(), this.panelHeight = 100, this.alwaysTakeMinimumSpace = !0, this.lastSetPaneHeight = void 0, this.subscriptions.add(atom.config.observe("linter-ui-default.panelHeight", function (e) {var t = "number" == typeof _this3.panelHeight;_this3.panelHeight = e, t && _this3.doPanelResize(!0);}), atom.config.observe("linter-ui-default.alwaysTakeMinimumSpace", function (e) {_this3.alwaysTakeMinimumSpace = e;})), this.doPanelResize(), vt(function () {return ft(Tt.PanelComponent, { delegate: e });}, this.element);}(0, _createClass2["default"])(re, [{ key: "doPanelResize", value: function doPanelResize() {var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;var t = Jt(this);if (null === t) return;var i = null;var n = atom.views.getView(t);if (n && this.alwaysTakeMinimumSpace) {var _e17 = n.querySelector(".list-inline.tab-bar.inset-panel"),_t18 = _e17 ? _e17.getClientRects()[0] : null,_s19 = this.element.querySelector("table"),_r12 = _s19 ? _s19.getClientRects()[0] : null;_t18 && _r12 && (i = _t18.height + _r12.height + 1);}var s = null;var r = null === i || e ? this.panelHeight : Math.min(i, this.panelHeight);null === this.lastSetPaneHeight || t.state.size === this.lastSetPaneHeight || e || (s = t.state.size), this.lastSetPaneHeight = r, t.state.size = r, t.render(t.state), null !== s && atom.config.set("linter-ui-default.panelHeight", s);} }, { key: "getURI", value: function getURI() {return O.WORKSPACE_URI;} }, { key: "getTitle", value: function getTitle() {return "Linter";} }, { key: "getDefaultLocation", value: function getDefaultLocation() {return O.DOCK_DEFAULT_LOCATION;} }, { key: "getAllowedLocations", value: function getAllowedLocations() {return O.DOCK_ALLOWED_LOCATIONS;} }, { key: "getPreferredHeight", value: function getPreferredHeight() {return atom.config.get("linter-ui-default.panelHeight");} }, { key: "dispose", value: function dispose() {this.subscriptions.dispose();var e = Jt(this);var t;null === e || this.alwaysTakeMinimumSpace || e.state.size === this.panelHeight || (atom.config.set("linter-ui-default.panelHeight", e.state.size), null === (t = e.paneForItem(this)) || void 0 === t || t.destroyItem(this, !0));} }]);return re;}(), se["default"] = re;var Qt = x(se = se["default"]);S = /*#__PURE__*/function () {function S() {var _this4 = this;(0, _classCallCheck2["default"])(this, S);this.panel = null, this.element = document.createElement("div"), this.delegate = new ne["default"](), this.messages = [], this.deactivating = !1, this.subscriptions = new u(), this.showPanelConfig = !0, this.hidePanelWhenEmpty = !0, this.showPanelStateMessages = !1, this.activationTimer = void 0, this.subscriptions.add(this.delegate, atom.config.observe("linter-ui-default.hidePanelWhenEmpty", function (e) {_this4.hidePanelWhenEmpty = e, _this4.refresh();}), atom.workspace.onDidDestroyPane(function (_ref2) {var e = _ref2.pane;(null === _this4.panel || e.getItems().includes(_this4.panel)) && !_this4.deactivating && (_this4.panel = null, atom.config.set("linter-ui-default.showPanel", !1));}), atom.workspace.onDidDestroyPaneItem(function (_ref3) {var e = _ref3.item;e instanceof Qt["default"] && !_this4.deactivating && (_this4.panel = null, atom.config.set("linter-ui-default.showPanel", !1));}), atom.config.observe("linter-ui-default.showPanel", function (e) {_this4.showPanelConfig = e, _this4.refresh();}), atom.workspace.getCenter().observeActivePaneItem(function () {_this4.showPanelStateMessages = Boolean(_this4.delegate.filteredMessages.length), _this4.refresh();})), this.activationTimer = window.requestIdleCallback(function () {var e = !0;var t = atom.workspace.getBottomDock();_this4.subscriptions.add(t.onDidChangeActivePaneItem(function (t) {if (!_this4.panel || "bottom" !== _this4.getPanelLocation()) return;if (e) return void (e = !1);t === _this4.panel !== _this4.showPanelConfig && atom.config.set("linter-ui-default.showPanel", !_this4.showPanelConfig);}), t.onDidChangeVisible(function (e) {if (!_this4.panel || "bottom" !== _this4.getPanelLocation()) return;if (!e && _this4.showPanelConfig && _this4.hidePanelWhenEmpty && !_this4.showPanelStateMessages) return;if (t.getActivePaneItem() !== _this4.panel) return;e !== _this4.showPanelConfig && atom.config.set("linter-ui-default.showPanel", !_this4.showPanelConfig);})), _this4.activate();});}(0, _createClass2["default"])(S, [{ key: "getPanelLocation", value: function getPanelLocation() {if (!this.panel) return null;var e = atom.workspace.paneContainerForItem(this.panel);return e && e.location || null;} }, { key: "activate", value: function () {var _activate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {return _regenerator["default"].wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:_context.t0 = this.panel;if (_context.t0) {_context.next = 7;break;}this.panel = new Qt["default"](this.delegate);_context.next = 5;return atom.workspace.open(this.panel, { activatePane: !1, activateItem: !1, searchAllPanes: !0 });case 5:this.update();this.refresh();case 7:case "end":return _context.stop();}}}, _callee, this);}));function activate() {return _activate.apply(this, arguments);}return activate;}() }, { key: "update", value: function update() {var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;e && (this.messages = e), this.delegate.update(this.messages), this.showPanelStateMessages = Boolean(this.delegate.filteredMessages.length), this.refresh();} }, { key: "refresh", value: function () {var _refresh = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {var e, t, i, n, s, r;return _regenerator["default"].wrap(function _callee2$(_context2) {while (1) {switch (_context2.prev = _context2.next) {case 0:e = this.panel;if (!(null === e)) {_context2.next = 8;break;}_context2.t0 = this.showPanelConfig;if (!_context2.t0) {_context2.next = 7;break;}_context2.next = 6;return this.activate();case 6:_context2.t0 = _context2.sent;case 7:return _context2.abrupt("return", void _context2.t0);case 8:t = atom.workspace.paneContainerForItem(e);if (!(!t || "bottom" !== t.location)) {_context2.next = 11;break;}return _context2.abrupt("return");case 11:i = t.getActivePaneItem() === e, n = this.showPanelConfig, s = !this.hidePanelWhenEmpty || this.showPanelStateMessages;if (n && s) {if (!i) null === (r = t.paneForItem(e)) || void 0 === r || r.activateItem(e);t.show(), e.doPanelResize();} else i && t.hide();case 13:case "end":return _context2.stop();}}}, _callee2, this);}));function refresh() {return _refresh.apply(this, arguments);}return refresh;}() }, { key: "dispose", value: function dispose() {this.deactivating = !0, this.panel && this.panel.dispose(), this.subscriptions.dispose(), window.cancelIdleCallback(this.activationTimer);} }]);return S;}(), E["default"] = S;var Xt = P(E = E["default"]),Zt = {},ei = e;Object.defineProperty(Zt, "__esModule", { value: !0 });var ti = void 0;Zt["default"] = ti;var ii = ei(o);ti = /*#__PURE__*/function () {function ti() {var _this5 = this;(0, _classCallCheck2["default"])(this, ti);this.messages = [], this.subscriptions = new u(), this.subscriptions.add(atom.commands.add("atom-workspace", { "linter-ui-default:next": function linterUiDefaultNext() {return _this5.move(!0, !0);}, "linter-ui-default:previous": function linterUiDefaultPrevious() {return _this5.move(!1, !0);}, "linter-ui-default:next-error": function linterUiDefaultNextError() {return _this5.move(!0, !0, "error");}, "linter-ui-default:previous-error": function linterUiDefaultPreviousError() {return _this5.move(!1, !0, "error");}, "linter-ui-default:next-warning": function linterUiDefaultNextWarning() {return _this5.move(!0, !0, "warning");}, "linter-ui-default:previous-warning": function linterUiDefaultPreviousWarning() {return _this5.move(!1, !0, "warning");}, "linter-ui-default:next-info": function linterUiDefaultNextInfo() {return _this5.move(!0, !0, "info");}, "linter-ui-default:previous-info": function linterUiDefaultPreviousInfo() {return _this5.move(!1, !0, "info");}, "linter-ui-default:next-in-current-file": function linterUiDefaultNextInCurrentFile() {return _this5.move(!0, !1);}, "linter-ui-default:previous-in-current-file": function linterUiDefaultPreviousInCurrentFile() {return _this5.move(!1, !1);}, "linter-ui-default:next-error-in-current-file": function linterUiDefaultNextErrorInCurrentFile() {return _this5.move(!0, !1, "error");}, "linter-ui-default:previous-error-in-current-file": function linterUiDefaultPreviousErrorInCurrentFile() {return _this5.move(!1, !1, "error");}, "linter-ui-default:next-warning-in-current-file": function linterUiDefaultNextWarningInCurrentFile() {return _this5.move(!0, !1, "warning");}, "linter-ui-default:previous-warning-in-current-file": function linterUiDefaultPreviousWarningInCurrentFile() {return _this5.move(!1, !1, "warning");}, "linter-ui-default:next-info-in-current-file": function linterUiDefaultNextInfoInCurrentFile() {return _this5.move(!0, !1, "info");}, "linter-ui-default:previous-info-in-current-file": function linterUiDefaultPreviousInfoInCurrentFile() {return _this5.move(!1, !1, "info");}, "linter-ui-default:toggle-panel": function linterUiDefaultTogglePanel() {atom.config.set("linter-ui-default.showPanel", !atom.config.get("linter-ui-default.showPanel"));}, "linter-ui-default:expand-tooltip": function linterUiDefaultExpandTooltip() {}, "linter-ui-default:collapse-tooltip": function linterUiDefaultCollapseTooltip() {} }), atom.commands.add("atom-text-editor:not([mini])", { "linter-ui-default:apply-all-solutions": function linterUiDefaultApplyAllSolutions() {return _this5.applyAllSolutions();} }), atom.commands.add("#linter-panel", { "core:copy": function coreCopy() {var e = document.getSelection();e && atom.clipboard.write(e.toString());} }));}(0, _createClass2["default"])(ti, [{ key: "applyAllSolutions", value: function applyAllSolutions() {var e = (0, O.getActiveTextEditor)();(0, ii["default"])(e, "textEditor was null on a command supposed to run on text-editors only");(0, O.sortMessages)((0, O.filterMessages)(this.messages, e.getPath()), ["line", "desc"]).forEach(function (t) {2 === t.version && Array.isArray(t.solutions) && t.solutions.length > 0 && (0, O.applySolution)(e, (0, O.sortSolutions)(t.solutions)[0]);});} }, { key: "move", value: function move(e, t) {var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;var n = (0, O.getActiveTextEditor)(),s = n && n.getPath() || NaN,r = (0, O.sortMessages)((0, O.filterMessages)(this.messages, t ? null : s, i), ["file", "asc"]),o = e ? -1 : 1;if (!n) {var _t19 = e ? r[0] : r[r.length - 1];return void (_t19 && (0, O.visitMessage)(_t19));}var a = n.getCursorBufferPosition();e || r.reverse();var l = null,u = !1;for (var _e18 = 0, _t20 = r.length; _e18 < _t20; _e18++) {var _t21 = r[_e18],_i20 = (0, O.$file)(_t21),_n19 = (0, O.$range)(_t21);if (u || _i20 !== s || (u = !0), _i20 && _n19) {if (u && _i20 !== s) {l = _t21;break;}if (_i20 === s && a.compare(_n19.start) === o) {l = _t21;break;}}}!l && r.length && (l = r[0]), l && (0, O.visitMessage)(l);} }, { key: "update", value: function update(e) {this.messages = e;} }, { key: "dispose", value: function dispose() {this.subscriptions.dispose();} }]);return ti;}(), Zt["default"] = ti;var ni = P(Zt = Zt["default"]),si = {},ri = e;Object.defineProperty(si, "__esModule", { value: !0 });var oi = void 0;si["default"] = oi;var ai,li = {};function ui(e) {return ui = "function" == typeof Symbol && "symbol" == (0, _typeof2["default"])(Symbol.iterator) ? function (e) {return (0, _typeof2["default"])(e);} : function (e) {return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : (0, _typeof2["default"])(e);}, ui(e);}var ci = ui;function di() {if ("function" != typeof WeakMap) return null;var e = new WeakMap();return di = function di() {return e;}, e;}var fi = ai = function ai(e) {if (e && e.__esModule) return e;if (null === e || "object" !== ci(e) && "function" != typeof e) return { "default": e };var t = di();if (t && t.has(e)) return t.get(e);var i = {},n = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var s in e) {if (Object.prototype.hasOwnProperty.call(e, s)) {var r = n ? Object.getOwnPropertyDescriptor(e, s) : null;r && (r.get || r.set) ? Object.defineProperty(i, s, r) : i[s] = e[s];}}return i["default"] = e, t && t.set(e, i), i;};Object.defineProperty(li, "__esModule", { value: !0 });var hi = void 0;li["default"] = hi;var pi = {};Object.defineProperty(pi, "__esModule", { value: !0 });var gi = function gi(e) {var t = document.createElement("a");return t.classList.add("icon-".concat(e)), t.appendChild(document.createTextNode("")), t;};pi.getElement = gi;var mi = fi(pi);hi = /*#__PURE__*/function () {function hi() {var _this6 = this;(0, _classCallCheck2["default"])(this, hi);this.item = document.createElement("div"), this.itemErrors = mi.getElement("stop"), this.itemWarnings = mi.getElement("alert"), this.itemInfos = mi.getElement("info"), this.emitter = new c(), this.subscriptions = new u(), this.item.appendChild(this.itemErrors), this.item.appendChild(this.itemWarnings), this.item.appendChild(this.itemInfos), this.item.classList.add("inline-block"), this.item.classList.add("linter-status-count"), this.subscriptions.add(this.emitter, atom.tooltips.add(this.itemErrors, { title: "Linter Errors" }), atom.tooltips.add(this.itemWarnings, { title: "Linter Warnings" }), atom.tooltips.add(this.itemInfos, { title: "Linter Infos" })), this.itemErrors.onclick = function () {return _this6.emitter.emit("click", "error");}, this.itemWarnings.onclick = function () {return _this6.emitter.emit("click", "warning");}, this.itemInfos.onclick = function () {return _this6.emitter.emit("click", "info");}, this.update(0, 0, 0);}(0, _createClass2["default"])(hi, [{ key: "setVisibility", value: function setVisibility(e, t) {t ? this.item.classList.remove("hide-".concat(e)) : this.item.classList.add("hide-".concat(e));} }, { key: "update", value: function update(e, t, i) {this.itemErrors.childNodes[0].textContent = String(e), this.itemWarnings.childNodes[0].textContent = String(t), this.itemInfos.childNodes[0].textContent = String(i), e ? this.itemErrors.classList.add("text-error") : this.itemErrors.classList.remove("text-error"), t ? this.itemWarnings.classList.add("text-warning") : this.itemWarnings.classList.remove("text-warning"), i ? this.itemInfos.classList.add("text-info") : this.itemInfos.classList.remove("text-info");} }, { key: "onDidClick", value: function onDidClick(e) {return this.emitter.on("click", e);} }, { key: "dispose", value: function dispose() {this.subscriptions.dispose();} }]);return hi;}(), li["default"] = hi;var vi = ri(li = li["default"]);oi = /*#__PURE__*/function () {function oi() {var _this7 = this;(0, _classCallCheck2["default"])(this, oi);this.element = new vi["default"](), this.messages = [], this.subscriptions = new u(), this.statusBarRepresents = void 0, this.statusBarClickBehavior = void 0, this.subscriptions.add(this.element, atom.config.observe("linter-ui-default.statusBarRepresents", function (e) {var t = void 0 !== _this7.statusBarRepresents;_this7.statusBarRepresents = e, t && _this7.update();}), atom.config.observe("linter-ui-default.statusBarClickBehavior", function (e) {var t = void 0 !== _this7.statusBarClickBehavior;_this7.statusBarClickBehavior = e, t && _this7.update();}), atom.config.observe("linter-ui-default.showStatusBar", function (e) {_this7.element.setVisibility("config", e);}), atom.workspace.getCenter().observeActivePaneItem(function (e) {var t = atom.workspace.isTextEditor(e);_this7.element.setVisibility("pane", t), t && "Current File" === _this7.statusBarRepresents && _this7.update();})), this.element.onDidClick(function (e) {var t = atom.views.getView(atom.workspace);if ("Toggle Panel" === _this7.statusBarClickBehavior) atom.commands.dispatch(t, "linter-ui-default:toggle-panel");else if ("Toggle Status Bar Scope" === _this7.statusBarClickBehavior) atom.config.set("linter-ui-default.statusBarRepresents", "Entire Project" === _this7.statusBarRepresents ? "Current File" : "Entire Project");else {var _i21 = "Current File" === _this7.statusBarRepresents ? "-in-current-file" : "";atom.commands.dispatch(t, "linter-ui-default:next-".concat(e).concat(_i21));}});}(0, _createClass2["default"])(oi, [{ key: "update", value: function update() {var _this8 = this;var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;e ? this.messages = e : e = this.messages;var t = { error: 0, warning: 0, info: 0 },i = (0, O.getActiveTextEditor)(),n = i && i.getPath() || NaN;e.forEach(function (e) {"Entire Project" !== _this8.statusBarRepresents && (0, O.$file)(e) !== n || ("error" === e.severity ? t.error++ : "warning" === e.severity ? t.warning++ : t.info++);}), this.element.update(t.error, t.warning, t.info);} }, { key: "attach", value: function attach(e) {var _this9 = this;var t = null;this.subscriptions.add(atom.config.observe("linter-ui-default.statusBarPosition", function (i) {t && t.destroy(), t = e["add".concat(i, "Tile")]({ item: _this9.element.item, priority: "Left" === i ? 0 : 1e3 });})), this.subscriptions.add(new d(function () {t && t.destroy();}));} }, { key: "dispose", value: function dispose() {this.subscriptions.dispose();} }]);return oi;}(), si["default"] = oi;var yi = P(si = si["default"]),wi = {};Object.defineProperty(wi, "__esModule", { value: !0 });var bi = void 0;wi["default"] = bi;bi = /*#__PURE__*/function () {function bi() {var _this10 = this;(0, _classCallCheck2["default"])(this, bi);this.provider = void 0, this.executing = new Set(), this.providerTitles = new Set(), this.useBusySignal = !0, this.subscriptions = new u(), this.subscriptions.add(atom.config.observe("linter-ui-default.useBusySignal", function (e) {_this10.useBusySignal = e;}));}(0, _createClass2["default"])(bi, [{ key: "attach", value: function attach(e) {this.provider = e.create(), this.update();} }, { key: "update", value: function update() {var _this11 = this;var e = this.provider;if (!e) return;if (!this.useBusySignal) return;var t = new Map(),i = new Set();var _iterator3 = _createForOfIteratorHelper(this.executing),_step3;try {for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {var _step3$value = _step3.value,_e19 = _step3$value.filePath,_i22 = _step3$value.linter;var _n20 = t.get(_e19);_n20 || t.set(_e19, _n20 = []), _n20.push(_i22.name);}} catch (err) {_iterator3.e(err);} finally {_iterator3.f();}var _iterator4 = _createForOfIteratorHelper(t),_step4;try {var _loop = function _loop() {var _step4$value = (0, _slicedToArray2["default"])(_step4.value, 2),n = _step4$value[0],s = _step4$value[1];var t = n ? " on ".concat(atom.project.relativizePath(n)[1]) : "";s.forEach(function (n) {var s = "".concat(n).concat(t);i.add(s), _this11.providerTitles.has(s) || (_this11.providerTitles.add(s), e.add(s));});};for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {_loop();}} catch (err) {_iterator4.e(err);} finally {_iterator4.f();}this.providerTitles.forEach(function (t) {i.has(t) || (e.remove(t), _this11.providerTitles["delete"](t));}), t.clear();} }, { key: "getExecuting", value: function getExecuting(e, t) {var _iterator5 = _createForOfIteratorHelper(this.executing),_step5;try {for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {var _i23 = _step5.value;if (_i23.linter === e && _i23.filePath === t) return _i23;}} catch (err) {_iterator5.e(err);} finally {_iterator5.f();}return null;} }, { key: "didBeginLinting", value: function didBeginLinting(e, t) {this.getExecuting(e, t) || (this.executing.add({ linter: e, filePath: t }), this.update());} }, { key: "didFinishLinting", value: function didFinishLinting(e, t) {var i = this.getExecuting(e, t);i && (this.executing["delete"](i), this.update());} }, { key: "dispose", value: function dispose() {this.provider && this.provider.clear(), this.providerTitles.clear(), this.executing.clear(), this.subscriptions.dispose();} }]);return bi;}(), wi["default"] = bi;var Pi = P(wi = wi["default"]),ki = {};Object.defineProperty(ki, "__esModule", { value: !0 });var Ei = void 0;ki["default"] = Ei;Ei = /*#__PURE__*/function () {function Ei() {(0, _classCallCheck2["default"])(this, Ei);this.messages = [], this.grammarScopes = ["*"];}(0, _createClass2["default"])(Ei, [{ key: "getIntentions", value: function getIntentions(_ref4) {var e = _ref4.textEditor,t = _ref4.bufferPosition;var i = [];var n = (0, O.filterMessages)(this.messages, e.getPath());var _iterator6 = _createForOfIteratorHelper(n),_step6;try {var _loop2 = function _loop2() {var s = _step6.value;if (!(s.solutions && s.solutions.length)) return "continue";var n = (0, O.$range)(s);if (!(n && n.containsPoint(t))) return "continue";var r = s.linterName || "Linter",o = s.solutions;if (2 === s.version && Array.isArray(o) && o.length > 0) {var _t22 = o;i = i.concat(_t22.map(function (t) {return { priority: t.priority ? t.priority + 200 : 200, icon: "tools", title: t.title || "Fix ".concat(r, " issue"), selected: function selected() {(0, O.applySolution)(e, t);} };}));}};for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {var _ret = _loop2();if (_ret === "continue") continue;}} catch (err) {_iterator6.e(err);} finally {_iterator6.f();}return i;} }, { key: "update", value: function update(e) {this.messages = e;} }]);return Ei;}(), ki["default"] = Ei;var xi = P(ki = ki["default"]),Si = {},Ci = e;Object.defineProperty(Si, "__esModule", { value: !0 });var Mi = void 0;Si["default"] = Mi;var Oi = {},Ti = e;Object.defineProperty(Oi, "__esModule", { value: !0 });var Li = void 0;Oi["default"] = Li;var Ai, _i;_i = function _i(e) {var t = (0, _typeof2["default"])(e);return null != e && ("object" == t || "function" == t);};var Ni,Di = {},ji = "object" == (0, _typeof2["default"])(t) && t && t.Object === Object && t,Bi = "object" == (typeof self === "undefined" ? "undefined" : (0, _typeof2["default"])(self)) && self && self.Object === Object && self,Ii = ji || Bi || Function("return this")();Ni = function Ni() {return Di.Date.now();};var $i,Fi = /\s/;var Ri = function Ri(e) {for (var t = e.length; t-- && Fi.test(e.charAt(t));) {;}return t;},Hi = /^\s+/;$i = function $i(e) {return e ? e.slice(0, Ri(e) + 1).replace(Hi, "") : e;};var Wi,Vi,qi = Wi = (Di = Ii).Symbol,Ki = Object.prototype,Gi = Ki.hasOwnProperty,zi = Ki.toString,Ui = qi ? qi.toStringTag : void 0;Vi = function Vi(e) {var t = Gi.call(e, Ui),i = e[Ui];try {e[Ui] = void 0;var n = !0;} catch (e) {}var s = zi.call(e);return n && (t ? e[Ui] = i : delete e[Ui]), s;};var Yi = Object.prototype.toString;var Ji = Vi,Qi = function Qi(e) {return Yi.call(e);},Xi = Wi ? Wi.toStringTag : void 0;var Zi = function Zi(e) {return null == e ? void 0 === e ? "[object Undefined]" : "[object Null]" : Xi && Xi in Object(e) ? Ji(e) : Qi(e);},en = function en(e) {return null != e && "object" == (0, _typeof2["default"])(e);};var tn = $i,nn = _i,sn = function sn(e) {return "symbol" == (0, _typeof2["default"])(e) || en(e) && "[object Symbol]" == Zi(e);},rn = /^[-+]0x[0-9a-f]+$/i,on = /^0b[01]+$/i,an = /^0o[0-7]+$/i,ln = parseInt;var un = _i,cn = Ni,dn = function dn(e) {if ("number" == typeof e) return e;if (sn(e)) return NaN;if (nn(e)) {var t = "function" == typeof e.valueOf ? e.valueOf() : e;e = nn(t) ? t + "" : t;}if ("string" != typeof e) return 0 === e ? e : +e;e = tn(e);var i = on.test(e);return i || an.test(e) ? ln(e.slice(2), i ? 2 : 8) : rn.test(e) ? NaN : +e;},fn = Math.max,hn = Math.min;var pn = Ti(Ai = function Ai(e, t, i) {var n,s,r,o,a,l,u = 0,c = !1,d = !1,f = !0;if ("function" != typeof e) throw new TypeError("Expected a function");function h(t) {var i = n,r = s;return n = s = void 0, u = t, o = e.apply(r, i);}function p(e) {return u = e, a = setTimeout(m, t), c ? h(e) : o;}function g(e) {var i = e - l;return void 0 === l || i >= t || i < 0 || d && e - u >= r;}function m() {var e = cn();if (g(e)) return v(e);a = setTimeout(m, function (e) {var i = t - (e - l);return d ? hn(i, r - (e - u)) : i;}(e));}function v(e) {return a = void 0, f && n ? h(e) : (n = s = void 0, o);}function y() {var e = cn(),i = g(e);if (n = arguments, s = this, l = e, i) {if (void 0 === a) return p(l);if (d) return clearTimeout(a), a = setTimeout(m, t), h(l);}return void 0 === a && (a = setTimeout(m, t)), o;}return t = dn(t) || 0, un(i) && (c = !!i.leading, r = (d = "maxWait" in i) ? fn(dn(i.maxWait) || 0, t) : r, f = "trailing" in i ? !!i.trailing : f), y.cancel = function () {void 0 !== a && clearTimeout(a), u = 0, n = l = s = a = void 0;}, y.flush = function () {return void 0 === a ? o : v(cn());}, y;}),gn = Ti(r),mn = {},vn = e,yn = yt;Object.defineProperty(mn, "__esModule", { value: !0 });var wn = void 0;mn["default"] = wn;var bn = {};Object.defineProperty(bn, "__esModule", { value: !0 });var Pn = void 0;bn["default"] = Pn;Pn = /*#__PURE__*/function () {function Pn() {var _this12 = this;(0, _classCallCheck2["default"])(this, Pn);this.emitter = new c(), this.expanded = !1, this.subscriptions = new u(), this.showProviderName = void 0, this.subscriptions.add(this.emitter, atom.config.observe("linter-ui-default.showProviderName", function (e) {var t = void 0 !== _this12.showProviderName;_this12.showProviderName = e, t && _this12.emitter.emit("should-update");}), atom.commands.add("atom-workspace", { "linter-ui-default:expand-tooltip": function linterUiDefaultExpandTooltip(e) {var t;_this12.expanded || (_this12.expanded = !0, _this12.emitter.emit("should-expand"), null != e && null !== (t = e.originalEvent) && void 0 !== t && t.isTrusted && document.body.addEventListener("keyup", function e() {document.body.removeEventListener("keyup", e), atom.commands.dispatch(atom.views.getView(atom.workspace), "linter-ui-default:collapse-tooltip");}, { passive: !0 }));}, "linter-ui-default:collapse-tooltip": function linterUiDefaultCollapseTooltip() {_this12.expanded = !1, _this12.emitter.emit("should-collapse");} }));}(0, _createClass2["default"])(Pn, [{ key: "onShouldUpdate", value: function onShouldUpdate(e) {return this.emitter.on("should-update", e);} }, { key: "onShouldExpand", value: function onShouldExpand(e) {return this.emitter.on("should-expand", e);} }, { key: "onShouldCollapse", value: function onShouldCollapse(e) {return this.emitter.on("should-collapse", e);} }, { key: "dispose", value: function dispose() {this.emitter.dispose();} }]);return Pn;}(), bn["default"] = Pn;var kn,En = vn(bn = bn["default"]),xn = !1;function Sn() {return xn || (xn = !0, kn = {}, kn = Promise.resolve(require("./marked.esm.97cb3e07.js"))), kn;}var Cn = {},Mn = ai,On = e,Tn = yt,Ln = wt;Object.defineProperty(Cn, "__esModule", { value: !0 });var An = function An(e) {var _ct = ct({ description: "", descriptionShow: !1 }),_ct2 = (0, _slicedToArray2["default"])(_ct, 2),t = _ct2[0],i = _ct2[1],_xe13 = xe(!1, !1),_xe14 = (0, _slicedToArray2["default"])(_xe13, 2),n = _xe14[0],s = _xe14[1];function r() {return _r13.apply(this, arguments);}function _r13() {_r13 = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee5() {var o,a,l,_e20,_e21,_args5 = arguments;return _regenerator["default"].wrap(function _callee5$(_context5) {while (1) {switch (_context5.prev = _context5.next) {case 0:o = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : null;a = !t.descriptionShow, l = t.description || e.message.description;if (!(a || o)) {_context5.next = 40;break;}if (!("string" == typeof l || o)) {_context5.next = 13;break;}_context5.t0 = void 0 === qn;if (!_context5.t0) {_context5.next = 9;break;}_context5.next = 8;return Promise.resolve().then(function () {return Sn();}).then(function (e) {return (0, _n["default"])(e);});case 8:qn = _context5.sent["default"];case 9:_e20 = qn(o || l);i({ description: _e20, descriptionShow: !0 });_context5.next = 38;break;case 13:if (!("function" == typeof l)) {_context5.next = 37;break;}if (!(i(_objectSpread(_objectSpread({}, t), {}, { descriptionShow: !0 })), n())) {_context5.next = 16;break;}return _context5.abrupt("return");case 16:s(!0);_context5.next = 19;return l();case 19:_e21 = _context5.sent;if (!("string" != typeof _e21)) {_context5.next = 22;break;}throw new Error("Expected result to be string, got: " + (0, _typeof2["default"])(_e21));case 22:_context5.prev = 22;_context5.next = 25;return r(_e21);case 25:_context5.next = 35;break;case 27:_context5.prev = 27;_context5.t1 = _context5["catch"](22);console.log("[Linter] Error getting descriptions", _context5.t1);s(!1);_context5.t2 = t.descriptionShow;if (!_context5.t2) {_context5.next = 35;break;}_context5.next = 35;return r();case 35:_context5.next = 38;break;case 37:console.error("[Linter] Invalid description detected, expected string or function but got:", (0, _typeof2["default"])(l));case 38:_context5.next = 41;break;case 40:i(_objectSpread(_objectSpread({}, t), {}, { descriptionShow: !1 }));case 41:case "end":return _context5.stop();}}}, _callee5, null, [[22, 27]]);}));return _r13.apply(this, arguments);}Le(function () {e.delegate.onShouldUpdate(function () {i({ description: "", descriptionShow: !1 });}), e.delegate.onShouldExpand( /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3() {return _regenerator["default"].wrap(function _callee3$(_context3) {while (1) {switch (_context3.prev = _context3.next) {case 0:_context3.t0 = t.descriptionShow;if (_context3.t0) {_context3.next = 4;break;}_context3.next = 4;return r();case 4:case "end":return _context3.stop();}}}, _callee3);}))), e.delegate.onShouldCollapse( /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee4() {return _regenerator["default"].wrap(function _callee4$(_context4) {while (1) {switch (_context4.prev = _context4.next) {case 0:_context4.t0 = t.descriptionShow;if (!_context4.t0) {_context4.next = 4;break;}_context4.next = 4;return r();case 4:case "end":return _context4.stop();}}}, _callee4);})));});var o = e.message,a = e.delegate;return function () {var e = Fn.cloneNode(!0),i = e.firstChild,n = i.firstChild,s = n.firstChild,l = n.nextSibling;return e.$$click = Kn, Et(i, function () {var e = pt(function () {return !!o.description;}, !0);return function () {return e() && function () {var e = Rn.cloneNode(!0),i = e.firstChild;return e.$$click = function () {return r();}, Ce(function () {return i.className = "icon linter-icon icon-" + (t.descriptionShow ? "chevron-down" : "chevron-right");}), e;}();};}(), n), Et(i, function () {var e = pt(function () {return !!function (e) {if (2 === e.version && e.solutions && e.solutions.length) return !0;return !1;}(o);}, !0);return function () {return e() && ft(Dn.FixButton, { onClick: function onClick() {return function (e) {var t = e.solutions,i = (0, O.getActiveTextEditor)();null !== i && 2 === e.version && Array.isArray(t) && t.length > 0 && (0, O.applySolution)(i, (0, O.sortSolutions)(t)[0]);}(o);} });};}(), n), Et(s, function () {return a.showProviderName ? "".concat(o.linterName, ": ") : "";}), Et(n, function () {return o.excerpt;}, null), Et(l, function () {var e = pt(function () {return !(!o.reference || !o.reference.file);}, !0);return function () {return e() && function () {var e = Hn.cloneNode(!0);return e.$$click = function () {return (0, O.visitMessage)(o, !0);}, e;}();};}(), null), Et(l, function () {var e = pt(function () {return !!o.url;}, !0);return function () {return e() && function () {var e = Wn.cloneNode(!0);return e.$$click = function () {return (0, O.openExternally)(o);}, e;}();};}(), null), Et(e, function () {var e = pt(function () {return !!t.descriptionShow;}, !0);return function () {return e() && function () {var e = Vn.cloneNode(!0);return Ce(function () {return e.innerHTML = t.description || "Loading...";}), e;}();};}(), null), Ce(function () {return i.className = "linter-excerpt ".concat(o.severity);}), e;}();};Cn["default"] = An;var _n = On(ai),Nn = Mn(s),Dn = {},jn = yt,Bn = wt;Object.defineProperty(Dn, "__esModule", { value: !0 });var In = function In(e) {return function () {var t = $n.cloneNode(!0);return Pt(t, "click", e.onClick, !0), t;}();};Dn.FixButton = In;var $n = jn('<button class="btn fix-btn">Fix</button>', 2);Bn(["click"]);var Fn = Tn('<div class="linter-message"><div><div class="linter-text"><div class="provider-name"></div></div><div class="linter-buttons-right"></div></div></div>', 10),Rn = Tn('<a href="#"><span></span></a>', 4),Hn = Tn('<a href="#"><span class="icon linter-icon icon-alignment-aligned-to"></span></a>', 4),Wn = Tn('<a href="#"><span class="icon linter-icon icon-link"></span></a>', 4),Vn = Tn('<div class="linter-line"></div>', 2);var qn;function Kn(e) {if (!(e.target instanceof HTMLElement)) return;var t = function (e) {for (; e && !e.classList.contains("linter-line");) {if (e instanceof HTMLAnchorElement) return e.href;e = e.parentElement;}return null;}(e.target);if (!t) return;var _Nn$parse = Nn.parse(t, !0),i = _Nn$parse.protocol,n = _Nn$parse.hostname,s = _Nn$parse.query;if ("atom:" === i && "linter" === n && s && s.file) {var _e22 = s.file,_t23 = s.row,_i24 = s.column;(0, O.openFile)(Array.isArray(_e22) ? _e22[0] : _e22, { row: _t23 ? parseInt(Array.isArray(_t23) ? _t23[0] : _t23, 10) : 0, column: _i24 ? parseInt(Array.isArray(_i24) ? _i24[0] : _i24, 10) : 0 });}}Ln(["click"]);var Gn = vn(Cn = Cn["default"]),zn = {};Object.defineProperty(zn, "__esModule", { value: !0 });var Un = (Yn = void 0, Qn = zn.makeOverlaySelectable = Yn, Zn = zn.overlayFocusFix = Qn, ts = zn.focusEditor = Zn, is = zn.blurEditor = ts, zn.makeOverLayCopyable = is);zn.copyListener = Un;var Yn = function Yn(e, t) {var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;t.setAttribute("tabindex", "-1"), t.style.userSelect && "none" !== t.style.userSelect || (t.style.userSelect = "text"), i && Jn(e, t), t.classList.add("native-key-bindings");};function Jn(e, t) {var i = atom.views.getView(e).getComponent();t.addEventListener("mousedown", function () {es(i), t.addEventListener("mouseleave", function () {Xn(i);});});}zn.makeOverlaySelectable = Yn;var Qn = Jn;function Xn(e) {null == e || e.didFocus();}zn.overlayFocusFix = Qn;var Zn = Xn;function es(e) {null == e || e.didBlurHiddenInput({ relatedTarget: null });}zn.focusEditor = Zn;var ts = es;zn.blurEditor = ts;var is = function is(e) {e.addEventListener("mouseenter", function () {e.addEventListener("keydown", ns);}), e.addEventListener("mouseleave", function () {e.removeEventListener("keydown", ns);});};function ns(_x) {return _ns.apply(this, arguments);}function _ns() {_ns = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee7(e) {var t, i, _e28;return _regenerator["default"].wrap(function _callee7$(_context7) {while (1) {switch (_context7.prev = _context7.next) {case 0:if (!(e.preventDefault(), e.ctrlKey && "c" === e.key)) {_context7.next = 4;break;}_e28 = null !== (i = null === (t = document.getSelection()) || void 0 === t ? void 0 : t.toString()) && void 0 !== i ? i : "";_context7.next = 4;return navigator.clipboard.writeText(_e28);case 4:case "end":return _context7.stop();}}}, _callee7);}));return _ns.apply(this, arguments);}zn.makeOverLayCopyable = is, Un = ns, zn.copyListener = Un;var ss = yn('<div class="linter-messages"></div>', 2);wn = /*#__PURE__*/function () {function wn(e, t, i) {var _this13 = this;(0, _classCallCheck2["default"])(this, wn);this.marker = void 0, this.element = document.createElement("div"), this.emitter = new c(), this.messages = void 0, this.subscriptions = new u(), this.messages = e, this.marker = i.markBufferRange([t, t]), this.marker.onDidDestroy(function () {return _this13.emitter.emit("did-destroy");});var n = new En["default"]();(0, zn.makeOverlaySelectable)(i, this.element), this.element.id = "linter-tooltip", i.decorateMarker(this.marker, { type: "overlay", item: this.element }), this.subscriptions.add(this.emitter, n), vt(function () {return function (e, t) {return function () {var i = ss.cloneNode(!0);return Et(i, ft(ht, { each: e, children: function children(e) {if (2 === e.version) return ft(Gn["default"], { get key() {return e.key;}, delegate: t, message: e });} })), i;}();}(e, n);}, this.element), setTimeout(function () {var e = _this13.element.getBoundingClientRect().height,n = i.getLineHeightInPixels();if (e < (t.row - i.getFirstVisibleScreenRow()) * n) {var _t24 = _this13.element.parentElement;_t24 && (_t24.style.transform = "translateY(-".concat(2 + n + e, "px)"));} else {var _e23 = i.getElement().querySelector(".datatip-overlay");if (_e23) {var _t25 = _this13.element.parentElement;_t25 && (_t25.style.transform = "translateY(".concat(_e23.clientHeight, "px)"));}}_this13.element.style.visibility = "visible";}, 50);}(0, _createClass2["default"])(wn, [{ key: "isValid", value: function isValid(e, t) {if (1 !== this.messages.length || !t.has(this.messages[0].key)) return !1;var i = (0, O.$range)(this.messages[0]);return Boolean(i && i.containsPoint(e));} }, { key: "onDidDestroy", value: function onDidDestroy(e) {return this.emitter.on("did-destroy", e);} }, { key: "dispose", value: function dispose() {this.emitter.emit("did-destroy"), this.subscriptions.dispose();} }]);return wn;}(), mn["default"] = wn;var rs = Ti(mn = mn["default"]),os = {};Object.defineProperty(os, "__esModule", { value: !0 });var as = function as(e, t, i) {var n = i.getComponent().pixelPositionForMouseEvent(e),s = i.getComponent().screenPositionForPixelPosition(n);if (Number.isNaN(s.row) || Number.isNaN(s.column)) return null;var r = i.pixelPositionForScreenPosition(s),o = n.top - r.top,a = n.left - r.left;if ((0 === o || o > 0 && o < 20 || o < 0 && o > -20) && (0 === a || a > 0 && a < 20 || a < 0 && a > -20)) return t.bufferPositionForScreenPosition(s);return null;};os.getBufferPositionFromMouseEvent = as;var ls = function ls(_ref7) {var e = _ref7.event,t = _ref7.editor,i = _ref7.editorElement,n = _ref7.tooltipElement,s = _ref7.screenPosition;var r = i.getComponent().pixelPositionForMouseEvent(e),o = i.pixelPositionForScreenPosition(s),a = r.top - o.top,l = r.left - o.left,u = t.getLineHeightInPixels(),c = n.offsetHeight + u,d = n.offsetWidth;if (a > 0) {if (a > c + 1.5 * u) return !1;} else if (a < 0 && a < -1.5 * u) return !1;if (l > 0) {if (l > d + 30) return !1;} else if (l < 0 && l < -30) return !1;return !0;};os.mouseEventNearPosition = ls;var us = function us(e, t) {var i = e;do {if (i.matches(t)) return !0;i = i.parentElement;} while (i && "HTML" !== i.nodeName);return !1;};os.hasParent = us;Li = /*#__PURE__*/function () {function Li(e) {var _this14 = this;(0, _classCallCheck2["default"])(this, Li);this.textEditor = void 0, this.gutter = null, this.tooltip = null, this.emitter = new c(), this.markers = new Map(), this.messages = new Map(), this.showTooltip = !0, this.subscriptions = new u(), this.cursorPosition = null, this.gutterPosition = void 0, this.tooltipFollows = "Both", this.showDecorations = void 0, this.showProviderName = !0, this.ignoreTooltipInvocation = !1, this.currentLineMarker = null, this.lastRange = void 0, this.lastIsEmpty = void 0, this.lastCursorPositions = new WeakMap(), this.textEditor = e;var t = null;this.subscriptions.add(this.emitter, e.onDidDestroy(function () {_this14.dispose();}), new d(function () {var e;null === (e = t) || void 0 === e || e.dispose();}), atom.config.observe("linter-ui-default.showProviderName", function (e) {_this14.showProviderName = e;}), atom.config.observe("linter-ui-default.showDecorations", function (e) {var t = void 0 !== _this14.showDecorations;_this14.showDecorations = e, t && _this14.updateGutter();}), atom.config.observe("linter-ui-default.gutterPosition", function (e) {var t = void 0 !== _this14.gutterPosition;_this14.gutterPosition = e, t && _this14.updateGutter();}), atom.config.observe("linter-ui-default.showTooltip", function (e) {_this14.showTooltip = e, !_this14.showTooltip && _this14.tooltip && _this14.removeTooltip();}), atom.config.observe("linter-ui-default.tooltipFollows", function (e) {_this14.tooltipFollows = e, t && t.dispose(), t = new u(), "Mouse" !== e && "Both" !== e || t.add(_this14.listenForMouseMovement()), "Keyboard" !== e && "Both" !== e || t.add(_this14.listenForKeyboardMovement()), _this14.removeTooltip();}), e.onDidChangeCursorPosition(function (_ref8) {var e = _ref8.cursor,t = _ref8.newBufferPosition;var i = _this14.lastCursorPositions.get(e);i && i.isEqual(t) || (_this14.lastCursorPositions.set(e, t), _this14.ignoreTooltipInvocation = !1), "Mouse" === _this14.tooltipFollows && _this14.removeTooltip();}), e.getBuffer().onDidChangeText(function () {e.getCursors().forEach(function (e) {_this14.lastCursorPositions.set(e, e.getBufferPosition());}), "Mouse" !== _this14.tooltipFollows && (_this14.ignoreTooltipInvocation = !0, _this14.removeTooltip());})), this.updateGutter(), this.listenForCurrentLine();}(0, _createClass2["default"])(Li, [{ key: "listenForCurrentLine", value: function listenForCurrentLine() {var _this15 = this;this.subscriptions.add(this.textEditor.observeCursors(function (e) {var t = function t(_ref9) {var e = _ref9.start,t = _ref9.end;var i = _this15.gutter;if (!i || _this15.subscriptions.disposed) return;var n = f.fromObject([e, t]),s = f.fromObject([[e.row, 0], [t.row, 1 / 0]]),r = n.isEmpty();if (e.row !== t.row && 0 === n.end.column && s.end.row--, _this15.lastRange && _this15.lastRange.isEqual(s) && r === _this15.lastIsEmpty) return;_this15.currentLineMarker && (_this15.currentLineMarker.destroy(), _this15.currentLineMarker = null), _this15.lastRange = s, _this15.lastIsEmpty = r, _this15.currentLineMarker = _this15.textEditor.markScreenRange(s, { invalidate: "never" });var o = document.createElement("span");o.className = "line-number cursor-line linter-cursor-line " + (r ? "cursor-line-no-selection" : ""), i.decorateMarker(_this15.currentLineMarker, { item: o, "class": "linter-row" });},i = e.getMarker(),n = new u();n.add(i.onDidChange(function (_ref10) {var e = _ref10.newHeadScreenPosition,i = _ref10.newTailScreenPosition;t({ start: e, end: i });})), n.add(e.onDidDestroy(function () {_this15.subscriptions.remove(n), n.dispose();})), n.add(new d(function () {_this15.currentLineMarker && (_this15.currentLineMarker.destroy(), _this15.currentLineMarker = null);})), _this15.subscriptions.add(n), t(i.getScreenRange());}));} }, { key: "listenForMouseMovement", value: function listenForMouseMovement() {var _this16 = this;var e = atom.views.getView(this.textEditor);return (0, gn["default"])(e, "mousemove", (0, pn["default"])(function (t) {if (!e.getComponent() || _this16.subscriptions.disposed || !(0, os.hasParent)(t.target, "div.scroll-view")) return;var i = _this16.tooltip;i && (0, os.mouseEventNearPosition)({ event: t, editor: _this16.textEditor, editorElement: e, tooltipElement: i.element, screenPosition: i.marker.getStartScreenPosition() }) || (_this16.cursorPosition = (0, os.getBufferPositionFromMouseEvent)(t, _this16.textEditor, e), _this16.ignoreTooltipInvocation = !1, _this16.cursorPosition ? _this16.updateTooltip(_this16.cursorPosition) : _this16.removeTooltip());}, 100), { passive: !0 });} }, { key: "listenForKeyboardMovement", value: function listenForKeyboardMovement() {var _this17 = this;return this.textEditor.onDidChangeCursorPosition((0, pn["default"])(function (_ref11) {var e = _ref11.newBufferPosition;_this17.cursorPosition = e, _this17.updateTooltip(e);}, 16));} }, { key: "updateGutter", value: function updateGutter() {var _this18 = this;if (this.removeGutter(), !this.showDecorations) return void (this.gutter = null);var e = "Left" === this.gutterPosition ? -100 : 100;this.gutter = this.textEditor.addGutter({ name: "linter-ui-default", priority: e }), this.markers.forEach(function (e, t) {var i = _this18.messages.get(t);if (i) {var _iterator7 = _createForOfIteratorHelper(e),_step7;try {for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {var _t26 = _step7.value;_this18.decorateMarker(i, _t26, "gutter");}} catch (err) {_iterator7.e(err);} finally {_iterator7.f();}}});} }, { key: "removeGutter", value: function removeGutter() {if (this.gutter) try {this.gutter.destroy();} catch (e) {}} }, { key: "updateTooltip", value: function updateTooltip(e) {var _this19 = this;if (!e || this.tooltip && this.tooltip.isValid(e, this.messages)) return;if (this.removeTooltip(), !this.showTooltip) return;if (this.ignoreTooltipInvocation) return;var t = (0, O.filterMessagesByRangeOrPoint)(this.messages, this.textEditor.getPath(), e);if (!t.length) return;this.tooltip = new rs["default"](t, e, this.textEditor);var i = this.tooltip.marker;t.forEach(function (e) {_this19.saveMarker(e.key, i);}), this.tooltip.onDidDestroy(function () {_this19.tooltip = null;});} }, { key: "removeTooltip", value: function removeTooltip() {this.tooltip && this.tooltip.marker.destroy();} }, { key: "apply", value: function apply(e, t) {var _this20 = this;var i = this.textEditor.getBuffer();for (var _e24 = 0, _i25 = t.length; _e24 < _i25; _e24++) {var _i26 = t[_e24];this.destroyMarker(_i26.key);}var _loop3 = function _loop3(_t27, _n21) {var n = e[_t27],s = (0, O.$range)(n);if (!s) return "continue";var r = i.markRange(s, { invalidate: "never" });_this20.decorateMarker(n, r), r.onDidChange(function (_ref12) {var e = _ref12.oldHeadPosition,t = _ref12.newHeadPosition,i = _ref12.isValid;!i || 0 === t.row && 0 !== e.row || 2 === n.version && (n.location.position = r.previousEventState.range);});};for (var _t27 = 0, _n21 = e.length; _t27 < _n21; _t27++) {var _ret2 = _loop3(_t27, _n21);if (_ret2 === "continue") continue;}this.updateTooltip(this.cursorPosition);} }, { key: "decorateMarker", value: function decorateMarker(e, t) {var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "both";this.saveMarker(e.key, t), this.messages.set(e.key, e), "both" !== i && "editor" !== i || this.textEditor.decorateMarker(t, { type: "text", "class": "linter-highlight linter-".concat(e.severity) });var n = this.gutter;if (n && ("both" === i || "gutter" === i)) {var _i27 = document.createElement("span");_i27.className = "linter-gutter linter-gutter-".concat(e.severity, " icon icon-").concat(e.icon || "primitive-dot"), n.decorateMarker(t, { "class": "linter-row", item: _i27 });}} }, { key: "saveMarker", value: function saveMarker(e, t) {var i = this.markers.get(e) || [];i.push(t), this.markers.set(e, i);} }, { key: "destroyMarker", value: function destroyMarker(e) {var t = this.markers.get(e);t && t.forEach(function (e) {e && e.destroy();}), this.markers["delete"](e), this.messages["delete"](e);} }, { key: "onDidDestroy", value: function onDidDestroy(e) {return this.emitter.on("did-destroy", e);} }, { key: "dispose", value: function dispose() {this.emitter.emit("did-destroy"), this.subscriptions.dispose(), this.removeGutter(), this.removeTooltip();} }]);return Li;}(), Oi["default"] = Li;var cs = Ci(Oi = Oi["default"]);Mi = /*#__PURE__*/function () {function Mi() {var _this21 = this;(0, _classCallCheck2["default"])(this, Mi);this.editors = new Set(), this.messages = [], this.firstRender = !0, this.subscriptions = new u(), this.subscriptions.add(atom.workspace.observeTextEditors(function (e) {if ((0, O.isLargeFile)(e)) {var _t28 = atom.notifications.addWarning("Linter: Large/Minified file detected", { detail: "Adding inline linter markers are skipped for this file for performance reasons (linter pane is still active)", dismissable: !0, buttons: [{ text: "Force enable", onDidClick: function onDidClick() {_this21.getEditor(e), _t28.dismiss();} }, { text: "Change threshold", onDidClick: function () {var _onDidClick = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee6() {var e;return _regenerator["default"].wrap(function _callee6$(_context6) {while (1) {switch (_context6.prev = _context6.next) {case 0:_context6.next = 2;return atom.workspace.open("atom://config/packages/linter-ui-default");case 2:null === (e = document.querySelectorAll(".control-group")[16]) || void 0 === e || e.scrollIntoView();_t28.dismiss();case 4:case "end":return _context6.stop();}}}, _callee6);}));function onDidClick() {return _onDidClick.apply(this, arguments);}return onDidClick;}() }] });setTimeout(function () {_t28.dismiss();}, 5e3);} else _this21.getEditor(e);}), atom.workspace.getCenter().observeActivePaneItem(function (e) {_this21.editors.forEach(function (t) {t.textEditor !== e && t.removeTooltip();});}));}(0, _createClass2["default"])(Mi, [{ key: "isFirstRender", value: function isFirstRender() {return this.firstRender;} }, { key: "update", value: function update(_ref13) {var e = _ref13.messages,t = _ref13.added,i = _ref13.removed;this.messages = e, this.firstRender = !1;var _ref14 = (0, O.getEditorsMap)(this),n = _ref14.editorsMap,s = _ref14.filePaths;t.forEach(function (e) {if (!e || !e.location) return;var t = (0, O.$file)(e);t && n.has(t) && n.get(t).added.push(e);}), i.forEach(function (e) {if (!e || !e.location) return;var t = (0, O.$file)(e);t && n.has(t) && n.get(t).removed.push(e);}), s.forEach(function (e) {if (n.has(e)) {var _n$get = n.get(e),_t29 = _n$get.added,_i28 = _n$get.removed,_s20 = _n$get.editors;(_t29.length || _i28.length) && _s20.forEach(function (e) {return e.apply(_t29, _i28);});}});} }, { key: "getEditor", value: function getEditor(e) {var _this22 = this;var _iterator8 = _createForOfIteratorHelper(this.editors),_step8;try {for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {var _t30 = _step8.value;if (_t30.textEditor === e) return _t30;}} catch (err) {_iterator8.e(err);} finally {_iterator8.f();}var t = new cs["default"](e);return this.editors.add(t), t.onDidDestroy(function () {_this22.editors["delete"](t);}), t.subscriptions.add(e.onDidChangePath(function () {t.dispose(), _this22.getEditor(e);})), t.subscriptions.add(e.onDidChangeGrammar(function () {t.dispose(), _this22.getEditor(e);})), t.apply((0, O.filterMessages)(this.messages, e.getPath()), []), t;} }, { key: "dispose", value: function dispose() {var _iterator9 = _createForOfIteratorHelper(this.editors),_step9;try {for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {var _e25 = _step9.value;_e25.dispose();}} catch (err) {_iterator9.e(err);} finally {_iterator9.f();}this.subscriptions.dispose();} }]);return Mi;}(), Si["default"] = Mi;var ds = P(Si = Si["default"]),fs = {},hs = e;Object.defineProperty(fs, "__esModule", { value: !0 });var ps = void 0;fs["default"] = ps;var gs = hs(Ai),ms = hs(r),vs = {},ys = e;Object.defineProperty(vs, "__esModule", { value: !0 });var ws = xs;vs.getChunks = ws;var bs = Ss;vs.getChunksByProjects = bs;var Ps = Cs;vs.mergeChange = Ps;var ks = function ks(e, t) {var i = {},n = atom.project.getPaths();return t.forEach(function (t) {var s = (0, O.$file)(t);if (s) {("Files" === e ? [s] : Ss(s, n)).forEach(function (e) {return Cs(i, e, t.severity);});}}), i;};vs.calculateDecorations = ks;var Es = ys(n);function xs(e, t) {var i = [],n = e.split(Es["default"].sep);for (; n.length;) {var _e26 = n.join(Es["default"].sep);if (_e26 && (i.push(_e26), _e26 === t)) break;n.pop();}return i;}function Ss(e, t) {var i = t.find(function (t) {return e.startsWith(t);});return i ? xs(e, i) : [e];}function Cs(e, t, i) {e[t] || (e[t] = { info: !1, error: !1, warning: !1 }), e[t][i] = !0;}var Ms = /*#__PURE__*/function () {function Ms() {var _this23 = this;(0, _classCallCheck2["default"])(this, Ms);this.messages = [], this.decorations = {}, this.subscriptions = new u(), this.decorateOnTreeView = void 0, this.subscriptions.add(atom.config.observe("linter-ui-default.decorateOnTreeView", function (e) {if (void 0 === _this23.decorateOnTreeView) _this23.decorateOnTreeView = e;else if ("None" === e) _this23.update([]), _this23.decorateOnTreeView = e;else {var _t31 = _this23.messages;_this23.decorateOnTreeView = e, _this23.update(_t31);}})), setTimeout(function () {var e = Ms.getElement();e && _this23.subscriptions.add((0, ms["default"])(e, "click", (0, gs["default"])(function () {_this23.update();}), { passive: !0 }));}, 100);}(0, _createClass2["default"])(Ms, [{ key: "update", value: function update() {var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;Array.isArray(e) && (this.messages = e);var t = this.messages,i = Ms.getElement(),n = this.decorateOnTreeView;i && "None" !== n && this.applyDecorations((0, vs.calculateDecorations)(n, t));} }, { key: "applyDecorations", value: function applyDecorations(e) {var _this24 = this;var t = Ms.getElement();if (!t) return;var i = {},n = {};Object.keys(this.decorations).forEach(function (n) {if ({}.hasOwnProperty.call(_this24.decorations, n) && !e[n]) {var _e27 = i[n] || (i[n] = Ms.getElementByPath(t, n));_e27 && function (e) {var t;null === (t = e.querySelector("linter-decoration")) || void 0 === t || t.remove();}(_e27);}}), Object.keys(e).forEach(function (s) {if (!{}.hasOwnProperty.call(e, s)) return;var r = i[s] || (i[s] = Ms.getElementByPath(t, s));r && (!function (e, t) {var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;var n = null;i && (n = e.querySelector("linter-decoration"));null !== n ? n.className = "" : (n = document.createElement("linter-decoration"), e.appendChild(n));t.error ? n.classList.add("linter-error") : t.warning ? n.classList.add("linter-warning") : t.info && n.classList.add("linter-info");}(r, e[s], Boolean(_this24.decorations[s])), n[s] = e[s]);}), this.decorations = n;} }, { key: "dispose", value: function dispose() {this.subscriptions.dispose();} }], [{ key: "getElement", value: function getElement() {return document.querySelector(".tree-view");} }, { key: "getElementByPath", value: function getElementByPath(e, t) {return e.querySelector("[data-path=".concat(CSS.escape(t), "]"));} }]);return Ms;}();ps = Ms, fs["default"] = ps;var Os = P(fs = fs["default"]);k = /*#__PURE__*/function () {function k() {var _this25 = this;(0, _classCallCheck2["default"])(this, k);this.name = "Linter", this.panel = void 0, this.signal = new Pi["default"](), this.editors = void 0, this.treeview = void 0, this.commands = new ni["default"](), this.messages = [], this.statusBar = new yi["default"](), this.intentions = new xi["default"](), this.subscriptions = new u(), this.idleCallbacks = new Set(), this.subscriptions.add(this.signal, this.commands, this.statusBar);var e = window.requestIdleCallback(function () {_this25.idleCallbacks["delete"](e), _this25.panel = new Xt["default"](), _this25.panel.update(_this25.messages);});this.idleCallbacks.add(e);var t = window.requestIdleCallback(function () {_this25.idleCallbacks["delete"](t), _this25.subscriptions.add(atom.config.observe("linter-ui-default.showDecorations", function (e) {e && !_this25.editors ? (_this25.editors = new ds["default"](), _this25.editors.update({ added: _this25.messages, removed: [], messages: _this25.messages })) : !e && _this25.editors && (_this25.editors.dispose(), _this25.editors = null);}));});this.idleCallbacks.add(t);}(0, _createClass2["default"])(k, [{ key: "render", value: function render(e) {var t = this.editors;this.messages = e.messages, t && (t.isFirstRender() ? t.update({ added: e.messages, removed: [], messages: e.messages }) : t.update(e)), this.treeview || (this.treeview = new Os["default"](), this.subscriptions.add(this.treeview)), this.treeview.update(e.messages), this.panel && this.panel.update(e.messages), this.commands.update(e.messages), this.intentions.update(e.messages), this.statusBar.update(e.messages);} }, { key: "didBeginLinting", value: function didBeginLinting(e, t) {this.signal.didBeginLinting(e, t);} }, { key: "didFinishLinting", value: function didFinishLinting(e, t) {this.signal.didFinishLinting(e, t);} }, { key: "dispose", value: function dispose() {this.idleCallbacks.forEach(function (e) {return window.cancelIdleCallback(e);}), this.idleCallbacks.clear(), this.subscriptions.dispose(), this.panel && this.panel.dispose(), this.editors && this.editors.dispose();} }]);return k;}(), b["default"] = k;var Ts = h(b = b["default"]);var Ls = new Set(),As = new Set();var _s, Ns;