function e(e,t,i,s){Object.defineProperty(e,t,{get:i,set:s,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}function i(e){return e.location.position}function s(e){return e.location.file}function n(e){return atom.project.relativizePath(s(e)||"")[1]}function o(){let e=atom.workspace.getCenter().getActivePaneItem();const t=null!==e&&atom.workspace.isTextEditor(e);return!t&&e&&Ge&&e.getURI&&"atom://linter-ui-default"===e.getURI()&&(!Ge.isAlive||Ge.isAlive())?e=Ge:Ge=e,t?e:null}function r(e,t,i=null){const n=[];return e.forEach((e=>{e&&e.location&&(null!==t&&s(e)!==t||i&&e.severity!==i||n.push(e))})),n}function l(e,t,n){const o=[],r="Point"===n.constructor.name?new Fe(n,n):Fe.fromObject(n);return e.forEach((e=>{const n=s(e),l=i(e);n&&l&&n===t&&"function"==typeof l.intersectsWith&&l.intersectsWith(r)&&o.push(e)})),o}function a(e,t){const i={searchAllPanes:!0};t&&(i.initialLine=t.row,i.initialColumn=t.column),atom.workspace.open(e,i)}function c(e,t=!1){let n,o;if(t){if(!e.reference||!e.reference.file)return void console.warn("[Linter-UI-Default] Message does not have a valid reference. Ignoring");n=e.reference.file,o=e.reference.position}else{const t=i(e);n=s(e),t&&(o=t.start)}n&&a(n,o)}function u(e){2===e.version&&e.url&&Re.openExternal(e.url)}function d(e,t){const s=t[0],o="asc"===t[1]?1:-1;return e.sort(((e,t)=>{if("severity"===s){const i=Ue[e.severity],s=Ue[t.severity];if(i!==s)return o*(i>s?1:-1)}if("linterName"===s){const i=e.severity.localeCompare(t.severity);if(0!==i)return o*i}if("file"===s){const i=n(e),s=i.length,r=n(t),l=r.length;if(s!==l)return o*(s>l?1:-1);if(i!==r)return o*i.localeCompare(r)}if("line"===s){const s=i(e),n=i(t);if(s&&!n)return 1;if(n&&!s)return-1;if(s&&n){if(s.start.row!==n.start.row)return o*(s.start.row>n.start.row?1:-1);if(s.start.column!==n.start.column)return o*(s.start.column>n.start.column?1:-1)}}return 0}))}function h(e){return e.sort(((e,t)=>void 0===e.priority||void 0===t.priority?0:t.priority-e.priority))}function f(e,t){if("apply"in t)return t.apply(),!0;const i=t.position,s=t.replaceWith;if("currentText"in t){const s=t.currentText,n=e.getTextInBufferRange(i);if(s!==n)return console.warn("[linter-ui-default] Not applying fix because text did not match the expected one","expected",s,"but got",n),!1}return e.setTextInBufferRange(i,s),!0}function p(e){Qe.context=e}function m(e,t){t&&(ot=t);const i=rt,s=ot,n=0===e.length?it:{owned:null,cleanups:null,context:null,owner:s,attached:!!t};let o;ot=n,rt=null;try{T((()=>o=e((()=>I(n)))),!0)}finally{rt=i,ot=s}return o}function g(e,t=!0,i){const s={value:e,observers:null,observerSlots:null,pending:tt,comparator:t?"function"==typeof t?t:Xe:void 0};return[P.bind(s),x.bind(s)]}function v(e,t){C(S(e,t,!1))}function w(e,t,i=!0){const s=S(e,t,!0);return s.pending=tt,s.observers=null,s.observerSlots=null,s.state=0,s.comparator=i?"function"==typeof i?i:Xe:void 0,C(s),P.bind(s)}function y(e){if(lt)return e();const t=lt=[],i=e();return lt=null,T((()=>{for(let e=0;t.length>e;e+=1){const i=t[e];if(i.pending!==tt){const e=i.pending;i.pending=tt,x.call(i,e)}}}),!1),i}function b(e){let t,i=rt;return rt=null,t=e(),rt=i,t}function k(e){((e,t)=>{et=A;const i=S(e,void 0,!1);i.user=!0,ct&&ct.push(i)})((()=>b(e)))}function P(){if(this.state&&this.sources){const e=at;at=null,1===this.state?C(this):N(this),at=e}if(rt){const e=this.observers?this.observers.length:0;rt.sources?(rt.sources.push(this),rt.sourceSlots.push(e)):(rt.sources=[this],rt.sourceSlots=[e]),this.observers?(this.observers.push(rt),this.observerSlots.push(rt.sources.length-1)):(this.observers=[rt],this.observerSlots=[rt.sources.length-1])}return ut&&ut.running&&ut.sources.has(this)?this.tValue:this.value}function x(e,t){if(this.comparator)if(ut&&ut.running&&ut.sources.has(this)){if(this.comparator(this.tValue,e))return e}else if(this.comparator(this.value,e))return e;return lt?(this.pending===tt&&lt.push(this),this.pending=e,e):(ut?((ut.running||!t&&ut.sources.has(this))&&(ut.sources.add(this),this.tValue=e),ut.running||(this.value=e)):this.value=e,!this.observers||at&&!this.observers.length||T((()=>{for(let e=0;this.observers.length>e;e+=1){const t=this.observers[e];ut&&ut.running&&ut.disposed.has(t)||(t.observers&&2!==t.state&&D(t),t.state=1,t.pure?at.push(t):ct.push(t))}if(at.length>1e6)throw at=[],Error("Potential Infinite Loop Detected.")}),!1),e)}function C(e){if(!e.fn)return;I(e);const t=ot,i=rt,s=dt;rt=ot=e,E(e,e.value,s),ut&&!ut.running&&ut.sources.has(e)&&(ut.running=!0,E(e,e.tValue,s),ut.running=!1),rt=i,ot=t}function E(e,t,i){let s;try{s=e.fn(t)}catch(e){O(e)}e.updatedAt&&e.updatedAt>i||(e.observers&&e.observers.length?x.call(e,s,!0):ut&&ut.running&&e.pure?(ut.sources.add(e),e.tValue=s):e.value=s,e.updatedAt=i)}function S(e,t,i){const s={fn:e,state:1,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ot,context:null,pure:i};return null===ot||ot!==it&&(ut&&ut.running&&ot.pure?ot.tOwned?ot.tOwned.push(s):ot.tOwned=[s]:ot.owned?ot.owned.push(s):ot.owned=[s]),s}function L(e){let t,i=1===e.state&&e;if(e.suspense&&b(e.suspense.inFallback))return e.suspense.effects.push(e);const s=ut&&ut.running;for(;(e.fn||s&&e.attached)&&(e=e.owner);){if(s&&ut.disposed.has(e))return;2===e.state?t=e:1===e.state&&(i=e,t=void 0)}if(t){const n=at;if(at=null,N(t),at=n,!i||1!==i.state)return;if(s)for(e=i;(e.fn||e.attached)&&(e=e.owner);)if(ut.disposed.has(e))return}i&&C(i)}function T(e,t){if(at)return e();let i=!1;t||(at=[]),ct?i=!0:ct=[],dt++;try{e()}catch(e){O(e)}finally{(e=>{if(at&&(M(at),at=null),e)return;let t;if(ut&&ut.running){if(ut.promises.size)return ut.running=!1,ut.effects.push.apply(ut.effects,ct),ct=null,void nt(!0);const e=ut.sources;t=ut.cb,ut=null,y((()=>{e.forEach((e=>{if(e.value=e.tValue,e.owned)for(let t=0,i=e.owned.length;i>t;t++)I(e.owned[t]);e.tOwned&&(e.owned=e.tOwned),delete e.tValue,delete e.tOwned})),nt(!1)}))}ct.length?y((()=>{et(ct),ct=null})):ct=null,t&&t.forEach((e=>e()))})(i)}}function M(e){for(let t=0;e.length>t;t++)L(e[t])}function A(e){let t,i=0;for(t=0;e.length>t;t++){const s=e[t];s.user?e[i++]=s:L(s)}const s=e.length;for(t=0;i>t;t++)L(e[t]);for(t=s;e.length>t;t++)L(e[t])}function N(e){e.state=0;for(let t=0;e.sources.length>t;t+=1){const i=e.sources[t];i.sources&&(1===i.state?L(i):2===i.state&&N(i))}}function D(e){for(let t=0;e.observers.length>t;t+=1){const i=e.observers[t];i.state||(i.state=2,i.observers&&D(i))}}function I(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),i=e.sourceSlots.pop(),s=t.observers;if(s&&s.length){const e=s.pop(),n=t.observerSlots.pop();s.length>i&&(e.sourceSlots[n]=i,s[i]=e,t.observerSlots[i]=n)}}if(ut&&ut.running&&e.pure){if(e.tOwned){for(t=0;e.tOwned.length>t;t++)I(e.tOwned[t]);delete e.tOwned}B(e,!0)}else if(e.owned){for(t=0;e.owned.length>t;t++)I(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;e.cleanups.length>t;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function B(e,t){if(t||(e.state=0,ut.disposed.add(e)),e.owned)for(let t=0;e.owned.length>t;t++)B(e.owned[t])}function O(e){const t=Ze&&F(ot,Ze);if(!t)throw e;t.forEach((t=>t(e)))}function F(e,t){return e&&(e.context&&e.context[t]||e.owner&&F(e.owner,t))}function R(e,t){let i=e[pt];if(!i){Object.defineProperty(e,pt,{value:i=new Proxy(e,gt)});let t=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let n=0,o=t.length;o>n;n++){const o=t[n];if(s[o].get){const t=s[o].get.bind(i);Object.defineProperty(e,o,{get:t})}}}return i}function j(e){return null!=e&&"object"==typeof e&&(!e.__proto__||e.__proto__===Object.prototype||Array.isArray(e))}function $(e,t=new Set){let i,s,n,o;if(i=null!=e&&e[ht])return i;if(!j(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,o=e.length;o>i;i++)n=e[i],(s=$(n,t))!==n&&(e[i]=s)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);let i=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let l=0,a=i.length;a>l;l++)o=i[l],r[o].get||(n=e[o],(s=$(n,t))!==n&&(e[o]=s))}return e}function H(e){let t=e[ft];return t||Object.defineProperty(e,ft,{value:t={}}),t}function _(){const[e,t]=g(void 0,!1);return e.set=t,e}function q(e,t,i){if(e[t]===i)return;const s=Array.isArray(e),n=e.length,o=s||!(t in e);void 0===i?delete e[t]:e[t]=i;let r,l=H(e);(r=l[t])&&r.set(),s&&e.length!==n&&(r=l.length)&&r.set(),o&&(r=l._)&&r.set()}function V(e,t,i=[]){let s,n=e;if(t.length>1){s=t.shift();const o=typeof s,r=Array.isArray(e);if(Array.isArray(s)){for(let n=0;s.length>n;n++)V(e,[s[n]].concat(t),[s[n]].concat(i));return}if(r&&"function"===o){for(let n=0;e.length>n;n++)s(e[n],n)&&V(e,[n].concat(t),[n].concat(i));return}if(r&&"object"===o){const{from:n=0,to:o=e.length-1,by:r=1}=s;for(let s=n;o>=s;s+=r)V(e,[s].concat(t),[s].concat(i));return}if(t.length>1)return void V(e[s],t,[s].concat(i));n=e[s],i=[s].concat(i)}let o=t[0];"function"==typeof o&&(o=o(n,i),o===n)||void 0===s&&null==o||(o=$(o),void 0===s||j(n)&&j(o)&&!Array.isArray(o)?((e,t)=>{const i=Object.keys(t);for(let s=0;i.length>s;s+=1){const n=i[s];q(e,n,t[n])}})(n,o):q(e,s,o))}function W(e,t){if(Qe.context){const i=Qe.context;p({...Qe.context,id:`${Qe.context.id}${Qe.context.count++}.`,count:0});const s=b((()=>e(t)));return p(i),s}return b((()=>e(t)))}function z(e){return w(((e,t,i={})=>{let s=[],n=[],o=[],r=0,l=t.length>1?[]:null,a=ot;return c=()=>{for(let e=0,t=o.length;t>e;e++)o[e]()},null===ot||(null===ot.cleanups?ot.cleanups=[c]:ot.cleanups.push(c)),()=>{function c(e){if(o[d]=e,l){const[e,i]=g(d);return l[d]=i,t(h[d],e)}return t(h[d])}let u,d,h=e()||[];return b((()=>{let e,t,f,p,g,v,w,y,b,k=h.length;if(0===k){if(0!==r){for(u=0;r>u;u++)o[u]();o=[],s=[],n=[],r=0,l&&(l=[])}i.fallback&&(s=[vt],n[0]=m((e=>(o[0]=e,i.fallback())),a),r=1)}else if(0===r){for(d=0;k>d;d++)s[d]=h[d],n[d]=m(c,a);r=k}else{for(f=Array(k),p=Array(k),l&&(g=Array(k)),v=0,w=Math.min(r,k);w>v&&s[v]===h[v];v++);for(w=r-1,y=k-1;w>=v&&y>=v&&s[w]===h[y];w--,y--)f[y]=n[w],p[y]=o[w],l&&(g[y]=l[w]);for(e=new Map,t=Array(y+1),d=y;d>=v;d--)b=h[d],u=e.get(b),t[d]=void 0===u?-1:u,e.set(b,d);for(u=v;w>=u;u++)b=s[u],d=e.get(b),void 0!==d&&-1!==d?(f[d]=n[u],p[d]=o[u],l&&(g[d]=l[u]),d=t[d],e.set(b,d)):o[u]();for(d=v;k>d;d++)d in f?(n[d]=f[d],o[d]=p[d],l&&(l[d]=g[d],l[d](d))):n[d]=m(c,a);r=n.length=k,s=h.slice(0)}return n}))};var c})((()=>e.each),e.children,"fallback"in e&&{fallback(){return e.fallback}}||void 0),void 0,!1)}function G(e,t){return w(e,void 0,t)}function U(e,t,i){let s=i.length,n=t.length,o=s,r=0,l=0,a=t[n-1].nextSibling,c=null;for(;n>r||o>l;)if(n===r){const t=s>o?l?i[l-1].nextSibling:i[o-l]:a;for(;o>l;)e.insertBefore(i[l++],t)}else if(o===l)for(;n>r;)c&&c.has(t[r])||e.removeChild(t[r]),r++;else if(t[r]===i[l])r++,l++;else if(t[n-1]===i[o-1])n--,o--;else if(t[r]===i[o-1]&&i[l]===t[n-1]){const s=t[--n].nextSibling;e.insertBefore(i[l++],t[r++].nextSibling),e.insertBefore(i[--o],s),t[n]=i[o]}else{if(!c){c=new Map;let e=l;for(;o>e;)c.set(i[e],e++)}const s=c.get(t[r]);if(null!=s)if(s>l&&o>s){let a,u=r,d=1;for(;++u<n&&o>u&&null!=(a=c.get(t[u]))&&a===s+d;)d++;if(d>s-l){const n=t[r];for(;s>l;)e.insertBefore(i[l++],n)}else e.replaceChild(i[l++],t[r++])}else r++;else e.removeChild(t[r++])}}function K(e,t,i){let s;return m((n=>{s=n,Z(t,e(),t.firstChild?null:void 0,i)})),()=>{s(),t.textContent=""}}function Y(e,t,i){const s=document.createElement("template");if(s.innerHTML=e,t&&s.innerHTML.split("<").length-1!==t)throw`Template html does not match input:\n${s.innerHTML}\n\n${e}`;let n=s.content.firstChild;return i&&(n=n.firstChild),n}function J(e){const t=document[wt]||(document[wt]=new Set);for(let i=0,s=e.length;s>i;i++){const s=e[i];t.has(s)||(t.add(s),document.addEventListener(s,ee))}}function Q(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function X(e,t,i,s){s?Array.isArray(i)?(e["$$"+t]=i[0],e[`$$${t}Data`]=i[1]):e["$$"+t]=i:e.addEventListener(t,Array.isArray(i)?e=>i[0](i[1],e):i)}function Z(e,t,i,s){if(void 0===i||s||(s=[]),"function"!=typeof t)return te(e,t,s,i);v((s=>te(e,t(),s,i)),s)}function ee(e){const t="$$"+e.type;let i=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==i&&Object.defineProperty(e,"target",{configurable:!0,value:i}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>i});null!==i;){const s=i[t];if(s){const n=i[t+"Data"];if(void 0!==n?s(n,e):s(e),e.cancelBubble)return}i=i.host&&i.host!==i&&i.host instanceof Node?i.host:i.parentNode}}function te(e,t,i,s,n){for(;"function"==typeof i;)i=i();if(t===i)return i;const o=typeof t,r=void 0!==s;if(e=r&&i[0]&&i[0].parentNode||e,"string"===o||"number"===o)if("number"===o&&(t=""+t),r){let n=i[0];n&&3===n.nodeType?n.data=t:n=document.createTextNode(t),i=ne(e,i,s,n)}else i=""!==i&&"string"==typeof i?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===o){if(Qe.context)return i;i=ne(e,i,s)}else{if("function"===o)return v((()=>{let n=t();for(;"function"==typeof n;)n=n();i=te(e,n,i,s)})),()=>i;if(Array.isArray(t)){const o=[];if(ie(o,t,n))return v((()=>i=te(e,o,i,s,!0))),()=>i;if(Qe.context&&i.length)return i;if(0===o.length){if(i=ne(e,i,s),r)return i}else Array.isArray(i)?0===i.length?se(e,o,s):U(e,i,o):null==i||""===i?se(e,o):U(e,r&&i||[e.firstChild],o);i=o}else if(t instanceof Node){if(Array.isArray(i)){if(r)return i=ne(e,i,s,t);ne(e,i,null,t)}else null!=i&&""!==i&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);i=t}else console.warn("Skipped inserting",t)}return i}function ie(e,t,i){let s=!1;for(let n=0,o=t.length;o>n;n++){let o,r=t[n];if(r instanceof Node)e.push(r);else if(null==r||!0===r||!1===r);else if(Array.isArray(r))s=ie(e,r)||s;else if("string"==(o=typeof r))e.push(document.createTextNode(r));else if("function"===o)if(i){for(;"function"==typeof r;)r=r();s=ie(e,Array.isArray(r)?r:[r])||s}else e.push(r),s=!0;else e.push(document.createTextNode(""+r))}return s}function se(e,t,i){for(let s=0,n=t.length;n>s;s++)e.insertBefore(t[s],i)}function ne(e,t,i,s){if(void 0===i)return e.textContent="";const n=s||document.createTextNode("");if(t.length){let s=!1;for(let o=t.length-1;o>=0;o--){const r=t[o];if(n!==r){const t=r.parentNode===e;s||o?t&&e.removeChild(r):t?e.replaceChild(n,r):e.insertBefore(n,i)}else s=!0}}else e.insertBefore(n,i);return[n]}function oe(e){function t(){const t=n();return void 0!==t?t:void 0!==e.defaultSortDirection?e.defaultSortDirection:[null,null]}function i(){const i=t();null===i[0]&&void 0!==e.defaultSortDirection?l(a(r(),e.defaultSortDirection)):null!==i[0]&&l(a(r(),i))}var s;const[n,o]=g(),[r,l]=g(e.rows,!1);C(S((()=>{l(e.rows)}),undefined,!0));const a=null!==(s=e.rowSorter)&&void 0!==s?s:ue,{headerRenderer:c=le,bodyRenderer:u=ae,getRowID:d=ce,accessors:h}=e;return void 0===e.columns&&(e.columns=((e,t=0)=>{const i=Object.keys(e[t]),s=i.length,n=Array(s);for(let e=0;s>e;e++)n[e]={id:i[e]};return n})(e.rows,e.representitiveRowNumber)),i(),(()=>{const s=yt.cloneNode(!0),n=s.firstChild,l=n.nextSibling;return Z(n.firstChild,W(z,{get each(){return e.columns},children(e){const s=!1!==e.sortable;return(()=>{const n=bt.cloneNode(!0);var r;return X(n,"click",s?(r=e.id,e=>{o(((e,t,i)=>{let s;return s=i?[null,null]:e[0]===t?[e[0],"asc"===e[1]?"desc":"asc"]:[t,"asc"],s})(t(),r,e.shiftKey)),i()}):void 0,!0),n.className=s?"sortable":void 0,Z(n,(()=>c(e)),null),Z(n,(()=>s?((e,t)=>{let i;return i=null===e[0]||e[0]!==t?St:"asc"===e[1]?Et:Ct,(()=>{const e=xt.cloneNode(!0);return Z(e,i),e})()})(t(),e.id):void 0),null),v((()=>Q(n,"id",h?e.id+"":void 0))),n})()}})),Z(l,W(z,{get each(){return r()},children(t){const i=h?d(t):void 0;return(()=>{const s=kt.cloneNode(!0);return Q(s,"id",i),Z(s,W(z,{get each(){return e.columns},children(e){return(()=>{const s=Pt.cloneNode(!0);return X(s,"click",void 0!==e.onClick?i=>e.onClick(i,t):void 0,!0),Z(s,(()=>u(t,e.id))),v((()=>Q(s,"id",i?`${i}.${e.id}`:void 0))),s})()}})),s})()}})),v((t=>{var i;const n="solid-simple-table "+(null!==(i=e.className)&&void 0!==i?i:""),o=e.style;return n!==t._v$&&(s.className=t._v$=n),t._v$2=((e,t,i={})=>{const s=e.style;if("string"==typeof t)return s.cssText=t;let n,o;for(o in"string"==typeof i&&(i={}),i)null==t[o]&&s.removeProperty(o),delete i[o];for(o in t)n=t[o],n!==i[o]&&(s.setProperty(o,n),i[o]=n);return i})(s,o,t._v$2),t}),{_v$:void 0,_v$2:void 0}),s})()}function re(e){return"string"==typeof e?e:JSON.stringify(e)}function le(e){var t;return null!==(t=e.label)&&void 0!==t?t:e.id}function ae(e,t){return re("object"==typeof e?e[t]:e)}function ce(e){return re(e)}function ue(e,t){if(!e.length)return e;let i;const s=t[0];return i="object"==typeof e[0]?e.sort(((e,t)=>{const i=e[s],n=t[s];return i===n?0:n>i?-1:1})):e.sort(),"desc"===t[1]?i.reverse():i}function de(e){const[t,i]=g(e.delegate.filteredMessages,!1);k((()=>{e.delegate.onDidChangeMessages((e=>{i(e)}))}));const s=[{id:"severity",label:"Severity"},{id:"linterName",label:"Provider"},{id:"excerpt",label:"Description",onClick:fe,sortable:!1},{id:"line",label:"Line",onClick:fe}];return"Entire Project"===e.delegate.panelRepresents&&s.push({id:"file",label:"File",onClick:fe}),(()=>{const e=Lt.cloneNode(!0);return Q(e,"tabindex",-1),e.style.setProperty("overflowY","scroll"),e.style.setProperty("height","100%"),Z(e,W(oe,{get rows(){return t()},columns:s,defaultSortDirection:["severity","asc"],rowSorter:d,accessors:!0,getRowID(e){return e.key},bodyRenderer:he,style:{width:"100%"},className:"linter dark"})),e})()}function he(e,t){const s=i(e);switch(t){case"file":return n(e);case"line":return s?`${s.start.row+1}:${s.start.column+1}`:"";case"excerpt":return e.excerpt;case"severity":return(()=>{const t=Tt.cloneNode(!0);return Z(t,(()=>Ke[e.severity])),v((()=>t.className="solid-simple-table linter "+e.severity)),t})();default:return e[t]}}function fe(e,t){"A"!==e.target.tagName&&(("darwin"===process.platform?e.metaKey:e.ctrlKey)?e.shiftKey?u(t):c(t,!0):c(t))}function pe(e){const t=atom.workspace.paneContainerForItem(e);return t&&"object"==typeof t.state&&"number"==typeof t.state.size&&"function"==typeof t.render?t:null}function me(e){const t=document.createElement("a");return t.classList.add("icon-"+e),t.appendChild(document.createTextNode("")),t}function ge(e){return(()=>{const t=di.cloneNode(!0);return X(t,"click",e.onClick,!0),t})()}function ve(e){async function t(o=null){const l=i.description||e.message.description;if(!i.descriptionShow||o)if("string"==typeof l||o){void 0===vi&&(vi=(await ze("dftzP")).default);const e=vi(o||l);s({description:e,descriptionShow:!0})}else if("function"==typeof l){if(s({...i,descriptionShow:!0}),n())return;r(!0);const e=await l();if("string"!=typeof e)throw Error("Expected result to be string, got: "+typeof e);try{await t(e)}catch(e){console.log("[Linter] Error getting descriptions",e),r(!1),i.descriptionShow&&await t()}}else console.error("[Linter] Invalid description detected, expected string or function but got:",typeof l);else s({...i,descriptionShow:!1})}const[i,s]=((e,t)=>{const i=$({description:"",descriptionShow:!1}||{});return[R(i),(...e)=>{y((()=>V(i,e)))}]})(),[n,r]=g(!1,!1);k((()=>{e.delegate.onShouldUpdate((()=>{s({description:"",descriptionShow:!1})})),e.delegate.onShouldExpand((async()=>{i.descriptionShow||await t()})),e.delegate.onShouldCollapse((async()=>{i.descriptionShow&&await t()}))}));const{message:l,delegate:a}=e;return(()=>{const e=hi.cloneNode(!0),s=e.firstChild,n=s.firstChild,r=n.firstChild,d=n.nextSibling;return e.$$click=we,Z(s,(()=>{const e=G((()=>!!l.description),!0);return()=>e()&&(()=>{const e=fi.cloneNode(!0),s=e.firstChild;return e.$$click=()=>t(),v((()=>s.className="icon linter-icon icon-"+(i.descriptionShow?"chevron-down":"chevron-right"))),e})()})(),n),Z(s,(()=>{const e=G((()=>!!(e=>!(2!==e.version||!e.solutions||!e.solutions.length))(l)),!0);return()=>e()&&W(ge,{onClick(){return(e=>{const t=e.solutions,i=o();null!==i&&2===e.version&&Array.isArray(t)&&t.length>0&&f(i,h(t)[0])})(l)}})})(),n),Z(r,(()=>a.showProviderName?l.linterName+": ":"")),Z(n,(()=>l.excerpt),null),Z(d,(()=>{const e=G((()=>!(!l.reference||!l.reference.file)),!0);return()=>e()&&(()=>{const e=pi.cloneNode(!0);return e.$$click=()=>c(l,!0),e})()})(),null),Z(d,(()=>{const e=G((()=>!!l.url),!0);return()=>e()&&(()=>{const e=mi.cloneNode(!0);return e.$$click=()=>u(l),e})()})(),null),Z(e,(()=>{const e=G((()=>!!i.descriptionShow),!0);return()=>e()&&(()=>{const e=gi.cloneNode(!0);return v((()=>e.innerHTML=i.description||"Loading...")),e})()})(),null),v((()=>s.className="linter-excerpt "+l.severity)),e})()}function we(e){if(!(e.target instanceof HTMLElement))return;const t=(e=>{for(;e&&!e.classList.contains("linter-line");){if(e instanceof HTMLAnchorElement)return e.href;e=e.parentElement}return null})(e.target);if(!t)return;const{protocol:i,hostname:s,query:n}=He(t,!0);if("atom:"===i&&"linter"===s&&n&&n.file){const{file:e,row:t,column:i}=n;a(Array.isArray(e)?e[0]:e,{row:t?parseInt(Array.isArray(t)?t[0]:t,10):0,column:i?parseInt(Array.isArray(i)?i[0]:i,10):0})}}function ye(e,t){const i=atom.views.getView(e).getComponent();t.addEventListener("mousedown",(()=>{ke(i),t.addEventListener("mouseleave",(()=>{be(i)}))}))}function be(e){null==e||e.didFocus()}function ke(e){null==e||e.didBlurHiddenInput({relatedTarget:null})}async function Pe(e){var t,i;if(e.preventDefault(),e.ctrlKey&&"c"===e.key){const e=null!==(i=null===(t=document.getSelection())||void 0===t?void 0:""+t)&&void 0!==i?i:"";await navigator.clipboard.writeText(e)}}function xe(e,t){if(e.largeFileMode)return 1e5;const i=e.getLineCount();return t>i?0:i}function Ce(e,t,i=e.getLineCount()){const s=e.getBuffer();for(let e=0,n=i;n>e;e++){const i=s.lineLengthForRow(e);if(i>t)return i}return 0}function Ee(){atom.config.get("linter-ui-default.useBusySignal")&&atom.packages.getLoadedPackage("linter-ui-default").metadata["package-deps"].push("busy-signal");const e=window.requestIdleCallback((()=>{Si.delete(e);{const{install:e}=Ne;e("linter-ui-default")}}));Si.add(e)}function Se(){Si.forEach((e=>window.cancelIdleCallback(e))),Si.clear();for(const e of Li)e.dispose();Li.clear()}function Le(){const e=new Ei;return Li.add(e),Ti&&e.signal.attach(Ti),e}function Te(){return Array.from(Li).map((e=>e.intentions))}function Me(e){Ti=e,Li.forEach((e=>{e.signal.attach(Ti)}))}function Ae(e){Mi=e,Li.forEach((e=>{e.statusBar.attach(Mi)}))}var Ne=require("atom-package-deps"),De=require("atom"),Ie=De.CompositeDisposable,Be=De.Emitter,Oe=De.Disposable,Fe=De.Range,Re=require("electron").shell,je=t(require("assert")),$e=t(require("disposable-event")),He=require("url").parse,_e=t(require("path")),qe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},Ve={},We={},ze=qe.parcelRequiree95c;null==ze&&((ze=e=>{if(e in Ve)return Ve[e].exports;if(e in We){let t=We[e];delete We[e];let i={id:e,exports:{}};return Ve[e]=i,t.call(i.exports,i,i.exports),i.exports}var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}).register=(e,t)=>{We[e]=t},qe.parcelRequiree95c=ze),e(module.exports,"activate",(()=>Ee)),e(module.exports,"provideIntentions",(()=>Te)),e(module.exports,"consumeStatusBar",(()=>Ae)),e(module.exports,"deactivate",(()=>Se)),e(module.exports,"consumeSignal",(()=>Me)),e(module.exports,"provideUI",(()=>Le));let Ge=null;const Ue={error:3,warning:2,info:1},Ke={error:"Error",warning:"Warning",info:"Info"},Ye=["center","bottom"];class Je{constructor(){this.emitter=new Be,this.messages=[],this.filteredMessages=[],this.subscriptions=new Ie;let e=null;this.subscriptions.add(atom.config.observe("linter-ui-default.panelRepresents",(e=>{const t=void 0!==this.panelRepresents;this.panelRepresents=e,t&&this.update()})),atom.workspace.getCenter().observeActivePaneItem((()=>{e&&(e.dispose(),e=null);const t=o();if(t){"Entire Project"!==this.panelRepresents&&this.update();let i=-1;e=t.onDidChangeCursorPosition((({newBufferPosition:e})=>{i!==e.row&&"Current Line"===this.panelRepresents&&(i=e.row,this.update())}))}("Entire Project"!==this.panelRepresents||t)&&this.update()})),new Oe((()=>{e&&e.dispose()})))}getFilteredMessages(){let e=[];if("Entire Project"===this.panelRepresents)e=this.messages;else if("Current File"===this.panelRepresents){const t=o();if(!t)return[];e=r(this.messages,t.getPath())}else if("Current Line"===this.panelRepresents){const t=o();if(!t)return[];const i=t.getCursors()[0].getBufferRow();e=l(this.messages,t.getPath(),Fe.fromObject([[i,0],[i,1/0]]))}return e}update(e=null){Array.isArray(e)&&(this.messages=e),this.filteredMessages=this.getFilteredMessages(),this.emitter.emit("observe-messages",this.filteredMessages)}onDidChangeMessages(e){return this.emitter.on("observe-messages",e)}dispose(){this.subscriptions.dispose()}}const Qe={},Xe=(e,t)=>e===t;let Ze=null,et=M;const tt={},it={owned:null,cleanups:null,context:null,owner:null},[st,nt]=g(!1);var ot=null,rt=null;let lt=null,at=null,ct=null,ut=null,dt=0;const ht=Symbol(),ft=Symbol(),pt=Symbol(),mt=Symbol(),gt={get(e,t,i){if(t===ht)return e;if(t===pt)return i;const s=e[t];if(t===ft||"__proto__"===t)return s;const n=j(s);if(rt&&("function"!=typeof s||e.hasOwnProperty(t))){let i,o;n&&(i=H(s))&&(o=i._||(i._=_()),o()),i=H(e),o=i[t]||(i[t]=_()),o()}return n?R(s):s},set:()=>!0,deleteProperty:()=>!0,getOwnPropertyDescriptor(e,t){const i=Reflect.getOwnPropertyDescriptor(e,t);return!i||i.get||t===pt||t===ft||t===mt||(delete i.value,delete i.writable,i.get=()=>e[pt][t]),i}},vt=Symbol();(e=>{Symbol()})(),new Set(["className","indeterminate","value","allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","truespeed"]),new Set(["innerHTML","textContent","innerText","children"]),new Set(["beforeinput","click","dblclick","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]);const wt=Symbol(),yt=Y("<table><thead><tr></tr></thead><tbody></tbody></table>",8),bt=Y("<th></th>",2),kt=Y("<tr></tr>",2),Pt=Y("<td></td>",2),xt=Y('<span class="sort-icon"></span>',2),Ct="↑",Et="↓",St="⇅";J(["click"]);const Lt=Y('<div id="linter-panel"></div>',2),Tt=Y("<div></div>",2);class Mt{constructor(e){this.element=document.createElement("div"),this.subscriptions=new Ie,this.panelHeight=100,this.alwaysTakeMinimumSpace=!0,this.subscriptions.add(atom.config.observe("linter-ui-default.panelHeight",(e=>{const t="number"==typeof this.panelHeight;this.panelHeight=e,t&&this.doPanelResize(!0)})),atom.config.observe("linter-ui-default.alwaysTakeMinimumSpace",(e=>{this.alwaysTakeMinimumSpace=e}))),this.doPanelResize(),K((()=>W(de,{delegate:e})),this.element)}doPanelResize(e=!1){const t=pe(this);if(null===t)return;let i=null;const s=atom.views.getView(t);if(s&&this.alwaysTakeMinimumSpace){const e=s.querySelector(".list-inline.tab-bar.inset-panel"),t=e?e.getClientRects()[0]:null,n=this.element.querySelector("table"),o=n?n.getClientRects()[0]:null;t&&o&&(i=t.height+o.height+1)}let n=null;const o=null===i||e?this.panelHeight:Math.min(i,this.panelHeight);null===this.lastSetPaneHeight||t.state.size===this.lastSetPaneHeight||e||(n=t.state.size),this.lastSetPaneHeight=o,t.state.size=o,t.render(t.state),null!==n&&atom.config.set("linter-ui-default.panelHeight",n)}getURI(){return"atom://linter-ui-default"}getTitle(){return"Linter"}getDefaultLocation(){return"bottom"}getAllowedLocations(){return Ye}getPreferredHeight(){return atom.config.get("linter-ui-default.panelHeight")}dispose(){this.subscriptions.dispose();const e=pe(this);var t;null===e||this.alwaysTakeMinimumSpace||e.state.size===this.panelHeight||(atom.config.set("linter-ui-default.panelHeight",e.state.size),null===(t=e.paneForItem(this))||void 0===t||t.destroyItem(this,!0))}}class At{constructor(){this.panel=null,this.element=document.createElement("div"),this.delegate=new Je,this.messages=[],this.deactivating=!1,this.subscriptions=new Ie,this.showPanelConfig=!0,this.hidePanelWhenEmpty=!0,this.showPanelStateMessages=!1,this.subscriptions.add(this.delegate,atom.config.observe("linter-ui-default.hidePanelWhenEmpty",(e=>{this.hidePanelWhenEmpty=e,this.refresh()})),atom.workspace.onDidDestroyPane((({pane:e})=>{(null===this.panel||e.getItems().includes(this.panel))&&!this.deactivating&&(this.panel=null,atom.config.set("linter-ui-default.showPanel",!1))})),atom.workspace.onDidDestroyPaneItem((({item:e})=>{e instanceof Mt&&!this.deactivating&&(this.panel=null,atom.config.set("linter-ui-default.showPanel",!1))})),atom.config.observe("linter-ui-default.showPanel",(e=>{this.showPanelConfig=e,this.refresh()})),atom.workspace.getCenter().observeActivePaneItem((()=>{this.showPanelStateMessages=!!this.delegate.filteredMessages.length,this.refresh()}))),this.activationTimer=window.requestIdleCallback((()=>{let e=!0;const t=atom.workspace.getBottomDock();this.subscriptions.add(t.onDidChangeActivePaneItem((t=>{this.panel&&"bottom"===this.getPanelLocation()&&(e?e=!1:t===this.panel!==this.showPanelConfig&&atom.config.set("linter-ui-default.showPanel",!this.showPanelConfig))})),t.onDidChangeVisible((e=>{this.panel&&"bottom"===this.getPanelLocation()&&(!e&&this.showPanelConfig&&this.hidePanelWhenEmpty&&!this.showPanelStateMessages||t.getActivePaneItem()===this.panel&&e!==this.showPanelConfig&&atom.config.set("linter-ui-default.showPanel",!this.showPanelConfig))}))),this.activate()}))}getPanelLocation(){if(!this.panel)return null;const e=atom.workspace.paneContainerForItem(this.panel);return e&&e.location||null}async activate(){this.panel||(this.panel=new Mt(this.delegate),await atom.workspace.open(this.panel,{activatePane:!1,activateItem:!1,searchAllPanes:!0}),this.update(),this.refresh())}update(e=null){e&&(this.messages=e),this.delegate.update(this.messages),this.showPanelStateMessages=!!this.delegate.filteredMessages.length,this.refresh()}async refresh(){const e=this.panel;if(null===e)return void(this.showPanelConfig&&await this.activate());const t=atom.workspace.paneContainerForItem(e);if(!t||"bottom"!==t.location)return;const i=t.getActivePaneItem()===e;var s;!this.showPanelConfig||this.hidePanelWhenEmpty&&!this.showPanelStateMessages?i&&t.hide():(i||null===(s=t.paneForItem(e))||void 0===s||s.activateItem(e),t.show(),e.doPanelResize())}dispose(){this.deactivating=!0,this.panel&&this.panel.dispose(),this.subscriptions.dispose(),window.cancelIdleCallback(this.activationTimer)}}class Nt{constructor(){this.messages=[],this.subscriptions=new Ie,this.subscriptions.add(atom.commands.add("atom-workspace",{"linter-ui-default:next":()=>this.move(!0,!0),"linter-ui-default:previous":()=>this.move(!1,!0),"linter-ui-default:next-error":()=>this.move(!0,!0,"error"),"linter-ui-default:previous-error":()=>this.move(!1,!0,"error"),"linter-ui-default:next-warning":()=>this.move(!0,!0,"warning"),"linter-ui-default:previous-warning":()=>this.move(!1,!0,"warning"),"linter-ui-default:next-info":()=>this.move(!0,!0,"info"),"linter-ui-default:previous-info":()=>this.move(!1,!0,"info"),"linter-ui-default:next-in-current-file":()=>this.move(!0,!1),"linter-ui-default:previous-in-current-file":()=>this.move(!1,!1),"linter-ui-default:next-error-in-current-file":()=>this.move(!0,!1,"error"),"linter-ui-default:previous-error-in-current-file":()=>this.move(!1,!1,"error"),"linter-ui-default:next-warning-in-current-file":()=>this.move(!0,!1,"warning"),"linter-ui-default:previous-warning-in-current-file":()=>this.move(!1,!1,"warning"),"linter-ui-default:next-info-in-current-file":()=>this.move(!0,!1,"info"),"linter-ui-default:previous-info-in-current-file":()=>this.move(!1,!1,"info"),"linter-ui-default:toggle-panel"(){atom.config.set("linter-ui-default.showPanel",!atom.config.get("linter-ui-default.showPanel"))},"linter-ui-default:expand-tooltip"(){},"linter-ui-default:collapse-tooltip"(){}}),atom.commands.add("atom-text-editor:not([mini])",{"linter-ui-default:apply-all-solutions":()=>this.applyAllSolutions()}),atom.commands.add("#linter-panel",{"core:copy"(){const e=document.getSelection();e&&atom.clipboard.write(""+e)}}))}applyAllSolutions(){const e=o();je(e,"textEditor was null on a command supposed to run on text-editors only"),d(r(this.messages,e.getPath()),["line","desc"]).forEach((t=>{2===t.version&&Array.isArray(t.solutions)&&t.solutions.length>0&&f(e,h(t.solutions)[0])}))}move(e,t,n=null){const l=o(),a=l&&l.getPath()||NaN,u=d(r(this.messages,t?null:a,n),["file","asc"]),h=e?-1:1;if(!l){const t=e?u[0]:u[u.length-1];return void(t&&c(t))}const f=l.getCursorBufferPosition();e||u.reverse();let p=null,m=!1;for(let e=0,t=u.length;t>e;e++){const t=u[e],n=s(t),o=i(t);if(m||n!==a||(m=!0),n&&o){if(m&&n!==a){p=t;break}if(n===a&&f.compare(o.start)===h){p=t;break}}}!p&&u.length&&(p=u[0]),p&&c(p)}update(e){this.messages=e}dispose(){this.subscriptions.dispose()}}class Dt{constructor(){this.item=document.createElement("div"),this.itemErrors=me("stop"),this.itemWarnings=me("alert"),this.itemInfos=me("info"),this.emitter=new Be,this.subscriptions=new Ie,this.item.appendChild(this.itemErrors),this.item.appendChild(this.itemWarnings),this.item.appendChild(this.itemInfos),this.item.classList.add("inline-block"),this.item.classList.add("linter-status-count"),this.subscriptions.add(this.emitter,atom.tooltips.add(this.itemErrors,{title:"Linter Errors"}),atom.tooltips.add(this.itemWarnings,{title:"Linter Warnings"}),atom.tooltips.add(this.itemInfos,{title:"Linter Infos"})),this.itemErrors.onclick=()=>this.emitter.emit("click","error"),this.itemWarnings.onclick=()=>this.emitter.emit("click","warning"),this.itemInfos.onclick=()=>this.emitter.emit("click","info"),this.update(0,0,0)}setVisibility(e,t){t?this.item.classList.remove("hide-"+e):this.item.classList.add("hide-"+e)}update(e,t,i){this.itemErrors.childNodes[0].textContent=e+"",this.itemWarnings.childNodes[0].textContent=t+"",this.itemInfos.childNodes[0].textContent=i+"",e?this.itemErrors.classList.add("text-error"):this.itemErrors.classList.remove("text-error"),t?this.itemWarnings.classList.add("text-warning"):this.itemWarnings.classList.remove("text-warning"),i?this.itemInfos.classList.add("text-info"):this.itemInfos.classList.remove("text-info")}onDidClick(e){return this.emitter.on("click",e)}dispose(){this.subscriptions.dispose()}}class It{constructor(){this.element=new Dt,this.messages=[],this.subscriptions=new Ie,this.subscriptions.add(this.element,atom.config.observe("linter-ui-default.statusBarRepresents",(e=>{const t=void 0!==this.statusBarRepresents;this.statusBarRepresents=e,t&&this.update()})),atom.config.observe("linter-ui-default.statusBarClickBehavior",(e=>{const t=void 0!==this.statusBarClickBehavior;this.statusBarClickBehavior=e,t&&this.update()})),atom.config.observe("linter-ui-default.showStatusBar",(e=>{this.element.setVisibility("config",e)})),atom.workspace.getCenter().observeActivePaneItem((e=>{const t=atom.workspace.isTextEditor(e);this.element.setVisibility("pane",t),t&&"Current File"===this.statusBarRepresents&&this.update()}))),this.element.onDidClick((e=>{const t=atom.views.getView(atom.workspace);"Toggle Panel"===this.statusBarClickBehavior?atom.commands.dispatch(t,"linter-ui-default:toggle-panel"):"Toggle Status Bar Scope"===this.statusBarClickBehavior?atom.config.set("linter-ui-default.statusBarRepresents","Entire Project"===this.statusBarRepresents?"Current File":"Entire Project"):atom.commands.dispatch(t,`linter-ui-default:next-${e}${"Current File"===this.statusBarRepresents?"-in-current-file":""}`)}))}update(e=null){e?this.messages=e:e=this.messages;const t={error:0,warning:0,info:0},i=o(),n=i&&i.getPath()||NaN;e.forEach((e=>{"Entire Project"!==this.statusBarRepresents&&s(e)!==n||("error"===e.severity?t.error++:"warning"===e.severity?t.warning++:t.info++)})),this.element.update(t.error,t.warning,t.info)}attach(e){let t=null;this.subscriptions.add(atom.config.observe("linter-ui-default.statusBarPosition",(i=>{t&&t.destroy(),t=e[`add${i}Tile`]({item:this.element.item,priority:"Left"===i?0:1e3})}))),this.subscriptions.add(new Oe((()=>{t&&t.destroy()})))}dispose(){this.subscriptions.dispose()}}class Bt{constructor(){this.executing=new Set,this.providerTitles=new Set,this.useBusySignal=!0,this.subscriptions=new Ie,this.subscriptions.add(atom.config.observe("linter-ui-default.useBusySignal",(e=>{this.useBusySignal=e})))}attach(e){this.provider=e.create(),this.update()}update(){const e=this.provider;if(!e)return;if(!this.useBusySignal)return;const t=new Map,i=new Set;for(const{filePath:e,linter:i}of this.executing){let s=t.get(e);s||t.set(e,s=[]),s.push(i.name)}for(const[s,n]of t){const t=s?" on "+atom.project.relativizePath(s)[1]:"";n.forEach((s=>{const n=`${s}${t}`;i.add(n),this.providerTitles.has(n)||(this.providerTitles.add(n),e.add(n))}))}this.providerTitles.forEach((t=>{i.has(t)||(e.remove(t),this.providerTitles.delete(t))})),t.clear()}getExecuting(e,t){for(const i of this.executing)if(i.linter===e&&i.filePath===t)return i;return null}didBeginLinting(e,t){this.getExecuting(e,t)||(this.executing.add({linter:e,filePath:t}),this.update())}didFinishLinting(e,t){const i=this.getExecuting(e,t);i&&(this.executing.delete(i),this.update())}dispose(){this.provider&&this.provider.clear(),this.providerTitles.clear(),this.executing.clear(),this.subscriptions.dispose()}}class Ot{getIntentions({textEditor:e,bufferPosition:t}){let s=[];const n=r(this.messages,e.getPath());for(const o of n){if(!o.solutions||!o.solutions.length)continue;const n=i(o);if(!n||!n.containsPoint(t))continue;const r=o.linterName||"Linter",l=o.solutions;2===o.version&&Array.isArray(l)&&l.length>0&&(s=s.concat(l.map((t=>({priority:t.priority?t.priority+200:200,icon:"tools",title:t.title||`Fix ${r} issue`,selected(){f(e,t)}})))))}return s}update(e){this.messages=e}constructor(){this.messages=[],this.grammarScopes=["*"]}}var Ft,Rt;Rt=e=>{var t=typeof e;return null!=e&&("object"==t||"function"==t)};var jt,$t={},Ht="object"==typeof self&&self&&self.Object===Object&&self,_t="object"==typeof qe&&qe&&qe.Object===Object&&qe||Ht||Function("","return this")();jt=()=>$t.Date.now();var qt,Vt,Wt,zt=/\s/;Wt=e=>{for(var t=e.length;t--&&zt.test(e.charAt(t)););return t},Vt=e=>e?e.slice(0,Wt(e)+1).replace(/^\s+/,""):e;var Gt,Ut,Kt,Yt,Jt=Object.prototype,Qt=Jt.hasOwnProperty,Xt=Jt.toString,Zt=(Gt=($t=_t).Symbol)?Gt.toStringTag:void 0;Yt=e=>{var t=Qt.call(e,Zt),i=e[Zt];try{e[Zt]=void 0;var s=!0}catch(e){}var n=Xt.call(e);return s&&(t?e[Zt]=i:delete e[Zt]),n};var ei,ti={}.toString;ei=e=>ti.call(e);var ii,si=Gt?Gt.toStringTag:void 0;Kt=e=>null==e?void 0===e?"[object Undefined]":"[object Null]":si&&si in Object(e)?Yt(e):ei(e),ii=e=>null!=e&&"object"==typeof e,Ut=e=>"symbol"==typeof e||ii(e)&&"[object Symbol]"==Kt(e);var ni=/^[-+]0x[0-9a-f]+$/i,oi=/^0b[01]+$/i,ri=/^0o[0-7]+$/i,li=parseInt;qt=e=>{if("number"==typeof e)return e;if(Ut(e))return NaN;if(Rt(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Rt(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Vt(e);var i=oi.test(e);return i||ri.test(e)?li(e.slice(2),i?2:8):ni.test(e)?NaN:+e};var ai=Math.max,ci=Math.min;Ft=function(e,t,i){function s(t){var i=c,s=u;return c=u=void 0,m=t,h=e.apply(s,i)}function n(e){return m=e,f=setTimeout(r,t),g?s(e):h}function o(e){var i=e-p;return void 0===p||i>=t||0>i||v&&e-m>=d}function r(){var e=jt();if(o(e))return l(e);f=setTimeout(r,(e=>{var i=t-(e-p);return v?ci(i,d-(e-m)):i})(e))}function l(e){return f=void 0,w&&c?s(e):(c=u=void 0,h)}function a(){var e=jt(),i=o(e);if(c=arguments,u=this,p=e,i){if(void 0===f)return n(p);if(v)return clearTimeout(f),f=setTimeout(r,t),s(p)}return void 0===f&&(f=setTimeout(r,t)),h}var c,u,d,h,f,p,m=0,g=!1,v=!1,w=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return t=qt(t)||0,Rt(i)&&(g=!!i.leading,d=(v="maxWait"in i)?ai(qt(i.maxWait)||0,t):d,w="trailing"in i?!!i.trailing:w),a.cancel=()=>{void 0!==f&&clearTimeout(f),m=0,c=p=u=f=void 0},a.flush=()=>void 0===f?h:l(jt()),a};class ui{constructor(){this.emitter=new Be,this.expanded=!1,this.subscriptions=new Ie,this.subscriptions.add(this.emitter,atom.config.observe("linter-ui-default.showProviderName",(e=>{const t=void 0!==this.showProviderName;this.showProviderName=e,t&&this.emitter.emit("should-update")})),atom.commands.add("atom-workspace",{"linter-ui-default:expand-tooltip":e=>{var t;this.expanded||(this.expanded=!0,this.emitter.emit("should-expand"),!0===(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)&&document.body.addEventListener("keyup",(function e(){document.body.removeEventListener("keyup",e),atom.commands.dispatch(atom.views.getView(atom.workspace),"linter-ui-default:collapse-tooltip")}),{passive:!0}))},"linter-ui-default:collapse-tooltip":()=>{this.expanded=!1,this.emitter.emit("should-collapse")}}))}onShouldUpdate(e){return this.emitter.on("should-update",e)}onShouldExpand(e){return this.emitter.on("should-expand",e)}onShouldCollapse(e){return this.emitter.on("should-collapse",e)}dispose(){this.emitter.dispose()}}const di=Y('<button class="btn fix-btn">Fix</button>',2);J(["click"]);const hi=Y('<div class="linter-message"><div><div class="linter-text"><div class="provider-name"></div></div><div class="linter-buttons-right"></div></div></div>',10),fi=Y('<a href="#"><span></span></a>',4),pi=Y('<a href="#"><span class="icon linter-icon icon-alignment-aligned-to"></span></a>',4),mi=Y('<a href="#"><span class="icon linter-icon icon-link"></span></a>',4),gi=Y('<div class="linter-line"></div>',2);let vi;ze.register("dftzP",((e,t)=>{e.exports=Promise.resolve(require("./marked.esm.b565d391.js")).then((()=>ze("hiBcC")))})),J(["click"]);var wi={};Object.defineProperty(wi,"__esModule",{value:!0}),wi.copyListener=wi.makeOverLayCopyable=wi.blurEditor=wi.focusEditor=wi.overlayFocusFix=wi.makeOverlaySelectable=void 0,wi.makeOverlaySelectable=(e,t,i=!0)=>{t.setAttribute("tabindex","-1"),t.style.userSelect&&"none"!==t.style.userSelect||(t.style.userSelect="text"),i&&ye(e,t),t.classList.add("native-key-bindings")},wi.overlayFocusFix=ye,wi.focusEditor=be,wi.blurEditor=ke,wi.makeOverLayCopyable=e=>{e.addEventListener("mouseenter",(()=>{e.addEventListener("keydown",Pe)})),e.addEventListener("mouseleave",(()=>{e.removeEventListener("keydown",Pe)}))},wi.copyListener=Pe;const yi=Y('<div class="linter-messages"></div>',2);class bi{constructor(e,t,i){this.element=document.createElement("div"),this.emitter=new Be,this.subscriptions=new Ie,this.messages=e,this.marker=i.markBufferRange([t,t]),this.marker.onDidDestroy((()=>this.emitter.emit("did-destroy")));const s=new ui;wi.makeOverlaySelectable(i,this.element),this.element.id="linter-tooltip",i.decorateMarker(this.marker,{type:"overlay",item:this.element}),this.subscriptions.add(this.emitter,s),K((()=>{return t=e,i=s,(()=>{const e=yi.cloneNode(!0);return Z(e,W(z,{each:t,children(e){if(2===e.version)return W(ve,{get key(){return e.key},delegate:i,message:e})}})),e})();var t,i}),this.element),setTimeout((()=>{const e=this.element.getBoundingClientRect().height,s=i.getLineHeightInPixels();if((t.row-i.getFirstVisibleScreenRow())*s>e){const t=this.element.parentElement;t&&(t.style.transform=`translateY(-${2+s+e}px)`)}else{const e=i.getElement().querySelector(".datatip-overlay");if(e){const t=this.element.parentElement;t&&(t.style.transform=`translateY(${e.clientHeight}px)`)}}this.element.style.visibility="visible"}),50)}isValid(e,t){if(1!==this.messages.length||!t.has(this.messages[0].key))return!1;const s=i(this.messages[0]);return!(!s||!s.containsPoint(e))}onDidDestroy(e){return this.emitter.on("did-destroy",e)}dispose(){this.emitter.emit("did-destroy"),this.subscriptions.dispose()}}class ki{constructor(e){this.gutter=null,this.tooltip=null,this.emitter=new Be,this.markers=new Map,this.messages=new Map,this.showTooltip=!0,this.subscriptions=new Ie,this.cursorPosition=null,this.tooltipFollows="Both",this.showProviderName=!0,this.ignoreTooltipInvocation=!1,this.currentLineMarker=null,this.lastCursorPositions=new WeakMap,this.textEditor=e;let t=null;this.subscriptions.add(this.emitter,e.onDidDestroy((()=>{this.dispose()})),new Oe((()=>{null==t||t.dispose()})),atom.config.observe("linter-ui-default.showProviderName",(e=>{this.showProviderName=e})),atom.config.observe("linter-ui-default.showDecorations",(e=>{const t=void 0!==this.showDecorations;this.showDecorations=e,t&&this.updateGutter()})),atom.config.observe("linter-ui-default.gutterPosition",(e=>{const t=void 0!==this.gutterPosition;this.gutterPosition=e,t&&this.updateGutter()})),atom.config.observe("linter-ui-default.showTooltip",(e=>{this.showTooltip=e,!this.showTooltip&&this.tooltip&&this.removeTooltip()})),atom.config.observe("linter-ui-default.tooltipFollows",(e=>{this.tooltipFollows=e,t&&t.dispose(),t=new Ie,"Mouse"!==e&&"Both"!==e||t.add(this.listenForMouseMovement()),"Keyboard"!==e&&"Both"!==e||t.add(this.listenForKeyboardMovement()),this.removeTooltip()})),e.onDidChangeCursorPosition((({cursor:e,newBufferPosition:t})=>{const i=this.lastCursorPositions.get(e);i&&i.isEqual(t)||(this.lastCursorPositions.set(e,t),this.ignoreTooltipInvocation=!1),"Mouse"===this.tooltipFollows&&this.removeTooltip()})),e.getBuffer().onDidChangeText((()=>{e.getCursors().forEach((e=>{this.lastCursorPositions.set(e,e.getBufferPosition())})),"Mouse"!==this.tooltipFollows&&(this.ignoreTooltipInvocation=!0,this.removeTooltip())}))),this.updateGutter(),this.listenForCurrentLine()}listenForCurrentLine(){this.subscriptions.add(this.textEditor.observeCursors((e=>{const t=({start:e,end:t})=>{const i=this.gutter;if(!i||this.subscriptions.disposed)return;const s=Fe.fromObject([e,t]),n=Fe.fromObject([[e.row,0],[t.row,1/0]]),o=s.isEmpty();if(e.row!==t.row&&0===s.end.column&&n.end.row--,this.lastRange&&this.lastRange.isEqual(n)&&o===this.lastIsEmpty)return;this.currentLineMarker&&(this.currentLineMarker.destroy(),this.currentLineMarker=null),this.lastRange=n,this.lastIsEmpty=o,this.currentLineMarker=this.textEditor.markScreenRange(n,{invalidate:"never"});const r=document.createElement("span");r.className="line-number cursor-line linter-cursor-line "+(o?"cursor-line-no-selection":""),i.decorateMarker(this.currentLineMarker,{item:r,class:"linter-row"})},i=e.getMarker(),s=new Ie;s.add(i.onDidChange((({newHeadScreenPosition:e,newTailScreenPosition:i})=>{t({start:e,end:i})}))),s.add(e.onDidDestroy((()=>{this.subscriptions.remove(s),s.dispose()}))),s.add(new Oe((()=>{this.currentLineMarker&&(this.currentLineMarker.destroy(),this.currentLineMarker=null)}))),this.subscriptions.add(s),t(i.getScreenRange())})))}listenForMouseMovement(){const e=atom.views.getView(this.textEditor);return $e(e,"mousemove",t(Ft)((t=>{if(!e.getComponent()||this.subscriptions.disposed||!((e,t)=>{let i=e;do{if(i.matches("div.scroll-view"))return!0;i=i.parentElement}while(i&&"HTML"!==i.nodeName);return!1})(t.target))return;const i=this.tooltip;i&&(({event:e,editor:t,editorElement:i,tooltipElement:s,screenPosition:n})=>{const o=i.getComponent().pixelPositionForMouseEvent(e),r=i.pixelPositionForScreenPosition(n),l=o.top-r.top,a=o.left-r.left,c=t.getLineHeightInPixels();if(l>0){if(l>s.offsetHeight+c+1.5*c)return!1}else if(0>l&&-1.5*c>l)return!1;if(a>0){if(a>s.offsetWidth+30)return!1}else if(0>a&&-30>a)return!1;return!0})({event:t,editor:this.textEditor,editorElement:e,tooltipElement:i.element,screenPosition:i.marker.getStartScreenPosition()})||(this.cursorPosition=((e,t,i)=>{const s=i.getComponent().pixelPositionForMouseEvent(e),n=i.getComponent().screenPositionForPixelPosition(s);if(Number.isNaN(n.row)||Number.isNaN(n.column))return null;const o=i.pixelPositionForScreenPosition(n),r=s.top-o.top,l=s.left-o.left;return(0===r||r>0&&20>r||0>r&&r>-20)&&(0===l||l>0&&20>l||0>l&&l>-20)?t.bufferPositionForScreenPosition(n):null})(t,this.textEditor,e),this.ignoreTooltipInvocation=!1,this.cursorPosition?this.updateTooltip(this.cursorPosition):this.removeTooltip())}),100),{passive:!0})}listenForKeyboardMovement(){return this.textEditor.onDidChangeCursorPosition(t(Ft)((({newBufferPosition:e})=>{this.cursorPosition=e,this.updateTooltip(e)}),16))}updateGutter(){this.removeGutter(),this.showDecorations?(this.gutter=this.textEditor.addGutter({name:"linter-ui-default",priority:"Left"===this.gutterPosition?-100:100}),this.markers.forEach(((e,t)=>{const i=this.messages.get(t);if(i)for(const t of e)this.decorateMarker(i,t,"gutter")}))):this.gutter=null}removeGutter(){if(this.gutter)try{this.gutter.destroy()}catch(e){}}updateTooltip(e){if(!e||this.tooltip&&this.tooltip.isValid(e,this.messages))return;if(this.removeTooltip(),!this.showTooltip)return;if(this.ignoreTooltipInvocation)return;const t=l(this.messages,this.textEditor.getPath(),e);if(!t.length)return;this.tooltip=new bi(t,e,this.textEditor);const i=this.tooltip.marker;t.forEach((e=>{this.saveMarker(e.key,i)})),this.tooltip.onDidDestroy((()=>{this.tooltip=null}))}removeTooltip(){this.tooltip&&this.tooltip.marker.destroy()}apply(e,t){const s=this.textEditor.getBuffer();for(let e=0,i=t.length;i>e;e++)this.destroyMarker(t[e].key);for(let t=0,n=e.length;n>t;t++){const n=e[t],o=i(n);if(!o)continue;const r=s.markRange(o,{invalidate:"never"});this.decorateMarker(n,r),r.onDidChange((({oldHeadPosition:e,newHeadPosition:t,isValid:i})=>{!i||0===t.row&&0!==e.row||2===n.version&&(n.location.position=r.previousEventState.range)}))}this.updateTooltip(this.cursorPosition)}decorateMarker(e,t,i="both"){this.saveMarker(e.key,t),this.messages.set(e.key,e),"both"!==i&&"editor"!==i||this.textEditor.decorateMarker(t,{type:"text",class:"linter-highlight linter-"+e.severity});const s=this.gutter;if(s&&("both"===i||"gutter"===i)){const i=document.createElement("span");i.className=`linter-gutter linter-gutter-${e.severity} icon icon-${e.icon||"primitive-dot"}`,s.decorateMarker(t,{class:"linter-row",item:i})}}saveMarker(e,t){const i=this.markers.get(e)||[];i.push(t),this.markers.set(e,i)}destroyMarker(e){const t=this.markers.get(e);t&&t.forEach((e=>{e&&e.destroy()})),this.markers.delete(e),this.messages.delete(e)}onDidDestroy(e){return this.emitter.on("did-destroy",e)}dispose(){this.emitter.emit("did-destroy"),this.subscriptions.dispose(),this.removeGutter(),this.removeTooltip()}}var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.lineLengthIfLong=Pi.lineCountIfLarge=Pi.largeness=void 0,Pi.largeness=(e,t=atom.config.get("atom-ide-base.largeLineCount")||4e3,i=atom.config.get("atom-ide-base.longLineLength")||4e3)=>{const s=xe(e,t);if(0!==s)return s;const n=Ce(e,i);return 0!==n?n:0},Pi.lineCountIfLarge=xe,Pi.lineLengthIfLong=Ce;class xi{constructor(){this.editors=new Set,this.messages=[],this.firstRender=!0,this.subscriptions=new Ie;const e=atom.config.get("linter-ui-default.largeFileLineCount"),t=atom.config.get("linter-ui-default.longLineLength");this.subscriptions.add(atom.workspace.observeTextEditors((i=>{if(Pi.largeness(i,e,t)){const e=atom.notifications.addWarning("Linter: Large/Minified file detected",{detail:"Adding inline linter markers are skipped for this file for performance reasons (linter pane is still active)",dismissable:!0,buttons:[{text:"Force enable",onDidClick:()=>{this.getEditor(i),e.dismiss()}},{text:"Change threshold",async onDidClick(){await atom.workspace.open("atom://config/packages/linter-ui-default"),document.querySelectorAll(".control-group")[16].scrollIntoView(),e.dismiss()}}]});setTimeout((()=>{e.dismiss()}),5e3)}else this.getEditor(i)})),atom.workspace.getCenter().observeActivePaneItem((e=>{this.editors.forEach((t=>{t.textEditor!==e&&t.removeTooltip()}))})))}isFirstRender(){return this.firstRender}update({messages:e,added:t,removed:i}){this.messages=e,this.firstRender=!1;const{editorsMap:n,filePaths:o}=(e=>{const t=new Map,i=[];for(const n of e.editors){var s;const e=null!==(s=n.textEditor.getPath())&&void 0!==s?s:"";t.has(e)?t.get(e).editors.push(n):(t.set(e,{added:[],removed:[],editors:[n]}),i.push(e))}return{editorsMap:t,filePaths:i}})(this);t.forEach((e=>{if(!e||!e.location)return;const t=s(e);t&&n.has(t)&&n.get(t).added.push(e)})),i.forEach((e=>{if(!e||!e.location)return;const t=s(e);t&&n.has(t)&&n.get(t).removed.push(e)})),o.forEach((e=>{if(n.has(e)){const{added:t,removed:i,editors:s}=n.get(e);(t.length||i.length)&&s.forEach((e=>e.apply(t,i)))}}))}getEditor(e){for(const t of this.editors)if(t.textEditor===e)return t;const t=new ki(e);return this.editors.add(t),t.onDidDestroy((()=>{this.editors.delete(t)})),t.subscriptions.add(e.onDidChangePath((()=>{t.dispose(),this.getEditor(e)}))),t.subscriptions.add(e.onDidChangeGrammar((()=>{t.dispose(),this.getEditor(e)}))),t.call(r(this.messages,e.getPath())),t}dispose(){for(const e of this.editors)e.dispose();this.subscriptions.dispose()}}class Ci{constructor(){this.messages=[],this.decorations={},this.subscriptions=new Ie,this.subscriptions.add(atom.config.observe("linter-ui-default.decorateOnTreeView",(e=>{if(void 0===this.decorateOnTreeView)this.decorateOnTreeView=e;else if("None"===e)this.update([]),this.decorateOnTreeView=e;else{const t=this.messages;this.decorateOnTreeView=e,this.update(t)}}))),setTimeout((()=>{const e=Ci.getElement();e&&this.subscriptions.add($e(e,"click",t(Ft)((()=>{this.update()})),{passive:!0}))}),100)}update(e=null){Array.isArray(e)&&(this.messages=e);const t=this.messages,i=Ci.getElement(),n=this.decorateOnTreeView;i&&"None"!==n&&this.applyDecorations(((e,t)=>{const i={},n=atom.project.getPaths();return t.forEach((t=>{const o=s(t);o&&("Files"===e?[o]:((e,t)=>{const i=t.find((t=>e.startsWith(t)));return i?((e,t)=>{const i=[],s=e.split(_e.sep);for(;s.length;){const e=s.join(_e.sep);if(e&&(i.push(e),e===t))break;s.pop()}return i})(e,i):[e]})(o,n)).forEach((e=>((e,t,i)=>{e[t]||(e[t]={info:!1,error:!1,warning:!1}),e[t][i]=!0})(i,e,t.severity)))})),i})(n,t))}applyDecorations(e){const t=Ci.getElement();if(!t)return;const i={},s={};Object.keys(this.decorations).forEach((s=>{if({}.hasOwnProperty.call(this.decorations,s)&&!e[s]){const e=i[s]||(i[s]=Ci.getElementByPath(t,s));e&&(e=>{var t;null===(t=e.querySelector("linter-decoration"))||void 0===t||t.remove()})(e)}})),Object.keys(e).forEach((n=>{if(!{}.hasOwnProperty.call(e,n))return;const o=i[n]||(i[n]=Ci.getElementByPath(t,n));o&&(((e,t,i=!1)=>{let s=null;i&&(s=e.querySelector("linter-decoration")),null!==s?s.className="":(s=document.createElement("linter-decoration"),e.appendChild(s)),t.error?s.classList.add("linter-error"):t.warning?s.classList.add("linter-warning"):t.info&&s.classList.add("linter-info")})(o,e[n],!!this.decorations[n]),s[n]=e[n])})),this.decorations=s}dispose(){this.subscriptions.dispose()}static getElement(){return document.querySelector(".tree-view")}static getElementByPath(e,t){return e.querySelector(`[data-path=${CSS.escape(t)}]`)}}class Ei{constructor(){this.name="Linter",this.signal=new Bt,this.commands=new Nt,this.messages=[],this.statusBar=new It,this.intentions=new Ot,this.subscriptions=new Ie,this.idleCallbacks=new Set,this.subscriptions.add(this.signal,this.commands,this.statusBar);const e=window.requestIdleCallback((()=>{this.idleCallbacks.delete(e),this.panel=new At,this.panel.update(this.messages)}));this.idleCallbacks.add(e);const t=window.requestIdleCallback((()=>{this.idleCallbacks.delete(t),this.subscriptions.add(atom.config.observe("linter-ui-default.showDecorations",(e=>{e&&!this.editors?(this.editors=new xi,this.editors.update({added:this.messages,removed:[],messages:this.messages})):!e&&this.editors&&(this.editors.dispose(),this.editors=null)})))}));this.idleCallbacks.add(t)}render(e){const t=this.editors;this.messages=e.messages,t&&(t.isFirstRender()?t.update({added:e.messages,removed:[],messages:e.messages}):t.update(e)),this.treeview||(this.treeview=new Ci,this.subscriptions.add(this.treeview)),this.treeview.update(e.messages),this.panel&&this.panel.update(e.messages),this.commands.update(e.messages),this.intentions.update(e.messages),this.statusBar.update(e.messages)}didBeginLinting(e,t){this.signal.didBeginLinting(e,t)}didFinishLinting(e,t){this.signal.didFinishLinting(e,t)}dispose(){this.idleCallbacks.forEach((e=>window.cancelIdleCallback(e))),this.idleCallbacks.clear(),this.subscriptions.dispose(),this.panel&&this.panel.dispose(),this.editors&&this.editors.dispose()}}const Si=new Set,Li=new Set;let Ti,Mi;
//# sourceMappingURL=index.js.map
