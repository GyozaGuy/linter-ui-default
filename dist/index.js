function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}function i(e){return e.location.position}function n(e){return e.location.file}function s(e){return atom.project.relativizePath(n(e)||"")[1]}function r(){let e=atom.workspace.getCenter().getActivePaneItem();const t=null!==e&&atom.workspace.isTextEditor(e);return!t&&e&&Ke&&e.getURI&&"atom://linter-ui-default"===e.getURI()&&(!Ke.isAlive||Ke.isAlive())?e=Ke:Ke=e,t?e:null}function o(e,t,i=null){const s=[];return e.forEach((e=>{e&&e.location&&(null!==t&&n(e)!==t||i&&e.severity!==i||s.push(e))})),s}function l(e,t,s){const r=[],o="Point"===s.constructor.name?new Fe(s,s):Fe.fromObject(s);return e.forEach((e=>{const s=n(e),l=i(e);s&&l&&s===t&&"function"==typeof l.intersectsWith&&l.intersectsWith(o)&&r.push(e)})),r}function a(e,t){const i={searchAllPanes:!0};t&&(i.initialLine=t.row,i.initialColumn=t.column),atom.workspace.open(e,i)}function c(e,t=!1){let s,r;if(t){if(!e.reference||!e.reference.file)return void console.warn("[Linter-UI-Default] Message does not have a valid reference. Ignoring");s=e.reference.file,r=e.reference.position}else{const t=i(e);s=n(e),t&&(r=t.start)}s&&a(s,r)}function u(e){2===e.version&&e.url&&$e.openExternal(e.url)}function d(e,t){const n=t[0],r="asc"===t[1]?1:-1;return e.sort(((e,t)=>{if("severity"===n){const i=Ye[e.severity],n=Ye[t.severity];if(i!==n)return r*(i>n?1:-1)}if("linterName"===n){const i=e.severity.localeCompare(t.severity);if(0!==i)return r*i}if("file"===n){const i=s(e),n=i.length,o=s(t),l=o.length;if(n!==l)return r*(n>l?1:-1);if(i!==o)return r*i.localeCompare(o)}if("line"===n){const n=i(e),s=i(t);if(n&&!s)return 1;if(s&&!n)return-1;if(n&&s){if(n.start.row!==s.start.row)return r*(n.start.row>s.start.row?1:-1);if(n.start.column!==s.start.column)return r*(n.start.column>s.start.column?1:-1)}}return 0}))}function h(e){return e.sort(((e,t)=>void 0===e.priority||void 0===t.priority?0:t.priority-e.priority))}function f(e,t){if("apply"in t)return t.apply(),!0;const i=t.position,n=t.replaceWith;if("currentText"in t){const n=t.currentText,s=e.getTextInBufferRange(i);if(n!==s)return console.warn("[linter-ui-default] Not applying fix because text did not match the expected one","expected",n,"but got",s),!1}return e.setTextInBufferRange(i,n),!0}function p(e,t,i){const n=e.get(t);if(void 0!==n)return n;{const n=i();return null!==n&&e.set(t,n),n}}function g(e){Ze.context=e}function m(e,t){t&&(lt=t);const i=at,n=lt,s=0===e.length?st:{owned:null,cleanups:null,context:null,owner:n,attached:!!t};let r;lt=s,at=null;try{M((()=>r=e((()=>B(s)))),!0)}finally{at=i,lt=n}return r}function v(e,t=!0,i){const n={value:e,observers:null,observerSlots:null,pending:nt,comparator:t?"function"==typeof t?t:et:void 0};return[x.bind(n),C.bind(n)]}function w(e,t){E(L(e,t,!1))}function y(e,t,i=!0){const n=L(e,t,!0);return n.pending=nt,n.observers=null,n.observerSlots=null,n.state=0,n.comparator=i?"function"==typeof i?i:et:void 0,E(n),x.bind(n)}function b(e){if(ct)return e();const t=ct=[],i=e();return ct=null,M((()=>{for(let e=0;t.length>e;e+=1){const i=t[e];if(i.pending!==nt){const e=i.pending;i.pending=nt,C.call(i,e)}}}),!1),i}function k(e){let t,i=at;return at=null,t=e(),at=i,t}function P(e){((e,t)=>{it=N;const i=L(e,void 0,!1);i.user=!0,dt&&dt.push(i)})((()=>k(e)))}function x(){if(this.state&&this.sources){const e=ut;ut=null,1===this.state?E(this):D(this),ut=e}if(at){const e=this.observers?this.observers.length:0;at.sources?(at.sources.push(this),at.sourceSlots.push(e)):(at.sources=[this],at.sourceSlots=[e]),this.observers?(this.observers.push(at),this.observerSlots.push(at.sources.length-1)):(this.observers=[at],this.observerSlots=[at.sources.length-1])}return ht&&ht.running&&ht.sources.has(this)?this.tValue:this.value}function C(e,t){if(this.comparator)if(ht&&ht.running&&ht.sources.has(this)){if(this.comparator(this.tValue,e))return e}else if(this.comparator(this.value,e))return e;return ct?(this.pending===nt&&ct.push(this),this.pending=e,e):(ht?((ht.running||!t&&ht.sources.has(this))&&(ht.sources.add(this),this.tValue=e),ht.running||(this.value=e)):this.value=e,!this.observers||ut&&!this.observers.length||M((()=>{for(let e=0;this.observers.length>e;e+=1){const t=this.observers[e];ht&&ht.running&&ht.disposed.has(t)||(t.observers&&2!==t.state&&I(t),t.state=1,t.pure?ut.push(t):dt.push(t))}if(ut.length>1e6)throw ut=[],Error("Potential Infinite Loop Detected.")}),!1),e)}function E(e){if(!e.fn)return;B(e);const t=lt,i=at,n=ft;at=lt=e,S(e,e.value,n),ht&&!ht.running&&ht.sources.has(e)&&(ht.running=!0,S(e,e.tValue,n),ht.running=!1),at=i,lt=t}function S(e,t,i){let n;try{n=e.fn(t)}catch(e){R(e)}e.updatedAt&&e.updatedAt>i||(e.observers&&e.observers.length?C.call(e,n,!0):ht&&ht.running&&e.pure?(ht.sources.add(e),e.tValue=n):e.value=n,e.updatedAt=i)}function L(e,t,i){const n={fn:e,state:1,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:lt,context:null,pure:i};return null===lt||lt!==st&&(ht&&ht.running&&lt.pure?lt.tOwned?lt.tOwned.push(n):lt.tOwned=[n]:lt.owned?lt.owned.push(n):lt.owned=[n]),n}function T(e){let t,i=1===e.state&&e;if(e.suspense&&k(e.suspense.inFallback))return e.suspense.effects.push(e);const n=ht&&ht.running;for(;(e.fn||n&&e.attached)&&(e=e.owner);){if(n&&ht.disposed.has(e))return;2===e.state?t=e:1===e.state&&(i=e,t=void 0)}if(t){const s=ut;if(ut=null,D(t),ut=s,!i||1!==i.state)return;if(n)for(e=i;(e.fn||e.attached)&&(e=e.owner);)if(ht.disposed.has(e))return}i&&E(i)}function M(e,t){if(ut)return e();let i=!1;t||(ut=[]),dt?i=!0:dt=[],ft++;try{e()}catch(e){R(e)}finally{(e=>{if(ut&&(A(ut),ut=null),e)return;let t;if(ht&&ht.running){if(ht.promises.size)return ht.running=!1,ht.effects.push.apply(ht.effects,dt),dt=null,void ot(!0);const e=ht.sources;t=ht.cb,ht=null,b((()=>{e.forEach((e=>{if(e.value=e.tValue,e.owned)for(let t=0,i=e.owned.length;i>t;t++)B(e.owned[t]);e.tOwned&&(e.owned=e.tOwned),delete e.tValue,delete e.tOwned})),ot(!1)}))}dt.length?b((()=>{it(dt),dt=null})):dt=null,t&&t.forEach((e=>e()))})(i)}}function A(e){for(let t=0;e.length>t;t++)T(e[t])}function N(e){let t,i=0;for(t=0;e.length>t;t++){const n=e[t];n.user?e[i++]=n:T(n)}const n=e.length;for(t=0;i>t;t++)T(e[t]);for(t=n;e.length>t;t++)T(e[t])}function D(e){e.state=0;for(let t=0;e.sources.length>t;t+=1){const i=e.sources[t];i.sources&&(1===i.state?T(i):2===i.state&&D(i))}}function I(e){for(let t=0;e.observers.length>t;t+=1){const i=e.observers[t];i.state||(i.state=2,i.observers&&I(i))}}function B(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),i=e.sourceSlots.pop(),n=t.observers;if(n&&n.length){const e=n.pop(),s=t.observerSlots.pop();n.length>i&&(e.sourceSlots[s]=i,n[i]=e,t.observerSlots[i]=s)}}if(ht&&ht.running&&e.pure){if(e.tOwned){for(t=0;e.tOwned.length>t;t++)B(e.tOwned[t]);delete e.tOwned}O(e,!0)}else if(e.owned){for(t=0;e.owned.length>t;t++)B(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;e.cleanups.length>t;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function O(e,t){if(t||(e.state=0,ht.disposed.add(e)),e.owned)for(let t=0;e.owned.length>t;t++)O(e.owned[t])}function R(e){const t=tt&&F(lt,tt);if(!t)throw e;t.forEach((t=>t(e)))}function F(e,t){return e&&(e.context&&e.context[t]||e.owner&&F(e.owner,t))}function j(e,t){let i=e[mt];if(!i){Object.defineProperty(e,mt,{value:i=new Proxy(e,wt)});let t=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let s=0,r=t.length;r>s;s++){const r=t[s];if(n[r].get){const t=n[r].get.bind(i);Object.defineProperty(e,r,{get:t})}}}return i}function $(e){return null!=e&&"object"==typeof e&&(!e.__proto__||e.__proto__===Object.prototype||Array.isArray(e))}function H(e,t=new Set){let i,n,s,r;if(i=null!=e&&e[pt])return i;if(!$(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,r=e.length;r>i;i++)s=e[i],(n=H(s,t))!==s&&(e[i]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);let i=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let l=0,a=i.length;a>l;l++)r=i[l],o[r].get||(s=e[r],(n=H(s,t))!==s&&(e[r]=n))}return e}function _(e){let t=e[gt];return t||Object.defineProperty(e,gt,{value:t={}}),t}function q(){const[e,t]=v(void 0,!1);return e.set=t,e}function V(e,t,i){if(e[t]===i)return;const n=Array.isArray(e),s=e.length,r=n||!(t in e);void 0===i?delete e[t]:e[t]=i;let o,l=_(e);(o=l[t])&&o.set(),n&&e.length!==s&&(o=l.length)&&o.set(),r&&(o=l._)&&o.set()}function W(e,t,i=[]){let n,s=e;if(t.length>1){n=t.shift();const r=typeof n,o=Array.isArray(e);if(Array.isArray(n)){for(let s=0;n.length>s;s++)W(e,[n[s]].concat(t),[n[s]].concat(i));return}if(o&&"function"===r){for(let s=0;e.length>s;s++)n(e[s],s)&&W(e,[s].concat(t),[s].concat(i));return}if(o&&"object"===r){const{from:s=0,to:r=e.length-1,by:o=1}=n;for(let n=s;r>=n;n+=o)W(e,[n].concat(t),[n].concat(i));return}if(t.length>1)return void W(e[n],t,[n].concat(i));s=e[n],i=[n].concat(i)}let r=t[0];"function"==typeof r&&(r=r(s,i),r===s)||void 0===n&&null==r||(r=H(r),void 0===n||$(s)&&$(r)&&!Array.isArray(r)?((e,t)=>{const i=Object.keys(t);for(let n=0;i.length>n;n+=1){const s=i[n];V(e,s,t[s])}})(s,r):V(e,n,r))}function G(e,t){if(Ze.context){const i=Ze.context;g({...Ze.context,id:`${Ze.context.id}${Ze.context.count++}.`,count:0});const n=k((()=>e(t)));return g(i),n}return k((()=>e(t)))}function z(e){return y(((e,t,i={})=>{let n=[],s=[],r=[],o=0,l=t.length>1?[]:null,a=lt;return c=()=>{for(let e=0,t=r.length;t>e;e++)r[e]()},null===lt||(null===lt.cleanups?lt.cleanups=[c]:lt.cleanups.push(c)),()=>{function c(e){if(r[d]=e,l){const[e,i]=v(d);return l[d]=i,t(h[d],e)}return t(h[d])}let u,d,h=e()||[];return k((()=>{let e,t,f,p,g,v,w,y,b,k=h.length;if(0===k){if(0!==o){for(u=0;o>u;u++)r[u]();r=[],n=[],s=[],o=0,l&&(l=[])}i.fallback&&(n=[yt],s[0]=m((e=>(r[0]=e,i.fallback())),a),o=1)}else if(0===o){for(d=0;k>d;d++)n[d]=h[d],s[d]=m(c,a);o=k}else{for(f=Array(k),p=Array(k),l&&(g=Array(k)),v=0,w=Math.min(o,k);w>v&&n[v]===h[v];v++);for(w=o-1,y=k-1;w>=v&&y>=v&&n[w]===h[y];w--,y--)f[y]=s[w],p[y]=r[w],l&&(g[y]=l[w]);for(e=new Map,t=Array(y+1),d=y;d>=v;d--)b=h[d],u=e.get(b),t[d]=void 0===u?-1:u,e.set(b,d);for(u=v;w>=u;u++)b=n[u],d=e.get(b),void 0!==d&&-1!==d?(f[d]=s[u],p[d]=r[u],l&&(g[d]=l[u]),d=t[d],e.set(b,d)):r[u]();for(d=v;k>d;d++)d in f?(s[d]=f[d],r[d]=p[d],l&&(l[d]=g[d],l[d](d))):s[d]=m(c,a);o=s.length=k,n=h.slice(0)}return s}))};var c})((()=>e.each),e.children,"fallback"in e&&{fallback(){return e.fallback}}||void 0),void 0,!1)}function U(e){let t=!1;const i=y((()=>e.when),void 0,((e,i)=>t?e===i:!e==!i));return y((()=>{const n=i();if(n){const i=e.children;return(t="function"==typeof i&&i.length>0)?k((()=>i(n))):i}return e.fallback}))}function K(e,t,i){let n=i.length,s=t.length,r=n,o=0,l=0,a=t[s-1].nextSibling,c=null;for(;s>o||r>l;)if(s===o){const t=n>r?l?i[l-1].nextSibling:i[r-l]:a;for(;r>l;)e.insertBefore(i[l++],t)}else if(r===l)for(;s>o;)c&&c.has(t[o])||e.removeChild(t[o]),o++;else if(t[o]===i[l])o++,l++;else if(t[s-1]===i[r-1])s--,r--;else if(t[o]===i[r-1]&&i[l]===t[s-1]){const n=t[--s].nextSibling;e.insertBefore(i[l++],t[o++].nextSibling),e.insertBefore(i[--r],n),t[s]=i[r]}else{if(!c){c=new Map;let e=l;for(;r>e;)c.set(i[e],e++)}const n=c.get(t[o]);if(null!=n)if(n>l&&r>n){let a,u=o,d=1;for(;++u<s&&r>u&&null!=(a=c.get(t[u]))&&a===n+d;)d++;if(d>n-l){const s=t[o];for(;n>l;)e.insertBefore(i[l++],s)}else e.replaceChild(i[l++],t[o++])}else o++;else e.removeChild(t[o++])}}function Y(e,t,i){let n;return m((s=>{n=s,ee(t,e(),t.firstChild?null:void 0,i)})),()=>{n(),t.textContent=""}}function J(e,t,i){const n=document.createElement("template");if(n.innerHTML=e,t&&n.innerHTML.split("<").length-1!==t)throw`Template html does not match input:\n${n.innerHTML}\n\n${e}`;let s=n.content.firstChild;return i&&(s=s.firstChild),s}function Q(e){const t=document[bt]||(document[bt]=new Set);for(let i=0,n=e.length;n>i;i++){const n=e[i];t.has(n)||(t.add(n),document.addEventListener(n,te))}}function X(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function Z(e,t,i,n){n?Array.isArray(i)?(e["$$"+t]=i[0],e[`$$${t}Data`]=i[1]):e["$$"+t]=i:e.addEventListener(t,Array.isArray(i)?e=>i[0](i[1],e):i)}function ee(e,t,i,n){if(void 0===i||n||(n=[]),"function"!=typeof t)return ie(e,t,n,i);w((n=>ie(e,t(),n,i)),n)}function te(e){const t="$$"+e.type;let i=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==i&&Object.defineProperty(e,"target",{configurable:!0,value:i}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>i});null!==i;){const n=i[t];if(n){const s=i[t+"Data"];if(void 0!==s?n(s,e):n(e),e.cancelBubble)return}i=i.host&&i.host!==i&&i.host instanceof Node?i.host:i.parentNode}}function ie(e,t,i,n,s){for(;"function"==typeof i;)i=i();if(t===i)return i;const r=typeof t,o=void 0!==n;if(e=o&&i[0]&&i[0].parentNode||e,"string"===r||"number"===r)if("number"===r&&(t=""+t),o){let s=i[0];s&&3===s.nodeType?s.data=t:s=document.createTextNode(t),i=re(e,i,n,s)}else i=""!==i&&"string"==typeof i?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===r){if(Ze.context)return i;i=re(e,i,n)}else{if("function"===r)return w((()=>{let s=t();for(;"function"==typeof s;)s=s();i=ie(e,s,i,n)})),()=>i;if(Array.isArray(t)){const r=[];if(ne(r,t,s))return w((()=>i=ie(e,r,i,n,!0))),()=>i;if(Ze.context&&i.length)return i;if(0===r.length){if(i=re(e,i,n),o)return i}else Array.isArray(i)?0===i.length?se(e,r,n):K(e,i,r):null==i||""===i?se(e,r):K(e,o&&i||[e.firstChild],r);i=r}else if(t instanceof Node){if(Array.isArray(i)){if(o)return i=re(e,i,n,t);re(e,i,null,t)}else null!=i&&""!==i&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);i=t}else console.warn("Skipped inserting",t)}return i}function ne(e,t,i){let n=!1;for(let s=0,r=t.length;r>s;s++){let r,o=t[s];if(o instanceof Node)e.push(o);else if(null==o||!0===o||!1===o);else if(Array.isArray(o))n=ne(e,o)||n;else if("string"==(r=typeof o))e.push(document.createTextNode(o));else if("function"===r)if(i){for(;"function"==typeof o;)o=o();n=ne(e,Array.isArray(o)?o:[o])||n}else e.push(o),n=!0;else e.push(document.createTextNode(""+o))}return n}function se(e,t,i){for(let n=0,s=t.length;s>n;n++)e.insertBefore(t[n],i)}function re(e,t,i,n){if(void 0===i)return e.textContent="";const s=n||document.createTextNode("");if(t.length){let n=!1;for(let r=t.length-1;r>=0;r--){const o=t[r];if(s!==o){const t=o.parentNode===e;n||r?t&&e.removeChild(o):t?e.replaceChild(s,o):e.insertBefore(s,i)}else n=!0}}else e.insertBefore(s,i);return[s]}function oe(e){function t(){const t=s();return void 0!==t?t:void 0!==e.defaultSortDirection?e.defaultSortDirection:[null,null]}function i(){const i=t();null===i[0]&&void 0!==e.defaultSortDirection?l(a(o(),e.defaultSortDirection)):null!==i[0]&&l(a(o(),i))}var n;const[s,r]=v(),[o,l]=v(e.rows,!1);E(L((()=>{l(e.rows)}),undefined,!0));const a=null!==(n=e.rowSorter)&&void 0!==n?n:de,{headerRenderer:c=ae,bodyRenderer:u=ce,getRowID:d=ue,accessors:h}=e;return void 0===e.columns&&(e.columns=((e,t=0)=>{const i=Object.keys(e[t]),n=i.length,s=Array(n);for(let e=0;n>e;e++)s[e]={id:i[e]};return s})(e.rows,e.representitiveRowNumber)),i(),(()=>{const n=kt.cloneNode(!0),s=n.firstChild,l=s.nextSibling;return ee(s.firstChild,G(z,{get each(){return e.columns},children(e){const n=!1!==e.sortable;return(()=>{const s=Pt.cloneNode(!0);var o;return Z(s,"click",n?(o=e.id,e=>{r(((e,t,i)=>{let n;return n=i?[null,null]:e[0]===t?[e[0],"asc"===e[1]?"desc":"asc"]:[t,"asc"],n})(t(),o,e.shiftKey)),i()}):void 0,!0),s.className=n?"sortable":void 0,ee(s,(()=>c(e)),null),ee(s,(()=>n?((e,t)=>{let i;return i=null===e[0]||e[0]!==t?Tt:"asc"===e[1]?Lt:St,(()=>{const e=Et.cloneNode(!0);return ee(e,i),e})()})(t(),e.id):void 0),null),w((()=>X(s,"id",h?e.id+"":void 0))),s})()}})),ee(l,G(z,{get each(){return o()},children(t){const i=h?d(t):void 0;return(()=>{const n=xt.cloneNode(!0);return X(n,"id",i),ee(n,G(z,{get each(){return e.columns},children(e){return(()=>{const n=Ct.cloneNode(!0);return Z(n,"click",void 0!==e.onClick?i=>e.onClick(i,t):void 0,!0),ee(n,(()=>u(t,e.id))),w((()=>X(n,"id",i?`${i}.${e.id}`:void 0))),n})()}})),n})()}})),w((t=>{var i;const s="solid-simple-table "+(null!==(i=e.className)&&void 0!==i?i:""),r=e.style;return s!==t._v$&&(n.className=t._v$=s),t._v$2=((e,t,i={})=>{const n=e.style;if("string"==typeof t)return n.cssText=t;let s,r;for(r in"string"==typeof i&&(i={}),i)null==t[r]&&n.removeProperty(r),delete i[r];for(r in t)s=t[r],s!==i[r]&&(n.setProperty(r,s),i[r]=s);return i})(n,r,t._v$2),t}),{_v$:void 0,_v$2:void 0}),n})()}function le(e){return"string"==typeof e?e:JSON.stringify(e)}function ae(e){var t;return null!==(t=e.label)&&void 0!==t?t:e.id}function ce(e,t){return le("object"==typeof e?e[t]:e)}function ue(e){return le(e)}function de(e,t){if(!e.length)return e;let i;const n=t[0];return i="object"==typeof e[0]?e.sort(((e,t)=>{const i=e[n],s=t[n];return i===s?0:s>i?-1:1})):e.sort(),"desc"===t[1]?i.reverse():i}function he(e){const[t,i]=v(e.delegate.filteredMessages,!1);P((()=>{e.delegate.onDidChangeMessages((e=>{i(e)}))}));const n=[{id:"severity",label:"Severity"},{id:"linterName",label:"Provider"},{id:"excerpt",label:"Description",onClick:pe,sortable:!1},{id:"line",label:"Line",onClick:pe}];return"Entire Project"===e.delegate.panelRepresents&&n.push({id:"file",label:"File",onClick:pe}),(()=>{const e=Mt.cloneNode(!0);return X(e,"tabindex",-1),e.style.setProperty("overflowY","scroll"),e.style.setProperty("height","100%"),ee(e,G(oe,{get rows(){return t()},columns:n,defaultSortDirection:["severity","asc"],rowSorter:d,accessors:!0,getRowID(e){return e.key},bodyRenderer:fe,style:{width:"100%"},className:"linter dark"})),e})()}function fe(e,t){const n=i(e);switch(t){case"file":return s(e);case"line":return n?`${n.start.row+1}:${n.start.column+1}`:"";case"excerpt":return e.excerpt;case"severity":return(()=>{const t=At.cloneNode(!0);return ee(t,(()=>Je[e.severity])),w((()=>t.className="solid-simple-table linter "+e.severity)),t})();default:return e[t]}}function pe(e,t){"A"!==e.target.tagName&&(("darwin"===process.platform?e.metaKey:e.ctrlKey)?e.shiftKey?u(t):c(t,!0):c(t))}function ge(e){const t=atom.workspace.paneContainerForItem(e);return t&&"object"==typeof t.state&&"number"==typeof t.state.size&&"function"==typeof t.render?t:null}function me(e){const t=document.createElement("a");return t.classList.add("icon-"+e),t.appendChild(document.createTextNode("")),t}function ve(e){async function i(t){const r=n.description||e.message.description;if(n.descriptionShow&&void 0===t)s({...n,descriptionShow:!1});else if(void 0!==t||"string"==typeof r){const e=await(async e=>(void 0===xi&&(xi=(await Ue("hRY2p")).default),xi(e)))(null!=t?t:r);s({description:e,descriptionShow:!0})}else if("function"==typeof r){if(s({...n,descriptionShow:!0}),o())return;l(!0);const e=await r();if("string"!=typeof e)throw Error("Expected result to be string, got: "+typeof e);try{await i(e)}catch(e){console.log("[Linter] Error getting descriptions",e),l(!1),n.descriptionShow&&await i()}}else console.error("[Linter] Invalid description detected, expected string or function but got:",typeof r)}const[n,s]=((e,t)=>{const i=H({description:"",descriptionShow:!1}||{});return[j(i),(...e)=>{b((()=>W(i,e)))}]})(),[o,l]=v(!1,!1);P((()=>{e.delegate.onShouldUpdate((()=>{s({description:"",descriptionShow:!1})})),e.delegate.onShouldExpand((async()=>{n.descriptionShow||await i()})),e.delegate.onShouldCollapse((async()=>{n.descriptionShow&&await i()}))}));const{message:a,delegate:d}=e;return(()=>{const e=Pi.cloneNode(!0),s=e.firstChild,o=s.firstChild,l=o.firstChild,p=o.nextSibling;return e.$$click=we,ee(s,G(U,{get when(){return void 0!==a.description},get children(){const e=vi.cloneNode(!0),t=e.firstChild;return e.$$click=()=>i(),w((()=>t.className="icon linter-icon icon-"+(n.descriptionShow?"chevron-down":"chevron-right"))),e}}),o),ee(s,G(U,{get when(){return(e=>{const t=e.solutions;return!(2!==e.version||!Array.isArray(t)||0>=t.length)})(a)},get children(){const e=wi.cloneNode(!0);return Z(e,"click",t(ui)((()=>(e=>{const t=e.solutions,i=r();null!==i&&2===e.version&&Array.isArray(t)&&t.length>0&&f(i,h(t)[0])})(a))),!0),e}}),o),ee(l,G(U,{get when(){return!0===d.showProviderName},get children(){return a.linterName+": "}})),ee(o,(()=>a.excerpt),null),ee(p,G(U,{get when(){var e;return void 0!==(null===(e=a.reference)||void 0===e?void 0:e.file)},get children(){const e=yi.cloneNode(!0);return Z(e,"click",t(jt)((()=>c(a,!0))),!0),e}}),null),ee(p,G(U,{get when(){return void 0!==a.url},get children(){const e=bi.cloneNode(!0);return Z(e,"click",t(jt)((()=>u(a))),!0),e}}),null),ee(e,G(U,{get when(){return n.descriptionShow},get children(){const e=ki.cloneNode(!0);return w((()=>e.innerHTML=n.description||"Loading...")),e}}),null),w((()=>s.className="linter-excerpt "+a.severity)),e})()}function we(e){if(!(e.target instanceof HTMLElement))return;const t=(e=>{let t=e;for(;t&&!t.classList.contains("linter-line");){if(t instanceof HTMLAnchorElement)return t.href;t=t.parentElement}return null})(e.target);if(null===t)return;const{protocol:i,hostname:n,query:s}=qe(t,!0);if("atom:"===i&&"linter"===n&&void 0!==(null==s?void 0:s.file)){const{file:e,row:t,column:i}=s;a(Array.isArray(e)?e[0]:e,{row:void 0!==t?parseInt(Array.isArray(t)?t[0]:t,10):0,column:void 0!==i?parseInt(Array.isArray(i)?i[0]:i,10):0})}}function ye(e,t){const i=atom.views.getView(e).getComponent();t.addEventListener("mousedown",(()=>{ke(i),t.addEventListener("mouseleave",(()=>{be(i)}))}))}function be(e){null==e||e.didFocus()}function ke(e){null==e||e.didBlurHiddenInput({relatedTarget:null})}async function Pe(e){if(e.preventDefault(),e.ctrlKey&&"c"===e.key){var t,i;const e=null!==(t=null===(i=document.getSelection())||void 0===i?void 0:""+i)&&void 0!==t?t:"";await navigator.clipboard.writeText(e)}}function xe(e,t){if(e.largeFileMode)return 1e5;const i=e.getLineCount();return t>i?0:i}function Ce(e,t,i=e.getLineCount()){const n=e.getBuffer();for(let e=0,s=i;s>e;e++){const i=n.lineLengthForRow(e);if(i>t)return i}return 0}function Ee(e,t,i=!1){let n=null;i&&(n=e.querySelector("linter-decoration")),null!==n?n.className="":(n=document.createElement("linter-decoration"),e.appendChild(n)),t.error?n.classList.add("linter-error"):t.warning?n.classList.add("linter-warning"):t.info&&n.classList.add("linter-info")}function Se(e){var t;null===(t=e.querySelector("linter-decoration"))||void 0===t||t.remove()}function Le(){atom.config.get("linter-ui-default.useBusySignal")&&atom.packages.getLoadedPackage("linter-ui-default").metadata["package-deps"].push("busy-signal");const e=window.requestIdleCallback((()=>{Di.delete(e);{const{install:e}=Ie;e("linter-ui-default")}}));Di.add(e)}function Te(){Di.forEach((e=>window.cancelIdleCallback(e))),Di.clear();for(const e of Ii)e.dispose();Ii.clear()}function Me(){const e=new Ni;return Ii.add(e),Bi&&e.signal.attach(Bi),e}function Ae(){return Array.from(Ii).map((e=>e.intentions))}function Ne(e){Bi=e,Ii.forEach((e=>{e.signal.attach(Bi)}))}function De(e){Oi=e,Ii.forEach((e=>{e.statusBar.attach(Oi)}))}var Ie=require("atom-package-deps"),Be=require("atom"),Oe=Be.CompositeDisposable,Re=Be.Disposable,Fe=Be.Range,je=Be.Emitter,$e=require("electron").shell,He=t(require("assert")),_e=t(require("disposable-event")),qe=require("url").parse,Ve=t(require("path")),We="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},Ge={},ze={},Ue=We.parcelRequiree95c;null==Ue&&((Ue=e=>{if(e in Ge)return Ge[e].exports;if(e in ze){let t=ze[e];delete ze[e];let i={id:e,exports:{}};return Ge[e]=i,t.call(i.exports,i,i.exports),i.exports}var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}).register=(e,t)=>{ze[e]=t},We.parcelRequiree95c=Ue),e(module.exports,"deactivate",(()=>Te)),e(module.exports,"activate",(()=>Le)),e(module.exports,"provideUI",(()=>Me)),e(module.exports,"provideIntentions",(()=>Ae)),e(module.exports,"consumeSignal",(()=>Ne)),e(module.exports,"consumeStatusBar",(()=>De));let Ke=null;const Ye={error:3,warning:2,info:1},Je={error:"Error",warning:"Warning",info:"Info"},Qe=["center","bottom"];class Xe{constructor(){this.emitter=new je,this.messages=[],this.filteredMessages=[],this.subscriptions=new Oe;let e=null;this.subscriptions.add(atom.config.observe("linter-ui-default.panelRepresents",(e=>{const t=void 0!==this.panelRepresents;this.panelRepresents=e,t&&this.update()})),atom.workspace.getCenter().observeActivePaneItem((()=>{e&&(e.dispose(),e=null);const t=r();if(t){"Entire Project"!==this.panelRepresents&&this.update();let i=-1;e=t.onDidChangeCursorPosition((({newBufferPosition:e})=>{i!==e.row&&"Current Line"===this.panelRepresents&&(i=e.row,this.update())}))}("Entire Project"!==this.panelRepresents||t)&&this.update()})),new Re((()=>{e&&e.dispose()})))}getFilteredMessages(){let e=[];if("Entire Project"===this.panelRepresents)e=this.messages;else if("Current File"===this.panelRepresents){const t=r();if(!t)return[];e=o(this.messages,t.getPath())}else if("Current Line"===this.panelRepresents){const t=r();if(!t)return[];const i=t.getCursors()[0].getBufferRow();e=l(this.messages,t.getPath(),Fe.fromObject([[i,0],[i,1/0]]))}return e}update(e=null){Array.isArray(e)&&(this.messages=e),this.filteredMessages=this.getFilteredMessages(),this.emitter.emit("observe-messages",this.filteredMessages)}onDidChangeMessages(e){return this.emitter.on("observe-messages",e)}dispose(){this.subscriptions.dispose()}}const Ze={},et=(e,t)=>e===t;let tt=null,it=A;const nt={},st={owned:null,cleanups:null,context:null,owner:null},[rt,ot]=v(!1);var lt=null,at=null;let ct=null,ut=null,dt=null,ht=null,ft=0;const pt=Symbol(),gt=Symbol(),mt=Symbol(),vt=Symbol(),wt={get(e,t,i){if(t===pt)return e;if(t===mt)return i;const n=e[t];if(t===gt||"__proto__"===t)return n;const s=$(n);if(at&&("function"!=typeof n||e.hasOwnProperty(t))){let i,r;s&&(i=_(n))&&(r=i._||(i._=q()),r()),i=_(e),r=i[t]||(i[t]=q()),r()}return s?j(n):n},set:()=>!0,deleteProperty:()=>!0,getOwnPropertyDescriptor(e,t){const i=Reflect.getOwnPropertyDescriptor(e,t);return!i||i.get||t===mt||t===gt||t===vt||(delete i.value,delete i.writable,i.get=()=>e[mt][t]),i}},yt=Symbol();(e=>{Symbol()})(),new Set(["className","indeterminate","value","allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","truespeed"]),new Set(["innerHTML","textContent","innerText","children"]),new Set(["beforeinput","click","dblclick","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]);const bt=Symbol(),kt=J("<table><thead><tr></tr></thead><tbody></tbody></table>",8),Pt=J("<th></th>",2),xt=J("<tr></tr>",2),Ct=J("<td></td>",2),Et=J('<span class="sort-icon"></span>',2),St="↑",Lt="↓",Tt="⇅";Q(["click"]);const Mt=J('<div id="linter-panel"></div>',2),At=J("<div></div>",2);class Nt{constructor(e){this.element=document.createElement("div"),this.subscriptions=new Oe,this.panelHeight=100,this.alwaysTakeMinimumSpace=!0,this.subscriptions.add(atom.config.observe("linter-ui-default.panelHeight",(e=>{const t="number"==typeof this.panelHeight;this.panelHeight=e,t&&this.doPanelResize(!0)})),atom.config.observe("linter-ui-default.alwaysTakeMinimumSpace",(e=>{this.alwaysTakeMinimumSpace=e}))),this.doPanelResize(),Y((()=>G(he,{delegate:e})),this.element)}doPanelResize(e=!1){const t=ge(this);if(null===t)return;let i=null;const n=atom.views.getView(t);if(n&&this.alwaysTakeMinimumSpace){const e=n.querySelector(".list-inline.tab-bar.inset-panel"),t=e?e.getClientRects()[0]:null,s=this.element.querySelector("table"),r=s?s.getClientRects()[0]:null;t&&r&&(i=t.height+r.height+1)}let s=null;const r=null===i||e?this.panelHeight:Math.min(i,this.panelHeight);null===this.lastSetPaneHeight||t.state.size===this.lastSetPaneHeight||e||(s=t.state.size),this.lastSetPaneHeight=r,t.state.size=r,t.render(t.state),null!==s&&atom.config.set("linter-ui-default.panelHeight",s)}getURI(){return"atom://linter-ui-default"}getTitle(){return"Linter"}getDefaultLocation(){return"bottom"}getAllowedLocations(){return Qe}getPreferredHeight(){return atom.config.get("linter-ui-default.panelHeight")}dispose(){this.subscriptions.dispose();const e=ge(this);var t;null===e||this.alwaysTakeMinimumSpace||e.state.size===this.panelHeight||(atom.config.set("linter-ui-default.panelHeight",e.state.size),null===(t=e.paneForItem(this))||void 0===t||t.destroyItem(this,!0))}}class Dt{constructor(){this.panel=null,this.element=document.createElement("div"),this.delegate=new Xe,this.messages=[],this.deactivating=!1,this.subscriptions=new Oe,this.showPanelConfig=!0,this.hidePanelWhenEmpty=!0,this.showPanelStateMessages=!1,this.subscriptions.add(this.delegate,atom.config.observe("linter-ui-default.hidePanelWhenEmpty",(e=>{this.hidePanelWhenEmpty=e,this.refresh()})),atom.workspace.onDidDestroyPane((({pane:e})=>{(null===this.panel||e.getItems().includes(this.panel))&&!this.deactivating&&(this.panel=null,atom.config.set("linter-ui-default.showPanel",!1))})),atom.workspace.onDidDestroyPaneItem((({item:e})=>{e instanceof Nt&&!this.deactivating&&(this.panel=null,atom.config.set("linter-ui-default.showPanel",!1))})),atom.config.observe("linter-ui-default.showPanel",(e=>{this.showPanelConfig=e,this.refresh()})),atom.workspace.getCenter().observeActivePaneItem((()=>{this.showPanelStateMessages=!!this.delegate.filteredMessages.length,this.refresh()}))),this.activationTimer=window.requestIdleCallback((()=>{let e=!0;const t=atom.workspace.getBottomDock();this.subscriptions.add(t.onDidChangeActivePaneItem((t=>{this.panel&&"bottom"===this.getPanelLocation()&&(e?e=!1:t===this.panel!==this.showPanelConfig&&atom.config.set("linter-ui-default.showPanel",!this.showPanelConfig))})),t.onDidChangeVisible((e=>{this.panel&&"bottom"===this.getPanelLocation()&&(!e&&this.showPanelConfig&&this.hidePanelWhenEmpty&&!this.showPanelStateMessages||t.getActivePaneItem()===this.panel&&e!==this.showPanelConfig&&atom.config.set("linter-ui-default.showPanel",!this.showPanelConfig))}))),this.activate()}))}getPanelLocation(){if(!this.panel)return null;const e=atom.workspace.paneContainerForItem(this.panel);return e&&e.location||null}async activate(){this.panel||(this.panel=new Nt(this.delegate),await atom.workspace.open(this.panel,{activatePane:!1,activateItem:!1,searchAllPanes:!0}),this.update(),this.refresh())}update(e=null){e&&(this.messages=e),this.delegate.update(this.messages),this.showPanelStateMessages=!!this.delegate.filteredMessages.length,this.refresh()}async refresh(){const e=this.panel;if(null===e)return void(this.showPanelConfig&&await this.activate());const t=atom.workspace.paneContainerForItem(e);if(!t||"bottom"!==t.location)return;const i=t.getActivePaneItem()===e;var n;!this.showPanelConfig||this.hidePanelWhenEmpty&&!this.showPanelStateMessages?i&&t.hide():(i||null===(n=t.paneForItem(e))||void 0===n||n.activateItem(e),t.show(),e.doPanelResize())}dispose(){this.deactivating=!0,this.panel&&this.panel.dispose(),this.subscriptions.dispose(),window.cancelIdleCallback(this.activationTimer)}}class It{constructor(){this.messages=[],this.subscriptions=new Oe,this.subscriptions.add(atom.commands.add("atom-workspace",{"linter-ui-default:next":()=>this.move(!0,!0),"linter-ui-default:previous":()=>this.move(!1,!0),"linter-ui-default:next-error":()=>this.move(!0,!0,"error"),"linter-ui-default:previous-error":()=>this.move(!1,!0,"error"),"linter-ui-default:next-warning":()=>this.move(!0,!0,"warning"),"linter-ui-default:previous-warning":()=>this.move(!1,!0,"warning"),"linter-ui-default:next-info":()=>this.move(!0,!0,"info"),"linter-ui-default:previous-info":()=>this.move(!1,!0,"info"),"linter-ui-default:next-in-current-file":()=>this.move(!0,!1),"linter-ui-default:previous-in-current-file":()=>this.move(!1,!1),"linter-ui-default:next-error-in-current-file":()=>this.move(!0,!1,"error"),"linter-ui-default:previous-error-in-current-file":()=>this.move(!1,!1,"error"),"linter-ui-default:next-warning-in-current-file":()=>this.move(!0,!1,"warning"),"linter-ui-default:previous-warning-in-current-file":()=>this.move(!1,!1,"warning"),"linter-ui-default:next-info-in-current-file":()=>this.move(!0,!1,"info"),"linter-ui-default:previous-info-in-current-file":()=>this.move(!1,!1,"info"),"linter-ui-default:toggle-panel"(){atom.config.set("linter-ui-default.showPanel",!atom.config.get("linter-ui-default.showPanel"))},"linter-ui-default:expand-tooltip"(){},"linter-ui-default:collapse-tooltip"(){}}),atom.commands.add("atom-text-editor:not([mini])",{"linter-ui-default:apply-all-solutions":()=>this.applyAllSolutions()}),atom.commands.add("#linter-panel",{"core:copy"(){const e=document.getSelection();e&&atom.clipboard.write(""+e)}}))}applyAllSolutions(){const e=r();He(e,"textEditor was null on a command supposed to run on text-editors only"),d(o(this.messages,e.getPath()),["line","desc"]).forEach((t=>{2===t.version&&Array.isArray(t.solutions)&&t.solutions.length>0&&f(e,h(t.solutions)[0])}))}move(e,t,s=null){const l=r(),a=l&&l.getPath()||NaN,u=d(o(this.messages,t?null:a,s),["file","asc"]),h=e?-1:1;if(!l){const t=e?u[0]:u[u.length-1];return void(t&&c(t))}const f=l.getCursorBufferPosition();e||u.reverse();let p=null,g=!1;for(let e=0,t=u.length;t>e;e++){const t=u[e],s=n(t),r=i(t);if(g||s!==a||(g=!0),s&&r){if(g&&s!==a){p=t;break}if(s===a&&f.compare(r.start)===h){p=t;break}}}!p&&u.length&&(p=u[0]),p&&c(p)}update(e){this.messages=e}dispose(){this.subscriptions.dispose()}}class Bt{constructor(){this.item=document.createElement("div"),this.itemErrors=me("stop"),this.itemWarnings=me("alert"),this.itemInfos=me("info"),this.emitter=new je,this.subscriptions=new Oe,this.item.appendChild(this.itemErrors),this.item.appendChild(this.itemWarnings),this.item.appendChild(this.itemInfos),this.item.classList.add("inline-block"),this.item.classList.add("linter-status-count"),this.subscriptions.add(this.emitter,atom.tooltips.add(this.itemErrors,{title:"Linter Errors"}),atom.tooltips.add(this.itemWarnings,{title:"Linter Warnings"}),atom.tooltips.add(this.itemInfos,{title:"Linter Infos"})),this.itemErrors.onclick=()=>this.emitter.emit("click","error"),this.itemWarnings.onclick=()=>this.emitter.emit("click","warning"),this.itemInfos.onclick=()=>this.emitter.emit("click","info"),this.update(0,0,0)}setVisibility(e,t){t?this.item.classList.remove("hide-"+e):this.item.classList.add("hide-"+e)}update(e,t,i){this.itemErrors.childNodes[0].textContent=e+"",this.itemWarnings.childNodes[0].textContent=t+"",this.itemInfos.childNodes[0].textContent=i+"",e?this.itemErrors.classList.add("text-error"):this.itemErrors.classList.remove("text-error"),t?this.itemWarnings.classList.add("text-warning"):this.itemWarnings.classList.remove("text-warning"),i?this.itemInfos.classList.add("text-info"):this.itemInfos.classList.remove("text-info")}onDidClick(e){return this.emitter.on("click",e)}dispose(){this.subscriptions.dispose()}}class Ot{constructor(){this.element=new Bt,this.messages=[],this.subscriptions=new Oe,this.subscriptions.add(this.element,atom.config.observe("linter-ui-default.statusBarRepresents",(e=>{const t=void 0!==this.statusBarRepresents;this.statusBarRepresents=e,t&&this.update()})),atom.config.observe("linter-ui-default.statusBarClickBehavior",(e=>{const t=void 0!==this.statusBarClickBehavior;this.statusBarClickBehavior=e,t&&this.update()})),atom.config.observe("linter-ui-default.showStatusBar",(e=>{this.element.setVisibility("config",e)})),atom.workspace.getCenter().observeActivePaneItem((e=>{const t=atom.workspace.isTextEditor(e);this.element.setVisibility("pane",t),t&&"Current File"===this.statusBarRepresents&&this.update()}))),this.element.onDidClick((e=>{const t=atom.views.getView(atom.workspace);"Toggle Panel"===this.statusBarClickBehavior?atom.commands.dispatch(t,"linter-ui-default:toggle-panel"):"Toggle Status Bar Scope"===this.statusBarClickBehavior?atom.config.set("linter-ui-default.statusBarRepresents","Entire Project"===this.statusBarRepresents?"Current File":"Entire Project"):atom.commands.dispatch(t,`linter-ui-default:next-${e}${"Current File"===this.statusBarRepresents?"-in-current-file":""}`)}))}update(e=null){e?this.messages=e:e=this.messages;const t={error:0,warning:0,info:0},i=r(),s=i&&i.getPath()||NaN;e.forEach((e=>{"Entire Project"!==this.statusBarRepresents&&n(e)!==s||("error"===e.severity?t.error++:"warning"===e.severity?t.warning++:t.info++)})),this.element.update(t.error,t.warning,t.info)}attach(e){let t=null;this.subscriptions.add(atom.config.observe("linter-ui-default.statusBarPosition",(i=>{t&&t.destroy(),t=e[`add${i}Tile`]({item:this.element.item,priority:"Left"===i?0:1e3})}))),this.subscriptions.add(new Re((()=>{t&&t.destroy()})))}dispose(){this.subscriptions.dispose()}}class Rt{constructor(){this.executing=new Set,this.providerTitles=new Set,this.useBusySignal=!0,this.subscriptions=new Oe,this.subscriptions.add(atom.config.observe("linter-ui-default.useBusySignal",(e=>{this.useBusySignal=e})))}attach(e){this.provider=e.create(),this.update()}update(){const e=this.provider;if(!e)return;if(!this.useBusySignal)return;const t=new Map,i=new Set;for(const{filePath:e,linter:i}of this.executing){let n=t.get(e);n||t.set(e,n=[]),n.push(i.name)}for(const[n,s]of t){const t=n?" on "+atom.project.relativizePath(n)[1]:"";s.forEach((n=>{const s=`${n}${t}`;i.add(s),this.providerTitles.has(s)||(this.providerTitles.add(s),e.add(s))}))}this.providerTitles.forEach((t=>{i.has(t)||(e.remove(t),this.providerTitles.delete(t))})),t.clear()}getExecuting(e,t){for(const i of this.executing)if(i.linter===e&&i.filePath===t)return i;return null}didBeginLinting(e,t){this.getExecuting(e,t)||(this.executing.add({linter:e,filePath:t}),this.update())}didFinishLinting(e,t){const i=this.getExecuting(e,t);i&&(this.executing.delete(i),this.update())}dispose(){this.provider&&this.provider.clear(),this.providerTitles.clear(),this.executing.clear(),this.subscriptions.dispose()}}class Ft{getIntentions({textEditor:e,bufferPosition:t}){let n=[];const s=o(this.messages,e.getPath());for(const o of s){const s=o.solutions,l=Array.isArray(s)&&s.length>0;if(!l&&"function"!=typeof s)continue;const a=i(o);if(!0!==(null==a?void 0:a.containsPoint(t)))continue;const c=o.linterName||"Linter";var r;2===o.version&&l&&(n=n.concat(s.map((t=>({priority:"number"==typeof t.priority?t.priority+200:200,icon:"tools",title:null!==(r=t.title)&&void 0!==r?r:`Fix ${c} issue`,selected(){f(e,t)}})))))}return n}update(e){this.messages=e}constructor(){this.messages=[],this.grammarScopes=["*"]}}var jt,$t;$t=e=>{var t=typeof e;return null!=e&&("object"==t||"function"==t)};var Ht,_t={},qt="object"==typeof self&&self&&self.Object===Object&&self,Vt="object"==typeof We&&We&&We.Object===Object&&We||qt||Function("","return this")();Ht=()=>_t.Date.now();var Wt,Gt,zt,Ut=/\s/;zt=e=>{for(var t=e.length;t--&&Ut.test(e.charAt(t)););return t},Gt=e=>e?e.slice(0,zt(e)+1).replace(/^\s+/,""):e;var Kt,Yt,Jt,Qt,Xt=Object.prototype,Zt=Xt.hasOwnProperty,ei=Xt.toString,ti=(Kt=(_t=Vt).Symbol)?Kt.toStringTag:void 0;Qt=e=>{var t=Zt.call(e,ti),i=e[ti];try{e[ti]=void 0;var n=!0}catch(e){}var s=ei.call(e);return n&&(t?e[ti]=i:delete e[ti]),s};var ii,ni={}.toString;ii=e=>ni.call(e);var si,ri=Kt?Kt.toStringTag:void 0;Jt=e=>null==e?void 0===e?"[object Undefined]":"[object Null]":ri&&ri in Object(e)?Qt(e):ii(e),si=e=>null!=e&&"object"==typeof e,Yt=e=>"symbol"==typeof e||si(e)&&"[object Symbol]"==Jt(e);var oi=/^[-+]0x[0-9a-f]+$/i,li=/^0b[01]+$/i,ai=/^0o[0-7]+$/i,ci=parseInt;Wt=e=>{if("number"==typeof e)return e;if(Yt(e))return NaN;if($t(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=$t(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Gt(e);var i=li.test(e);return i||ai.test(e)?ci(e.slice(2),i?2:8):oi.test(e)?NaN:+e};var ui,di,hi,fi,pi=Math.max,gi=Math.min;jt=function(e,t,i){function n(t){var i=c,n=u;return c=u=void 0,g=t,h=e.apply(n,i)}function s(e){return g=e,f=setTimeout(o,t),m?n(e):h}function r(e){var i=e-p;return void 0===p||i>=t||0>i||v&&e-g>=d}function o(){var e=Ht();if(r(e))return l(e);f=setTimeout(o,(e=>{var i=t-(e-p);return v?gi(i,d-(e-g)):i})(e))}function l(e){return f=void 0,w&&c?n(e):(c=u=void 0,h)}function a(){var e=Ht(),i=r(e);if(c=arguments,u=this,p=e,i){if(void 0===f)return s(p);if(v)return clearTimeout(f),f=setTimeout(o,t),n(p)}return void 0===f&&(f=setTimeout(o,t)),h}var c,u,d,h,f,p,g=0,m=!1,v=!1,w=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return t=Wt(t)||0,$t(i)&&(m=!!i.leading,d=(v="maxWait"in i)?pi(Wt(i.maxWait)||0,t):d,w="trailing"in i?!!i.trailing:w),a.cancel=()=>{void 0!==f&&clearTimeout(f),g=0,c=p=u=f=void 0},a.flush=()=>void 0===f?h:l(Ht()),a};class mi{constructor(){this.emitter=new je,this.expanded=!1,this.subscriptions=new Oe,this.subscriptions.add(this.emitter,atom.config.observe("linter-ui-default.showProviderName",(e=>{const t=void 0!==this.showProviderName;this.showProviderName=e,t&&this.emitter.emit("should-update")})),atom.commands.add("atom-workspace",{"linter-ui-default:expand-tooltip":e=>{var t;this.expanded||(this.expanded=!0,this.emitter.emit("should-expand"),!0===(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)&&document.body.addEventListener("keyup",(async function e(){document.body.removeEventListener("keyup",e),await atom.commands.dispatch(atom.views.getView(atom.workspace),"linter-ui-default:collapse-tooltip")}),{passive:!0}))},"linter-ui-default:collapse-tooltip":()=>{this.expanded=!1,this.emitter.emit("should-collapse")}}))}onShouldUpdate(e){return this.emitter.on("should-update",e)}onShouldExpand(e){return this.emitter.on("should-expand",e)}onShouldCollapse(e){return this.emitter.on("should-collapse",e)}dispose(){this.emitter.dispose()}}fi=e=>e?1/0===(e=Wt(e))||-1/0===e?17976931348623157e292*(0>e?-1:1):e==e?e:0:0===e?e:0,hi=e=>{var t=fi(e),i=t%1;return t==t?i?t-i:t:0},di=function(e,t){var i;if("function"!=typeof t)throw new TypeError("Expected a function");return e=hi(e),function(){return--e>0&&(i=t.apply(this,arguments)),e>1||(t=void 0),i}},ui=e=>di(2,e);const vi=J("<a><span></span></a>",4),wi=J('<button class="btn fix-btn">Fix</button>',2),yi=J('<a><span class="icon linter-icon icon-alignment-aligned-to"></span></a>',4),bi=J('<a><span class="icon linter-icon icon-link"></span></a>',4),ki=J('<div class="linter-line"></div>',2),Pi=J('<div class="linter-message"><div><div class="linter-text"><div class="provider-name"></div></div><div class="linter-buttons-right"></div></div></div>',10);let xi;Ue.register("hRY2p",((e,t)=>{e.exports=Promise.resolve(require("./marked.esm.171c7c5e.js")).then((()=>Ue("kt143")))})),Q(["click"]);var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.makeOverlaySelectable=(e,t,i=!0)=>{t.setAttribute("tabindex","-1"),t.style.userSelect&&"none"!==t.style.userSelect||(t.style.userSelect="text"),i&&ye(e,t),t.classList.add("native-key-bindings")},Ci.overlayFocusFix=ye,Ci.focusEditor=be,Ci.blurEditor=ke,Ci.makeOverLayCopyable=e=>{e.addEventListener("mouseenter",(()=>{e.addEventListener("keydown",Pe)})),e.addEventListener("mouseleave",(()=>{e.removeEventListener("keydown",Pe)}))},Ci.copyListener=Pe;const Ei=J('<div class="linter-messages"></div>',2);class Si{constructor(e,t,i){this.element=document.createElement("div"),this.emitter=new je,this.subscriptions=new Oe,this.messages=e,this.marker=i.markBufferRange([t,t]),this.marker.onDidDestroy((()=>this.emitter.emit("did-destroy")));const n=new mi;Ci.makeOverlaySelectable(i,this.element),this.element.id="linter-tooltip",i.decorateMarker(this.marker,{type:"overlay",item:this.element}),this.subscriptions.add(this.emitter,n),Y((()=>{return t=e,i=n,(()=>{const e=Ei.cloneNode(!0);return ee(e,G(z,{each:t,children(e){return G(U,{get when(){return 2===e.version},get children(){return G(ve,{get key(){return e.key},delegate:i,message:e})}})}})),e})();var t,i}),this.element),setTimeout((()=>{const e=this.element.getBoundingClientRect().height,n=i.getLineHeightInPixels();if((t.row-i.getFirstVisibleScreenRow())*n>e){const t=this.element.parentElement;null!==t&&(t.style.transform=`translateY(-${2+n+e}px)`)}else{const e=i.getElement().querySelector(".datatip-overlay");if(null!==e){const t=this.element.parentElement;null!==t&&(t.style.transform=`translateY(${e.clientHeight}px)`)}}this.element.style.visibility="visible"}),50)}isValid(e,t){if(1!==this.messages.length||!t.has(this.messages[0].key))return!1;const n=i(this.messages[0]);return!0===(null==n?void 0:n.containsPoint(e))}onDidDestroy(e){return this.emitter.on("did-destroy",e)}dispose(){this.emitter.emit("did-destroy"),this.subscriptions.dispose()}}class Li{constructor(e){this.gutter=null,this.tooltip=null,this.emitter=new je,this.markers=new Map,this.messages=new Map,this.showTooltip=!0,this.subscriptions=new Oe,this.cursorPosition=null,this.tooltipFollows="Both",this.showProviderName=!0,this.ignoreTooltipInvocation=!1,this.currentLineMarker=null,this.lastCursorPositions=new WeakMap,this.textEditor=e;let t=null;this.subscriptions.add(this.emitter,e.onDidDestroy((()=>{this.dispose()})),new Re((()=>{null==t||t.dispose()})),atom.config.observe("linter-ui-default.showProviderName",(e=>{this.showProviderName=e})),atom.config.observe("linter-ui-default.showDecorations",(e=>{const t=void 0!==this.showDecorations;this.showDecorations=e,t&&this.updateGutter()})),atom.config.observe("linter-ui-default.gutterPosition",(e=>{const t=void 0!==this.gutterPosition;this.gutterPosition=e,t&&this.updateGutter()})),atom.config.observe("linter-ui-default.showTooltip",(e=>{this.showTooltip=e,!this.showTooltip&&this.tooltip&&this.removeTooltip()})),atom.config.observe("linter-ui-default.tooltipFollows",(e=>{this.tooltipFollows=e,t&&t.dispose(),t=new Oe,"Mouse"!==e&&"Both"!==e||t.add(this.listenForMouseMovement()),"Keyboard"!==e&&"Both"!==e||t.add(this.listenForKeyboardMovement()),this.removeTooltip()})),e.onDidChangeCursorPosition((({cursor:e,newBufferPosition:t})=>{const i=this.lastCursorPositions.get(e);i&&i.isEqual(t)||(this.lastCursorPositions.set(e,t),this.ignoreTooltipInvocation=!1),"Mouse"===this.tooltipFollows&&this.removeTooltip()})),e.getBuffer().onDidChangeText((()=>{e.getCursors().forEach((e=>{this.lastCursorPositions.set(e,e.getBufferPosition())})),"Mouse"!==this.tooltipFollows&&(this.ignoreTooltipInvocation=!0,this.removeTooltip())}))),this.updateGutter(),this.listenForCurrentLine()}listenForCurrentLine(){this.subscriptions.add(this.textEditor.observeCursors((e=>{const t=({start:e,end:t})=>{const i=this.gutter;if(!i||this.subscriptions.disposed)return;const n=Fe.fromObject([e,t]),s=Fe.fromObject([[e.row,0],[t.row,1/0]]),r=n.isEmpty();if(e.row!==t.row&&0===n.end.column&&s.end.row--,this.lastRange&&this.lastRange.isEqual(s)&&r===this.lastIsEmpty)return;this.currentLineMarker&&(this.currentLineMarker.destroy(),this.currentLineMarker=null),this.lastRange=s,this.lastIsEmpty=r,this.currentLineMarker=this.textEditor.markScreenRange(s,{invalidate:"never"});const o=document.createElement("span");o.className="line-number cursor-line linter-cursor-line "+(r?"cursor-line-no-selection":""),i.decorateMarker(this.currentLineMarker,{item:o,class:"linter-row"})},i=e.getMarker(),n=new Oe;n.add(i.onDidChange((({newHeadScreenPosition:e,newTailScreenPosition:i})=>{t({start:e,end:i})}))),n.add(e.onDidDestroy((()=>{this.subscriptions.remove(n),n.dispose()}))),n.add(new Re((()=>{this.currentLineMarker&&(this.currentLineMarker.destroy(),this.currentLineMarker=null)}))),this.subscriptions.add(n),t(i.getScreenRange())})))}listenForMouseMovement(){const e=atom.views.getView(this.textEditor);return _e(e,"mousemove",t(jt)((t=>{if(!e.getComponent()||this.subscriptions.disposed||!((e,t)=>{let i=e;do{if(i.matches("div.scroll-view"))return!0;i=i.parentElement}while(i&&"HTML"!==i.nodeName);return!1})(t.target))return;const i=this.tooltip;i&&(({event:e,editor:t,editorElement:i,tooltipElement:n,screenPosition:s})=>{const r=i.getComponent().pixelPositionForMouseEvent(e),o=i.pixelPositionForScreenPosition(s),l=r.top-o.top,a=r.left-o.left,c=t.getLineHeightInPixels();if(l>0){if(l>n.offsetHeight+c+1.5*c)return!1}else if(0>l&&-1.5*c>l)return!1;if(a>0){if(a>n.offsetWidth+30)return!1}else if(0>a&&-30>a)return!1;return!0})({event:t,editor:this.textEditor,editorElement:e,tooltipElement:i.element,screenPosition:i.marker.getStartScreenPosition()})||(this.cursorPosition=((e,t,i)=>{const n=i.getComponent().pixelPositionForMouseEvent(e),s=i.getComponent().screenPositionForPixelPosition(n);if(Number.isNaN(s.row)||Number.isNaN(s.column))return null;const r=i.pixelPositionForScreenPosition(s),o=n.top-r.top,l=n.left-r.left;return(0===o||o>0&&20>o||0>o&&o>-20)&&(0===l||l>0&&20>l||0>l&&l>-20)?t.bufferPositionForScreenPosition(s):null})(t,this.textEditor,e),this.ignoreTooltipInvocation=!1,this.cursorPosition?this.updateTooltip(this.cursorPosition):this.removeTooltip())}),100),{passive:!0})}listenForKeyboardMovement(){return this.textEditor.onDidChangeCursorPosition(t(jt)((({newBufferPosition:e})=>{this.cursorPosition=e,this.updateTooltip(e)}),16))}updateGutter(){this.removeGutter(),this.showDecorations?(this.gutter=this.textEditor.addGutter({name:"linter-ui-default",priority:"Left"===this.gutterPosition?-100:100}),this.markers.forEach(((e,t)=>{const i=this.messages.get(t);if(i)for(const t of e)this.decorateMarker(i,t,"gutter")}))):this.gutter=null}removeGutter(){if(this.gutter)try{this.gutter.destroy()}catch(e){}}updateTooltip(e){if(!e||this.tooltip&&this.tooltip.isValid(e,this.messages))return;if(this.removeTooltip(),!this.showTooltip)return;if(this.ignoreTooltipInvocation)return;const t=l(this.messages,this.textEditor.getPath(),e);if(!t.length)return;this.tooltip=new Si(t,e,this.textEditor);const i=this.tooltip.marker;t.forEach((e=>{this.saveMarker(e.key,i)})),this.tooltip.onDidDestroy((()=>{this.tooltip=null}))}removeTooltip(){this.tooltip&&this.tooltip.marker.destroy()}applyChanges(e,t){const n=this.textEditor.getBuffer();for(let e=0,i=t.length;i>e;e++)this.destroyMarker(t[e].key);for(let t=0,s=e.length;s>t;t++){const s=e[t],r=i(s);if(!r)continue;const o=n.markRange(r,{invalidate:"never"});this.decorateMarker(s,o),o.onDidChange((({oldHeadPosition:e,newHeadPosition:t,isValid:i})=>{!i||0===t.row&&0!==e.row||2===s.version&&(s.location.position=o.previousEventState.range)}))}this.updateTooltip(this.cursorPosition)}decorateMarker(e,t,i="both"){this.saveMarker(e.key,t),this.messages.set(e.key,e),"both"!==i&&"editor"!==i||this.textEditor.decorateMarker(t,{type:"text",class:"linter-highlight linter-"+e.severity});const n=this.gutter;if(n&&("both"===i||"gutter"===i)){const i=document.createElement("span");i.className=`linter-gutter linter-gutter-${e.severity} icon icon-${e.icon||"primitive-dot"}`,n.decorateMarker(t,{class:"linter-row",item:i})}}saveMarker(e,t){const i=this.markers.get(e)||[];i.push(t),this.markers.set(e,i)}destroyMarker(e){const t=this.markers.get(e);t&&t.forEach((e=>{e&&e.destroy()})),this.markers.delete(e),this.messages.delete(e)}onDidDestroy(e){return this.emitter.on("did-destroy",e)}dispose(){this.emitter.emit("did-destroy"),this.subscriptions.dispose(),this.removeGutter(),this.removeTooltip()}}var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.lineLengthIfLong=Ti.lineCountIfLarge=Ti.largeness=void 0,Ti.largeness=(e,t=atom.config.get("atom-ide-base.largeLineCount")||4e3,i=atom.config.get("atom-ide-base.longLineLength")||4e3)=>{const n=xe(e,t);if(0!==n)return n;const s=Ce(e,i);return 0!==s?s:0},Ti.lineCountIfLarge=xe,Ti.lineLengthIfLong=Ce;class Mi{constructor(){this.editors=new Set,this.messages=[],this.firstRender=!0,this.subscriptions=new Oe;const e=atom.config.get("linter-ui-default.largeFileLineCount"),t=atom.config.get("linter-ui-default.longLineLength");this.subscriptions.add(atom.workspace.observeTextEditors((i=>{if(Ti.largeness(i,e,t)){const e=atom.notifications.addWarning("Linter: Large/Minified file detected",{detail:"Adding inline linter markers are skipped for this file for performance reasons (linter pane is still active)",dismissable:!0,buttons:[{text:"Force enable",onDidClick:()=>{this.getEditor(i),e.dismiss()}},{text:"Change threshold",async onDidClick(){await atom.workspace.open("atom://config/packages/linter-ui-default"),document.querySelectorAll(".control-group")[16].scrollIntoView(),e.dismiss()}}]});setTimeout((()=>{e.dismiss()}),5e3)}else this.getEditor(i)})),atom.workspace.getCenter().observeActivePaneItem((e=>{this.editors.forEach((t=>{t.textEditor!==e&&t.removeTooltip()}))})))}isFirstRender(){return this.firstRender}update({messages:e,added:t,removed:i}){this.messages=e,this.firstRender=!1;const{editorsMap:s,filePaths:r}=(e=>{const t=new Map,i=[];for(const s of e.editors){var n;const e=null!==(n=s.textEditor.getPath())&&void 0!==n?n:"";t.has(e)?t.get(e).editors.push(s):(t.set(e,{added:[],removed:[],editors:[s]}),i.push(e))}return{editorsMap:t,filePaths:i}})(this);t.forEach((e=>{if(!e||!e.location)return;const t=n(e);t&&s.has(t)&&s.get(t).added.push(e)})),i.forEach((e=>{if(!e||!e.location)return;const t=n(e);t&&s.has(t)&&s.get(t).removed.push(e)})),r.forEach((e=>{if(s.has(e)){const{added:t,removed:i,editors:n}=s.get(e);(t.length||i.length)&&n.forEach((e=>e.applyChanges(t,i)))}}))}getEditor(e){for(const t of this.editors)if(t.textEditor===e)return t;const t=new Li(e);return this.editors.add(t),t.onDidDestroy((()=>{this.editors.delete(t)})),t.subscriptions.add(e.onDidChangePath((()=>{t.dispose(),this.getEditor(e)}))),t.subscriptions.add(e.onDidChangeGrammar((()=>{t.dispose(),this.getEditor(e)}))),t.applyChanges(o(this.messages,e.getPath()),[]),t}dispose(){for(const e of this.editors)e.dispose();this.subscriptions.dispose()}}class Ai{constructor(){this.messages=[],this.decorations={},this.subscriptions=new Oe,this.subscriptions.add(atom.config.observe("linter-ui-default.decorateOnTreeView",(e=>{if(void 0===this.decorateOnTreeView)this.decorateOnTreeView=e;else if("None"===e)this.update([]),this.decorateOnTreeView=e;else{const t=this.messages;this.decorateOnTreeView=e,this.update(t)}}))),setTimeout((()=>{const e=Ai.getElement();e&&this.subscriptions.add(_e(e,"click",t(jt)((()=>{this.update()})),{passive:!0}))}),100)}update(e=null){Array.isArray(e)&&(this.messages=e);const t=this.messages,i=Ai.getElement(),s=this.decorateOnTreeView;i&&"None"!==s&&this.applyDecorations(((e,t)=>{const i={},s=atom.project.getPaths();return t.forEach((t=>{const r=n(t);r&&("Files"===e?[r]:((e,t)=>{const i=t.find((t=>e.startsWith(t)));return i?((e,t)=>{const i=[],n=e.split(Ve.sep);for(;n.length;){const e=n.join(Ve.sep);if(e&&(i.push(e),e===t))break;n.pop()}return i})(e,i):[e]})(r,s)).forEach((e=>((e,t,i)=>{e[t]||(e[t]={info:!1,error:!1,warning:!1}),e[t][i]=!0})(i,e,t.severity)))})),i})(s,t))}applyDecorations(e){const t=Ai.getElement();if(!t)return;const i=new Map,n={},s=Object.keys(this.decorations);for(const n of s)if(!(n in e)){const e=p(i,n,(()=>Ai.getElementByPath(t,n)));null!==e&&Se(e)}const r=Object.keys(e);for(const s of r){const r=p(i,s,(()=>Ai.getElementByPath(t,s)));null!==r&&(Ee(r,e[s],!!this.decorations[s]),n[s]=e[s])}this.decorations=n}dispose(){this.subscriptions.dispose()}static getElement(){return document.querySelector(".tree-view")}static getElementByPath(e,t){return e.querySelector(`[data-path=${CSS.escape(t)}]`)}}class Ni{constructor(){this.name="Linter",this.signal=new Rt,this.commands=new It,this.messages=[],this.statusBar=new Ot,this.intentions=new Ft,this.subscriptions=new Oe,this.idleCallbacks=new Set,this.subscriptions.add(this.signal,this.commands,this.statusBar);const e=window.requestIdleCallback((()=>{this.idleCallbacks.delete(e),this.panel=new Dt,this.panel.update(this.messages)}));this.idleCallbacks.add(e);const t=window.requestIdleCallback((()=>{this.idleCallbacks.delete(t),this.subscriptions.add(atom.config.observe("linter-ui-default.showDecorations",(e=>{e&&!this.editors?(this.editors=new Mi,this.editors.update({added:this.messages,removed:[],messages:this.messages})):!e&&this.editors&&(this.editors.dispose(),this.editors=null)})))}));this.idleCallbacks.add(t)}render(e){const t=this.editors;this.messages=e.messages,t&&(t.isFirstRender()?t.update({added:e.messages,removed:[],messages:e.messages}):t.update(e)),this.treeview||(this.treeview=new Ai,this.subscriptions.add(this.treeview)),this.treeview.update(e.messages),this.panel&&this.panel.update(e.messages),this.commands.update(e.messages),this.intentions.update(e.messages),this.statusBar.update(e.messages)}didBeginLinting(e,t){this.signal.didBeginLinting(e,t)}didFinishLinting(e,t){this.signal.didFinishLinting(e,t)}dispose(){this.idleCallbacks.forEach((e=>window.cancelIdleCallback(e))),this.idleCallbacks.clear(),this.subscriptions.dispose(),this.panel&&this.panel.dispose(),this.editors&&this.editors.dispose()}}const Di=new Set,Ii=new Set;let Bi,Oi;
//# sourceMappingURL=index.js.map
